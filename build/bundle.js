(()=>{"use strict";var t={389:(t,e,s)=>{s.r(e)},100:(t,e,s)=>{s.r(e)},629:(t,e,s)=>{s.r(e)},35:(t,e,s)=>{s.r(e)},948:(t,e,s)=>{s.r(e)},387:(t,e,s)=>{s.r(e)},395:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.api=void 0;const a=s(570);e.api=new a.default},570:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){const t=localStorage.getItem("tasks");this.tasksArr=JSON.parse(t),this.tasksArr&&this.tasksArr.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.date)})))}getAll(){return this.updateStoredData(),new Promise((t=>{setTimeout((()=>{t(this.tasksArr)}),500)}))}add(t){return new Promise((e=>{setTimeout((()=>{this.tasksArr?this.tasksArr.push(t):this.tasksArr=[t],e(t),this.updateStoredData()}),1e3)}))}remove(t){return new Promise((e=>{this.tasksArr=this.tasksArr.filter((e=>e.id!==t)),this.updateStoredData(),setTimeout((()=>{e(t)}),1e3)}))}update(t){return this.findTask(t.id).status=t.status,new Promise((e=>{setTimeout((()=>{e(t),this.updateStoredData()}),1e3)}))}updateStoredData(){localStorage.setItem("tasks",JSON.stringify(this.tasksArr))}findTask(t){return this.tasksArr.find((e=>e.id===t))}}},954:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e){const s=t.getState();t.updateState(function(t,e){switch(e.type){case"LOAD_INITIAL_TASKS":return Object.assign(Object.assign({},t),{loadingState:!1,tasks:e.payload});case"ADD_NOTE":return Object.assign(Object.assign({},t),{loadingState:!1,tasks:[...t.tasks,e.payload]});case"DELETE_NOTE":return Object.assign(Object.assign({},t),{loadingState:!1,tasks:t.tasks.filter((t=>t.id!==e.payload))});case"CHANGE_NOTE_STATUS":return Object.assign(Object.assign({},t),{loadingTasks:t.loadingTasks.filter((t=>t!==e.payload.id)),tasks:t.tasks.map((t=>t.id===e.payload.id?Object.assign(Object.assign({},t),{status:e.payload.status}):t))});case"CHANGE_FILTER":return Object.assign(Object.assign({},t),{filter:e.payload});case"CHANGE_IS_REVERSED":return Object.assign(Object.assign({},t),{isReversed:e.payload});case"LOADING_STATE":return Object.assign(Object.assign({},t),{loadingState:e.payload});case"NOTE_LOADING_STATE":let s=t.loadingTasks.slice(0);return e.payload.state?s.push(e.payload.id):s=s.filter((t=>t!==e.payload.id)),Object.assign(Object.assign({},t),{loadingTasks:s});default:return t}}(JSON.parse(JSON.stringify(s)),e))}}},586:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.subscribers=[],this.state=t}forcedConstructor(t){this.state=t}getState(){return this.state}updateState(t){this.state=t,this.subscribers.forEach((t=>{t(this.state)}))}subscribe(t){this.subscribers.push(t)}forceUpdate(){this.subscribers.forEach((t=>{t(this.state)}))}}},584:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(389);const a=s(593),n=s(395);e.default=class{constructor(t){this.element=(0,a.createHtmlElement)("div",["form"]),this.dispatch=t}createDOMElement(){this.element.innerHTML="",this.wrap=(0,a.createHtmlElement)("div",["form__wrap"]),this.input=(0,a.createHtmlElement)("input",["form__input"]),this.input.setAttribute("type","textarea"),this.input.setAttribute("required","true"),this.buttonAdd=(0,a.createHtmlElement)("button",["form__button"],"Add"),this.buttonAdd.setAttribute("type","submit"),this.buttonAdd.setAttribute("disabled","true"),this.counter=document.createElement("p"),this.counter.classList.add("board__counter"),this.counterValue=0,this.counter.textContent=`${this.counterValue}/55`,this.lengthWarning=(0,a.createHtmlElement)("p",["form__counter_error","form__warning"],"Note should contain from 5 to 55 symbols"),this.bindedHandleInputValidation=this.handleInputValidation.bind(this),this.bindedHandleCreateNote=this.handleCreateNote.bind(this),this.input.addEventListener("input",this.bindedHandleInputValidation),this.buttonAdd.addEventListener("click",this.bindedHandleCreateNote),this.wrap.append(this.input,this.counter,this.lengthWarning,this.buttonAdd),this.element.appendChild(this.wrap)}onStateUpdate(t){this.clearHandlers(),this.tasksArray=t.tasks.slice(0),this.createDOMElement()}getView(){return this.element}inputValidation(t,e,s){""===t.value?(this.counterValue=0,this.taskText=""):(this.counterValue=t.value.length,this.counterValue>=55&&(t.value=this.taskText),this.taskText=t.value[0].toUpperCase()+t.value.slice(1),t.value=this.taskText,this.counterValue<5?(e.classList.add("form__counter_error"),s.classList.add("form__warning_visible"),this.buttonAdd.setAttribute("disabled","true")):(e.classList.remove("form__counter_error"),s.classList.remove("form__warning_visible"),this.buttonAdd.removeAttribute("disabled"))),e.textContent=`${this.counterValue}/55`}handleInputValidation(){this.inputValidation(this.input,this.counter,this.lengthWarning)}handleCreateNote(){this.createNewNote(this.tasksArray)}clearHandlers(){this.input&&this.input.removeEventListener("input",this.bindedHandleInputValidation),this.buttonAdd&&this.buttonAdd.removeEventListener("click",this.bindedHandleCreateNote)}createNewNote(t){t.sort(((t,e)=>new Date(t.date).getTime()-new Date(e.date).getTime()));const e={id:t.length?t[t.length-1].id+1:1,note:this.taskText,status:"active",date:new Date};this.dispatch({type:"LOADING_STATE",payload:!0}),n.api.add(e).then((t=>{this.dispatch({type:"ADD_NOTE",payload:t})}))}}},348:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(100);const a=s(593),n=s(42);e.default=class{constructor(t){this.spinner=null,this.dispatch=t,this.element=(0,a.createHtmlElement)("div",["list"])}onStateUpdate(t){const e=t.loadingState;this.currentLength!==t.tasks.length||this.filter!==t.filter||this.isReversed!==t.isReversed?(this.updateList(t),this.spinner=null):this.taskInstances.forEach((e=>e.onStateUpdate(t))),e&&!this.spinner&&this.addSpinner(),this.spinner&&!t.loadingState&&this.removeSpinner()}getView(){return this.element}updateList(t){this.filter=t.filter,this.isReversed=t.isReversed,this.taskInstances&&this.taskInstances.forEach((t=>{t.clearHandlers()})),this.createTasksList(t.tasks)}addSpinner(){this.spinner=(0,a.createHtmlElement)("div",["task__spinner"]);const t=(0,a.createHtmlElement)("h3",["task__spinner__text"],"Loading..."),e=(0,a.createHtmlElement)("div",["task__spinner_wrap"]);this.spinner.append(e),e.append(t),this.wrap.append(this.spinner)}removeSpinner(){this.spinner.remove(),this.spinner=null}createTasksList(t){if(this.element.innerHTML="",this.currentLength=0,this.wrap=(0,a.createHtmlElement)("div",["list__wrap"]),t){let e=[];e="active"===this.filter?this.createTaskElements(t,"active"):"done"===this.filter?this.createTaskElements(t,"done"):this.createTaskElements(t,"all"),e.forEach((t=>this.wrap.append(t))),this.element.appendChild(this.wrap)}}createTaskElements(t,e){const s=[];return this.sortElementsByDate(t),this.taskInstances=[],t.forEach((t=>{if("all"===e||t.status===e){const e=new n.default(t,this.dispatch);s.push(e.getView()),this.currentLength++,this.taskInstances.push(e)}})),s}sortElementsByDate(t){this.isReversed?t.sort(((t,e)=>new Date(t.date).getTime()-new Date(e.date).getTime())):t.sort(((t,e)=>new Date(e.date).getTime()-new Date(t.date).getTime()))}}},678:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(629);const a=s(593);e.default=class{constructor(t){this.isReversed=!1,this.dispatch=t,this.element=(0,a.createHtmlElement)("div",["nav"]),this.createDOMElement(),this.buttonAll.classList.add("nav__button_selected")}getView(){return this.element}onStateUpdate(t){switch([this.buttonAll,this.buttonActive,this.buttonDone].forEach((t=>t.classList.remove("nav__button_selected"))),t.filter){case"active":this.buttonActive.classList.add("nav__button_selected");break;case"done":this.buttonDone.classList.add("nav__button_selected");break;default:this.buttonAll.classList.add("nav__button_selected")}switch(t.isReversed){case!0:this.buttonReserse.classList.add("nav__button_selected");break;case!1:this.buttonReserse.classList.remove("nav__button_selected")}}createDOMElement(){this.element.childNodes.forEach((t=>t.remove)),this.filterWrap=(0,a.createHtmlElement)("div",["nav__container"]),this.buttonAll=(0,a.createHtmlElement)("button",["nav__button"],"All","all"),this.buttonActive=(0,a.createHtmlElement)("button",["nav__button"],"Active","active"),this.buttonDone=(0,a.createHtmlElement)("button",["nav__button"],"Done","done"),this.buttonReserse=(0,a.createHtmlElement)("button",["nav__button","nav__reverse"]),this.element.append(this.filterWrap,this.buttonReserse),this.filterWrap.append(this.buttonAll,this.buttonActive,this.buttonDone),[this.buttonAll,this.buttonActive,this.buttonDone].forEach((t=>t.addEventListener("click",(()=>{this.dispatch({type:"CHANGE_FILTER",payload:t.dataset.name})})))),this.buttonReserse.addEventListener("click",(()=>{switch(this.isReversed){case!0:this.isReversed=!1,this.buttonReserse.classList.remove("nav__button_selected");break;case!1:this.isReversed=!0,this.buttonReserse.classList.add("nav__button_selected")}this.dispatch({type:"LOADING_STATE",payload:!0}),this.dispatch({type:"CHANGE_IS_REVERSED",payload:this.isReversed}),this.dispatch({type:"LOADING_STATE",payload:!1})}))}}},42:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(35);const a=s(593),n=s(395);e.default=class{constructor(t,e){this.status=t.status,this.dispatch=e,this.id=t.id,this.element=(0,a.createHtmlElement)("div",["task"]),this.createDOMElement(t)}getView(){return this.element}onStateUpdate(t){const e=t.loadingTasks.includes(this.id),s=t.tasks.find((t=>t.id===this.id)).status;this.status!==s&&this.updateTaskElement(t),e&&!this.spinner?this.addSpinner():!e&&this.spinner&&this.removeSpinner()}createDOMElement(t){this.taskData=t,this.element.innerHTML="",this.wrap=(0,a.createHtmlElement)("div",["task__wrap"]);const e=(0,a.createHtmlElement)("div",["task__container_inner"]),s=(0,a.createHtmlElement)("div",["task__container_inner"]),n=(0,a.createHtmlElement)("h2",["task__text"],t.note),i=(0,a.createHtmlElement)("div",["task__container_buttons"]);let r;switch(this.buttonDone=(0,a.createHtmlElement)("button",["task__button"],"Done"),this.buttonDelete=(0,a.createHtmlElement)("button",["task__button"],"Delete"),t.status){case"active":this.buttonDone=(0,a.createHtmlElement)("button",["task__button"],"Done","done"),this.buttonDelete=(0,a.createHtmlElement)("button",["task__button"],"Delete"),r=(0,a.createHtmlElement)("p",["task__status","task__status_active"],"Active");break;case"done":this.buttonDone=(0,a.createHtmlElement)("button",["task__button","task__button_done"],"Undo","active"),this.buttonDelete=(0,a.createHtmlElement)("button",["task__button","task__button_done"],"Delete"),r=(0,a.createHtmlElement)("p",["task__status","task__status_done"],"Done")}const d=(0,a.createHtmlElement)("p",["task__date"],(0,a.getPrettyDate)(t.date));this.element.appendChild(this.wrap),this.wrap.append(e,s),e.append(n,i),i.append(this.buttonDone,this.buttonDelete),s.append(r,d),this.bindedHandleDelete=this.handleDelete.bind(this),this.bindedHandleDone=this.handleDone.bind(this),this.buttonDone.addEventListener("click",this.bindedHandleDone),this.buttonDelete.addEventListener("click",this.bindedHandleDelete)}handleDelete(){this.dispatch({type:"LOADING_STATE",payload:!0}),n.api.remove(this.id).then((t=>new Promise((e=>{this.dispatch({type:"DELETE_NOTE",payload:t})}))))}handleDone(){this.taskData.status=this.buttonDone.dataset.name,this.dispatch({type:"NOTE_LOADING_STATE",payload:{id:this.id,state:!0}}),n.api.update(this.taskData).then((t=>{this.dispatch({type:"CHANGE_NOTE_STATUS",payload:{id:t.id,status:t.status}})}))}clearHandlers(){this.buttonDelete&&this.buttonDelete.removeEventListener("click",this.bindedHandleDelete),this.buttonDone&&this.buttonDone.removeEventListener("click",this.bindedHandleDone)}addSpinner(){this.spinner=(0,a.createHtmlElement)("div",["task__spinner"]);const t=(0,a.createHtmlElement)("h3",["task__spinner__text"],"Loading..."),e=(0,a.createHtmlElement)("div",["task__spinner_wrap"]);this.spinner.append(e),e.append(t),this.element.append(this.spinner)}removeSpinner(){this.spinner.remove(),this.spinner=null}updateTaskElement(t){this.clearHandlers(),this.status=t.tasks.find((t=>t.id===this.id)).status,this.createDOMElement(t.tasks.find((t=>t.id===this.id)))}}},593:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getPrettyDate=e.createHtmlElement=void 0,e.createHtmlElement=function(t,e,s,a){const n=document.createElement(t);return e.forEach((t=>n.classList.add(t))),s&&(n.textContent=s),a&&(n.dataset.name=a),n},e.getPrettyDate=function(t){"string"==typeof t&&(t=new Date(t));const e=["Sun","Mon","Tue","Wen","Thu","Fri","Sat"][t.getDay()],s=t.getDate(),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],n=t.getFullYear(),i=t.getHours();let r=t.getMinutes().toString();return r.length<2&&(r="0"+r),`${e}   ${s} ${a} ${n}   ${i}:${r}`}}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,s),i.exports}s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{s(387),s(948);const t=s(593),e=s(954),a=s(584),n=s(348),i=s(678),r=s(586),d=s(395),l=document.querySelector("body"),o=(0,t.createHtmlElement)("div",["app"]);l.append(o);const h=(0,t.createHtmlElement)("h1",["app__title"],"To-do List"),c=(0,t.createHtmlElement)("div",["app__container"]);o.append(h,c);const u=new r.default({filter:"all",tasks:[],loadingState:!1,loadingTasks:[],isReversed:!1}),p=(0,e.default)(u);[new i.default(p),new n.default(p),new a.default(p)].forEach((t=>{u.subscribe(t.onStateUpdate.bind(t)),c.append(t.getView())})),p({type:"LOADING_STATE",payload:!0}),d.api.getAll().then((t=>{p({type:"LOAD_INITIAL_TASKS",payload:t})}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVE5RixPQUFPK0YsRUFBVUMsR0FFekIsTUFBTUMsRUFBVSxJQUFJLFVBakJXLENBQzdCckosT0FBUSxNQUNSZ0IsTUFBTyxHQUNQRCxjQUFjLEVBQ2RHLGFBQWMsR0FDZEMsWUFBWSxJQWFSVyxHQUFXLGFBQW1CdUgsR0FLdEIsQ0FKRixJQUFJLFVBQUl2SCxHQUNQLElBQUksVUFBS0EsR0FDVCxJQUFJLFVBQUtBLElBR2hCSixTQUFTNEgsSUFDYkQsRUFBUXpILFVBQVUwSCxFQUFLaEcsY0FBY04sS0FBS3NHLElBQzFDRixFQUFVaEcsT0FBT2tHLEVBQUs3RixVQUFVLElBR2xDM0IsRUFBUyxDQUNQaEIsS0FBTSxnQkFDTkcsU0FBUyxJQUdYLEVBQUF4QyxJQUFJYSxTQUFTcUYsTUFBTTNELElBQ2pCYyxFQUFTLENBQUVoQixLQUFNLHFCQUFzQkcsUUFBU0QsR0FBUSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2x5YWxhc3MvLi9zcmMvYXBpL2luZGV4LnRzIiwid2VicGFjazovL29seWFsYXNzLy4vc3JjL2FwaS9sb2NhbEFwaS50cyIsIndlYnBhY2s6Ly9vbHlhbGFzcy8uL3NyYy9jb21wb25lbnRzL2Rpc3BhdGNoZXIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2x5YWxhc3MvLi9zcmMvY29tcG9uZW50cy9zdG9yYWdlL2luZGV4LnRzIiwid2VicGFjazovL29seWFsYXNzLy4vc3JjL2NvbXBvbmVudHMvdmlldy9mb3JtL2luZGV4LnRzIiwid2VicGFjazovL29seWFsYXNzLy4vc3JjL2NvbXBvbmVudHMvdmlldy9saXN0L2luZGV4LnRzIiwid2VicGFjazovL29seWFsYXNzLy4vc3JjL2NvbXBvbmVudHMvdmlldy9uYXYvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2x5YWxhc3MvLi9zcmMvY29tcG9uZW50cy92aWV3L3Rhc2svaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2x5YWxhc3MvLi9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vb2x5YWxhc3Mvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb2x5YWxhc3Mvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9vbHlhbGFzcy8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9jYWxBcGkgZnJvbSBcIi4vbG9jYWxBcGlcIjtcbmltcG9ydCBTZXJ2ZXJBcGkgZnJvbSBcIi4vc2VydmVyQXBpXCI7XG5cbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgTG9jYWxBcGkoKTtcbi8vIGNoYW5nZSBcIm5ldyBMb2NhbEFwaSgpXCIgdG8gXCJuZXcgU2VydmVyQXBpKClcIiB0byBzd2l0Y2ggZnJvbSBsb2NhbHN0b3JhZ2UgdG8gU2VydmVyIG1lbW9yaXppbmdcbi8vIHRvIHVzZSBzZXJ2ZXIgbWVtb3JpemluZyB5b3UgYWxzbyBuZWVkIHRvIGxvY2FsbHkgaW5zdGFsbCBKU09OIFNlcnZlciB3aXRoIFwibnBtIGluc3RhbGwganNvbi1zZXJ2ZXJcIiBhbmQgc3RhcnQgaXQgd2l0aCBcIm5weCBqc29uLXNlcnZlciAtLXdhdGNoIGRiLmpzb25cIlxuIiwiaW1wb3J0IHsgVGFza0RhdGFPYmogfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCBBcGlJbnRlcmZhY2UgZnJvbSBcIi4vYXBpSW50ZXJmYWNlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvY2FsQXBpIGltcGxlbWVudHMgQXBpSW50ZXJmYWNlIHtcbiAgdGFza3NBcnI6IFRhc2tEYXRhT2JqW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgY29uc3QganNvblRhc2tzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0YXNrc1wiKTtcbiAgICB0aGlzLnRhc2tzQXJyID0gSlNPTi5wYXJzZShqc29uVGFza3MpO1xuICAgIGlmICh0aGlzLnRhc2tzQXJyKSB7XG4gICAgICB0aGlzLnRhc2tzQXJyLm1hcCgob2JqOiBUYXNrRGF0YU9iaikgPT4gKHtcbiAgICAgICAgLi4ub2JqLFxuICAgICAgICBkYXRlOiBuZXcgRGF0ZShvYmouZGF0ZSksXG4gICAgICB9KSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0QWxsKCkge1xuICAgIHRoaXMudXBkYXRlU3RvcmVkRGF0YSgpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUYXNrRGF0YU9ialtdPigocmVzKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVzKHRoaXMudGFza3NBcnIpO1xuICAgICAgfSwgNTAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZChuZXdUYXNrOiBUYXNrRGF0YU9iaikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUYXNrRGF0YU9iaj4oKHJlcykgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnRhc2tzQXJyKSB7XG4gICAgICAgICAgdGhpcy50YXNrc0Fyci5wdXNoKG5ld1Rhc2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudGFza3NBcnIgPSBbbmV3VGFza107XG4gICAgICAgIH1cbiAgICAgICAgcmVzKG5ld1Rhc2spO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0b3JlZERhdGEoKTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlKGlkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8bnVtYmVyPigocmVzKSA9PiB7XG4gICAgICB0aGlzLnRhc2tzQXJyID0gdGhpcy50YXNrc0Fyci5maWx0ZXIoKHRhc2spID0+IHRhc2suaWQgIT09IGlkKTtcbiAgICAgIHRoaXMudXBkYXRlU3RvcmVkRGF0YSgpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHJlcyhpZCk7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZSh1cGRhdGVkVGFzazogVGFza0RhdGFPYmopIHtcbiAgICB0aGlzLmZpbmRUYXNrKHVwZGF0ZWRUYXNrLmlkKS5zdGF0dXMgPSB1cGRhdGVkVGFzay5zdGF0dXM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFRhc2tEYXRhT2JqPigocmVzKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVzKHVwZGF0ZWRUYXNrKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVN0b3JlZERhdGEoKTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdG9yZWREYXRhKCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGFza3NcIiwgSlNPTi5zdHJpbmdpZnkodGhpcy50YXNrc0FycikpO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kVGFzayhpZDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIHRoaXMudGFza3NBcnIuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PT0gaWQpO1xuICB9XG59XG4iLCJpbXBvcnQgU3RvcmFnZSBmcm9tIFwiLi4vc3RvcmFnZVwiO1xuaW1wb3J0IHsgQWN0aW9uLCBEaXNwYXRjaCwgU3RhdGVPYmogfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcblxuZnVuY3Rpb24gcmVkdWNlcihjdXJyZW50U3RhdGU6IFN0YXRlT2JqLCBhY3Rpb246IEFjdGlvbik6IFN0YXRlT2JqIHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgXCJMT0FEX0lOSVRJQUxfVEFTS1NcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgbG9hZGluZ1N0YXRlOiBmYWxzZSxcbiAgICAgICAgdGFza3M6IGFjdGlvbi5wYXlsb2FkLFxuICAgICAgfTtcbiAgICBjYXNlIFwiQUREX05PVEVcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgbG9hZGluZ1N0YXRlOiBmYWxzZSxcbiAgICAgICAgdGFza3M6IFsuLi5jdXJyZW50U3RhdGUudGFza3MsIGFjdGlvbi5wYXlsb2FkXSxcbiAgICAgIH07XG5cbiAgICBjYXNlIFwiREVMRVRFX05PVEVcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgbG9hZGluZ1N0YXRlOiBmYWxzZSxcbiAgICAgICAgdGFza3M6IGN1cnJlbnRTdGF0ZS50YXNrcy5maWx0ZXIoKHRhc2spID0+IHRhc2suaWQgIT09IGFjdGlvbi5wYXlsb2FkKSxcbiAgICAgIH07XG5cbiAgICBjYXNlIFwiQ0hBTkdFX05PVEVfU1RBVFVTXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgIGxvYWRpbmdUYXNrczogY3VycmVudFN0YXRlLmxvYWRpbmdUYXNrcy5maWx0ZXIoKGlkKT0+IGlkIT09YWN0aW9uLnBheWxvYWQuaWQpLFxuICAgICAgICB0YXNrczogY3VycmVudFN0YXRlLnRhc2tzLm1hcCgodGFzaykgPT5cbiAgICAgICAgICB0YXNrLmlkID09PSBhY3Rpb24ucGF5bG9hZC5pZFxuICAgICAgICAgICAgPyB7IC4uLnRhc2ssIHN0YXR1czogYWN0aW9uLnBheWxvYWQuc3RhdHVzIH1cbiAgICAgICAgICAgIDogdGFza1xuICAgICAgICApLFxuICAgICAgfTtcblxuICAgIGNhc2UgXCJDSEFOR0VfRklMVEVSXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgIGZpbHRlcjogYWN0aW9uLnBheWxvYWQsXG4gICAgICB9O1xuXG4gICAgY2FzZSBcIkNIQU5HRV9JU19SRVZFUlNFRFwiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY3VycmVudFN0YXRlLFxuICAgICAgICBpc1JldmVyc2VkOiBhY3Rpb24ucGF5bG9hZCxcbiAgICAgIH07XG5cbiAgICBjYXNlIFwiTE9BRElOR19TVEFURVwiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY3VycmVudFN0YXRlLFxuICAgICAgICBsb2FkaW5nU3RhdGU6IGFjdGlvbi5wYXlsb2FkLFxuICAgICAgfTtcblxuICAgIGNhc2UgXCJOT1RFX0xPQURJTkdfU1RBVEVcIjpcbiAgICAgIGxldCBsb2FkaW5nQXJyID0gY3VycmVudFN0YXRlLmxvYWRpbmdUYXNrcy5zbGljZSgwKTtcbiAgICAgIGlmIChhY3Rpb24ucGF5bG9hZC5zdGF0ZSkge1xuICAgICAgICBsb2FkaW5nQXJyLnB1c2goYWN0aW9uLnBheWxvYWQuaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9hZGluZ0FyciA9IGxvYWRpbmdBcnIuZmlsdGVyKCh0YXNrKSA9PiB0YXNrICE9PSBhY3Rpb24ucGF5bG9hZC5pZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4geyAuLi5jdXJyZW50U3RhdGUsIGxvYWRpbmdUYXNrczogbG9hZGluZ0FyciB9O1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBjdXJyZW50U3RhdGU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGlzcGF0Y2hlckZ1bmN0aW9uKHN0b3JhZ2VJbnN0YW5jZTogU3RvcmFnZSk6IERpc3BhdGNoIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGRpc3BhdGNoKGFjdGlvbjogQWN0aW9uKSB7XG4gICAgY29uc3QgY3VycmVudFN0YXRlID0gc3RvcmFnZUluc3RhbmNlLmdldFN0YXRlKCk7XG4gICAgc3RvcmFnZUluc3RhbmNlLnVwZGF0ZVN0YXRlKHJlZHVjZXIoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjdXJyZW50U3RhdGUpKSwgYWN0aW9uKSk7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBTdGF0ZU9iaiB9IGZyb20gXCJ0eXBlc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9yYWdlIHtcbiAgc3RhdGU6IFN0YXRlT2JqO1xuICBzdWJzY3JpYmVyczogRnVuY3Rpb25bXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHN0YXRlOiBTdGF0ZU9iaikge1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgfVxuXG4gIGZvcmNlZENvbnN0cnVjdG9yKHN0YXRlOiBTdGF0ZU9iaikge1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgfVxuXG4gIGdldFN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICB9XG5cbiAgdXBkYXRlU3RhdGUoc3RhdGU6IFN0YXRlT2JqKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuc3Vic2NyaWJlcnMuZm9yRWFjaCgoZm4pID0+IHtcbiAgICAgIGZuKHRoaXMuc3RhdGUpO1xuICAgIH0pO1xuICB9XG5cbiAgc3Vic2NyaWJlKGZuOiBGdW5jdGlvbikge1xuICAgIHRoaXMuc3Vic2NyaWJlcnMucHVzaChmbik7XG4gIH1cblxuICBmb3JjZVVwZGF0ZSgpIHtcbiAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2goKGZuKSA9PiB7XG4gICAgICBmbih0aGlzLnN0YXRlKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9zdHlsZXMuc2Nzc1wiO1xuaW1wb3J0IHsgRGlzcGF0Y2gsIFN0YXRlT2JqLCBUYXNrRGF0YU9iaiB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgY3JlYXRlSHRtbEVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHNcIjtcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi8uLi8uLi9hcGlcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybSB7XG4gIGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xuICB3cmFwOiBIVE1MRGl2RWxlbWVudDtcbiAgZGlzcGF0Y2g6IERpc3BhdGNoO1xuICBidXR0b25BZGQ6IEhUTUxCdXR0b25FbGVtZW50O1xuICBjb3VudGVyVmFsdWU6IG51bWJlcjtcbiAgdGFza1RleHQ6IHN0cmluZztcbiAgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIGNvdW50ZXI6IEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xuICBsZW5ndGhXYXJuaW5nOiBIVE1MUGFyYWdyYXBoRWxlbWVudDtcbiAgdGFza3NBcnJheTogVGFza0RhdGFPYmpbXTtcbiAgYmluZGVkSGFuZGxlSW5wdXRWYWxpZGF0aW9uOiAoKSA9PiB2b2lkIHwgdW5kZWZpbmVkO1xuICBiaW5kZWRIYW5kbGVDcmVhdGVOb3RlOiAoKSA9PiB2b2lkIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKGRpc3BhdGNoOiBEaXNwYXRjaCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxEaXZFbGVtZW50PihcImRpdlwiLCBbXCJmb3JtXCJdKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gZGlzcGF0Y2g7XG4gIH1cblxuICBjcmVhdGVET01FbGVtZW50KCkge1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHRoaXMud3JhcCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxEaXZFbGVtZW50PihcImRpdlwiLCBbXCJmb3JtX193cmFwXCJdKTtcbiAgICB0aGlzLmlucHV0ID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTElucHV0RWxlbWVudD4oXCJpbnB1dFwiLCBbXCJmb3JtX19pbnB1dFwiXSk7XG4gICAgdGhpcy5pbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dGFyZWFcIik7XG4gICAgdGhpcy5pbnB1dC5zZXRBdHRyaWJ1dGUoXCJyZXF1aXJlZFwiLCBcInRydWVcIik7XG4gICAgdGhpcy5idXR0b25BZGQgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MQnV0dG9uRWxlbWVudD4oXG4gICAgICBcImJ1dHRvblwiLFxuICAgICAgW1wiZm9ybV9fYnV0dG9uXCJdLFxuICAgICAgXCJBZGRcIlxuICAgICk7XG4gICAgdGhpcy5idXR0b25BZGQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICB0aGlzLmJ1dHRvbkFkZC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgdGhpcy5jb3VudGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgdGhpcy5jb3VudGVyLmNsYXNzTGlzdC5hZGQoXCJib2FyZF9fY291bnRlclwiKTtcbiAgICB0aGlzLmNvdW50ZXJWYWx1ZSA9IDA7XG4gICAgdGhpcy5jb3VudGVyLnRleHRDb250ZW50ID0gYCR7dGhpcy5jb3VudGVyVmFsdWV9LzU1YDtcbiAgICB0aGlzLmxlbmd0aFdhcm5pbmcgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MUGFyYWdyYXBoRWxlbWVudD4oXG4gICAgICBcInBcIixcbiAgICAgIFtcImZvcm1fX2NvdW50ZXJfZXJyb3JcIiwgXCJmb3JtX193YXJuaW5nXCJdLFxuICAgICAgXCJOb3RlIHNob3VsZCBjb250YWluIGZyb20gNSB0byA1NSBzeW1ib2xzXCJcbiAgICApO1xuXG4gICAgdGhpcy5iaW5kZWRIYW5kbGVJbnB1dFZhbGlkYXRpb24gPSB0aGlzLmhhbmRsZUlucHV0VmFsaWRhdGlvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYmluZGVkSGFuZGxlQ3JlYXRlTm90ZSA9IHRoaXMuaGFuZGxlQ3JlYXRlTm90ZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdGhpcy5iaW5kZWRIYW5kbGVJbnB1dFZhbGlkYXRpb24pO1xuICAgIHRoaXMuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmJpbmRlZEhhbmRsZUNyZWF0ZU5vdGUpO1xuXG4gICAgdGhpcy53cmFwLmFwcGVuZChcbiAgICAgIHRoaXMuaW5wdXQsXG4gICAgICB0aGlzLmNvdW50ZXIsXG4gICAgICB0aGlzLmxlbmd0aFdhcm5pbmcsXG4gICAgICB0aGlzLmJ1dHRvbkFkZFxuICAgICk7XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMud3JhcCk7XG4gIH1cblxuICBvblN0YXRlVXBkYXRlKHN0YXRlOiBTdGF0ZU9iaikge1xuICAgIHRoaXMuY2xlYXJIYW5kbGVycygpO1xuICAgIHRoaXMudGFza3NBcnJheSA9IHN0YXRlLnRhc2tzLnNsaWNlKDApO1xuICAgIHRoaXMuY3JlYXRlRE9NRWxlbWVudCgpO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBpbnB1dFZhbGlkYXRpb24oXG4gICAgaW5wdXRFbGVtOiBIVE1MSW5wdXRFbGVtZW50LFxuICAgIHdhcm5FbGVtMTogSFRNTFBhcmFncmFwaEVsZW1lbnQsXG4gICAgd2FybUVsZW0yOiBIVE1MUGFyYWdyYXBoRWxlbWVudFxuICApOiB2b2lkIHtcbiAgICBpZiAoaW5wdXRFbGVtLnZhbHVlID09PSBcIlwiKSB7XG4gICAgICB0aGlzLmNvdW50ZXJWYWx1ZSA9IDA7XG4gICAgICB0aGlzLnRhc2tUZXh0ID0gXCJcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb3VudGVyVmFsdWUgPSBpbnB1dEVsZW0udmFsdWUubGVuZ3RoO1xuICAgICAgaWYgKHRoaXMuY291bnRlclZhbHVlID49IDU1KSBpbnB1dEVsZW0udmFsdWUgPSB0aGlzLnRhc2tUZXh0O1xuICAgICAgdGhpcy50YXNrVGV4dCA9XG4gICAgICAgIGlucHV0RWxlbS52YWx1ZVswXS50b1VwcGVyQ2FzZSgpICsgaW5wdXRFbGVtLnZhbHVlLnNsaWNlKDEpO1xuICAgICAgaW5wdXRFbGVtLnZhbHVlID0gdGhpcy50YXNrVGV4dDtcbiAgICAgIGlmICh0aGlzLmNvdW50ZXJWYWx1ZSA8IDUpIHtcbiAgICAgICAgd2FybkVsZW0xLmNsYXNzTGlzdC5hZGQoXCJmb3JtX19jb3VudGVyX2Vycm9yXCIpO1xuICAgICAgICB3YXJtRWxlbTIuY2xhc3NMaXN0LmFkZChcImZvcm1fX3dhcm5pbmdfdmlzaWJsZVwiKTtcbiAgICAgICAgdGhpcy5idXR0b25BZGQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybkVsZW0xLmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19jb3VudGVyX2Vycm9yXCIpO1xuICAgICAgICB3YXJtRWxlbTIuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX3dhcm5pbmdfdmlzaWJsZVwiKTtcbiAgICAgICAgdGhpcy5idXR0b25BZGQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgICB9XG4gICAgfVxuICAgIHdhcm5FbGVtMS50ZXh0Q29udGVudCA9IGAke3RoaXMuY291bnRlclZhbHVlfS81NWA7XG4gIH1cblxuICBoYW5kbGVJbnB1dFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5pbnB1dFZhbGlkYXRpb24odGhpcy5pbnB1dCwgdGhpcy5jb3VudGVyLCB0aGlzLmxlbmd0aFdhcm5pbmcpO1xuICB9XG5cbiAgaGFuZGxlQ3JlYXRlTm90ZSgpIHtcbiAgICB0aGlzLmNyZWF0ZU5ld05vdGUodGhpcy50YXNrc0FycmF5KTtcbiAgfVxuXG4gIGNsZWFySGFuZGxlcnMoKSB7XG4gICAgaWYgKHRoaXMuaW5wdXQpXG4gICAgICB0aGlzLmlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLmJpbmRlZEhhbmRsZUlucHV0VmFsaWRhdGlvbik7XG4gICAgaWYgKHRoaXMuYnV0dG9uQWRkKVxuICAgICAgdGhpcy5idXR0b25BZGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYmluZGVkSGFuZGxlQ3JlYXRlTm90ZSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU5ld05vdGUodGFza3NBcnJheTogVGFza0RhdGFPYmpbXSkge1xuICAgIHRhc2tzQXJyYXkuc29ydChcbiAgICAgIChhLCBiKSA9PiBuZXcgRGF0ZShhLmRhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGIuZGF0ZSkuZ2V0VGltZSgpXG4gICAgKTtcbiAgICBjb25zdCB0YXNrT2JqOiBUYXNrRGF0YU9iaiA9IHtcbiAgICAgIGlkOiB0YXNrc0FycmF5Lmxlbmd0aCA/IHRhc2tzQXJyYXlbdGFza3NBcnJheS5sZW5ndGggLSAxXS5pZCArIDEgOiAxLFxuICAgICAgbm90ZTogdGhpcy50YXNrVGV4dCxcbiAgICAgIHN0YXR1czogXCJhY3RpdmVcIixcbiAgICAgIGRhdGU6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwiTE9BRElOR19TVEFURVwiLFxuICAgICAgcGF5bG9hZDogdHJ1ZSxcbiAgICB9KTtcbiAgICBhcGkuYWRkKHRhc2tPYmopLnRoZW4oKHRhc2tPYmopID0+IHtcbiAgICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcIkFERF9OT1RFXCIsXG4gICAgICAgIHBheWxvYWQ6IHRhc2tPYmosXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9zdHlsZXMuc2Nzc1wiO1xuaW1wb3J0IHsgRGlzcGF0Y2gsIFN0YXRlT2JqLCBUYXNrRGF0YU9iaiwgRmlsdGVyIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBjcmVhdGVIdG1sRWxlbWVudCB9IGZyb20gXCIuLi8uLi8uLi91dGlsc1wiO1xuaW1wb3J0IFRhc2sgZnJvbSBcIi4uL3Rhc2tcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlzdCB7XG4gIGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xuICBwcml2YXRlIHdyYXA6IEhUTUxEaXZFbGVtZW50O1xuICBkaXNwYXRjaDogRGlzcGF0Y2g7XG4gIHByaXZhdGUgY3VycmVudExlbmd0aDogbnVtYmVyO1xuICBwcml2YXRlIGlzUmV2ZXJzZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgZmlsdGVyOiBGaWx0ZXI7XG4gIHRhc2tJbnN0YW5jZXM6IFRhc2tbXTtcbiAgc3Bpbm5lcjogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihkaXNwYXRjaDogRGlzcGF0Y2gpIHtcbiAgICB0aGlzLmRpc3BhdGNoID0gZGlzcGF0Y2g7XG4gICAgdGhpcy5lbGVtZW50ID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcImxpc3RcIl0pO1xuICB9XG5cbiAgb25TdGF0ZVVwZGF0ZShzdGF0ZTogU3RhdGVPYmopIHtcbiAgICBjb25zdCBsb2FkaW5nU3RhdGUgPSBzdGF0ZS5sb2FkaW5nU3RhdGU7XG4gICAgaWYgKFxuICAgICAgdGhpcy5jdXJyZW50TGVuZ3RoICE9PSBzdGF0ZS50YXNrcy5sZW5ndGggfHxcbiAgICAgIHRoaXMuZmlsdGVyICE9PSBzdGF0ZS5maWx0ZXIgfHxcbiAgICAgIHRoaXMuaXNSZXZlcnNlZCAhPT0gc3RhdGUuaXNSZXZlcnNlZFxuICAgICkge1xuICAgICAgdGhpcy51cGRhdGVMaXN0KHN0YXRlKTtcbiAgICAgIHRoaXMuc3Bpbm5lciA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGFza0luc3RhbmNlcy5mb3JFYWNoKCh0YXNrKSA9PiB0YXNrLm9uU3RhdGVVcGRhdGUoc3RhdGUpKTtcbiAgICB9XG4gICAgaWYgKGxvYWRpbmdTdGF0ZSAmJiAhdGhpcy5zcGlubmVyKSB7XG4gICAgICB0aGlzLmFkZFNwaW5uZXIoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3Bpbm5lciAmJiAhc3RhdGUubG9hZGluZ1N0YXRlKSB7XG4gICAgICB0aGlzLnJlbW92ZVNwaW5uZXIoKTtcbiAgICB9XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gIH1cblxuICB1cGRhdGVMaXN0KHN0YXRlOiBTdGF0ZU9iaikge1xuICAgIHRoaXMuZmlsdGVyID0gc3RhdGUuZmlsdGVyO1xuICAgIHRoaXMuaXNSZXZlcnNlZCA9IHN0YXRlLmlzUmV2ZXJzZWQ7XG4gICAgaWYgKHRoaXMudGFza0luc3RhbmNlcylcbiAgICAgIHRoaXMudGFza0luc3RhbmNlcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgIHRhc2suY2xlYXJIYW5kbGVycygpO1xuICAgICAgfSk7XG4gICAgdGhpcy5jcmVhdGVUYXNrc0xpc3Qoc3RhdGUudGFza3MpO1xuICB9XG5cbiAgYWRkU3Bpbm5lcigpIHtcbiAgICB0aGlzLnNwaW5uZXIgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1widGFza19fc3Bpbm5lclwiXSk7XG4gICAgY29uc3QgdGV4dCA9IGNyZWF0ZUh0bWxFbGVtZW50KFwiaDNcIiwgW1widGFza19fc3Bpbm5lcl9fdGV4dFwiXSwgXCJMb2FkaW5nLi4uXCIpO1xuICAgIGNvbnN0IHR5cGVkID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcbiAgICAgIFwidGFza19fc3Bpbm5lcl93cmFwXCIsXG4gICAgXSk7XG4gICAgdGhpcy5zcGlubmVyLmFwcGVuZCh0eXBlZCk7XG4gICAgdHlwZWQuYXBwZW5kKHRleHQpO1xuICAgIHRoaXMud3JhcC5hcHBlbmQodGhpcy5zcGlubmVyKTtcbiAgfVxuXG4gIHJlbW92ZVNwaW5uZXIoKSB7XG4gICAgdGhpcy5zcGlubmVyLnJlbW92ZSgpO1xuICAgIHRoaXMuc3Bpbm5lciA9IG51bGw7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVRhc2tzTGlzdCh0YXNrczogVGFza0RhdGFPYmpbXSkge1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHRoaXMuY3VycmVudExlbmd0aCA9IDA7XG4gICAgdGhpcy53cmFwID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcImxpc3RfX3dyYXBcIl0pO1xuICAgIGlmICh0YXNrcykge1xuICAgICAgbGV0IHRhc2tFbGVtZW50cyA9IFtdO1xuICAgICAgaWYgKHRoaXMuZmlsdGVyID09PSBcImFjdGl2ZVwiKSB7XG4gICAgICAgIHRhc2tFbGVtZW50cyA9IHRoaXMuY3JlYXRlVGFza0VsZW1lbnRzKHRhc2tzLCBcImFjdGl2ZVwiKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5maWx0ZXIgPT09IFwiZG9uZVwiKSB7XG4gICAgICAgIHRhc2tFbGVtZW50cyA9IHRoaXMuY3JlYXRlVGFza0VsZW1lbnRzKHRhc2tzLCBcImRvbmVcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXNrRWxlbWVudHMgPSB0aGlzLmNyZWF0ZVRhc2tFbGVtZW50cyh0YXNrcywgXCJhbGxcIik7XG4gICAgICB9XG4gICAgICB0YXNrRWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHRoaXMud3JhcC5hcHBlbmQoZWwpKTtcbiAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLndyYXApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVGFza0VsZW1lbnRzKHRhc2tzOiBUYXNrRGF0YU9ialtdLCBmaWx0ZXI6IEZpbHRlcikge1xuICAgIGNvbnN0IHRhc2tFbGVtZW50c0FycmF5OiBIVE1MRWxlbWVudFtdID0gW107XG4gICAgdGhpcy5zb3J0RWxlbWVudHNCeURhdGUodGFza3MpO1xuICAgIHRoaXMudGFza0luc3RhbmNlcyA9IFtdO1xuICAgIHRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgIGlmIChmaWx0ZXIgPT09IFwiYWxsXCIgfHwgdGFzay5zdGF0dXMgPT09IGZpbHRlcikge1xuICAgICAgICBjb25zdCBuZXdUYXNrID0gbmV3IFRhc2sodGFzaywgdGhpcy5kaXNwYXRjaCk7XG4gICAgICAgIHRhc2tFbGVtZW50c0FycmF5LnB1c2gobmV3VGFzay5nZXRWaWV3KCkpO1xuICAgICAgICB0aGlzLmN1cnJlbnRMZW5ndGgrKztcbiAgICAgICAgdGhpcy50YXNrSW5zdGFuY2VzLnB1c2gobmV3VGFzayk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRhc2tFbGVtZW50c0FycmF5O1xuICB9XG5cbiAgc29ydEVsZW1lbnRzQnlEYXRlKHRhc2tzQXJyOiBUYXNrRGF0YU9ialtdKSB7XG4gICAgaWYgKHRoaXMuaXNSZXZlcnNlZCkge1xuICAgICAgdGFza3NBcnIuc29ydChcbiAgICAgICAgKGEsIGIpID0+IG5ldyBEYXRlKGEuZGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYi5kYXRlKS5nZXRUaW1lKClcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhc2tzQXJyLnNvcnQoXG4gICAgICAgIChhLCBiKSA9PiBuZXcgRGF0ZShiLmRhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuZGF0ZSkuZ2V0VGltZSgpXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9zdHlsZXMuc2Nzc1wiO1xuaW1wb3J0IHsgU3RhdGVPYmosIERpc3BhdGNoLCBGaWx0ZXIgfSBmcm9tIFwidHlwZXNcIjtcbmltcG9ydCB7IGNyZWF0ZUh0bWxFbGVtZW50IH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdiB7XG4gIGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xuICBwcml2YXRlIGZpbHRlcldyYXA6IEhUTUxEaXZFbGVtZW50O1xuICBwcml2YXRlIGJ1dHRvbkFsbDogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgYnV0dG9uQWN0aXZlOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBidXR0b25Eb25lOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBidXR0b25SZXNlcnNlOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgZGlzcGF0Y2g6IERpc3BhdGNoO1xuICBwcml2YXRlIGlzUmV2ZXJzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihkaXNwYXRjaDogRGlzcGF0Y2gpIHtcbiAgICB0aGlzLmRpc3BhdGNoID0gZGlzcGF0Y2g7XG4gICAgdGhpcy5lbGVtZW50ID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcIm5hdlwiXSk7XG4gICAgdGhpcy5jcmVhdGVET01FbGVtZW50KCk7XG4gICAgdGhpcy5idXR0b25BbGwuY2xhc3NMaXN0LmFkZChcIm5hdl9fYnV0dG9uX3NlbGVjdGVkXCIpO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICB9XG5cbiAgb25TdGF0ZVVwZGF0ZShzdGF0ZTogU3RhdGVPYmopIHtcbiAgICBbdGhpcy5idXR0b25BbGwsIHRoaXMuYnV0dG9uQWN0aXZlLCB0aGlzLmJ1dHRvbkRvbmVdLmZvckVhY2goKGJ1dHRvbikgPT5cbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibmF2X19idXR0b25fc2VsZWN0ZWRcIilcbiAgICApO1xuICAgIHN3aXRjaCAoc3RhdGUuZmlsdGVyKSB7XG4gICAgICBjYXNlIFwiYWN0aXZlXCI6XG4gICAgICAgIHRoaXMuYnV0dG9uQWN0aXZlLmNsYXNzTGlzdC5hZGQoXCJuYXZfX2J1dHRvbl9zZWxlY3RlZFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZG9uZVwiOlxuICAgICAgICB0aGlzLmJ1dHRvbkRvbmUuY2xhc3NMaXN0LmFkZChcIm5hdl9fYnV0dG9uX3NlbGVjdGVkXCIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRoaXMuYnV0dG9uQWxsLmNsYXNzTGlzdC5hZGQoXCJuYXZfX2J1dHRvbl9zZWxlY3RlZFwiKTtcbiAgICB9XG4gICAgc3dpdGNoIChzdGF0ZS5pc1JldmVyc2VkKSB7XG4gICAgICBjYXNlIHRydWU6XG4gICAgICAgIHRoaXMuYnV0dG9uUmVzZXJzZS5jbGFzc0xpc3QuYWRkKFwibmF2X19idXR0b25fc2VsZWN0ZWRcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBmYWxzZTpcbiAgICAgICAgdGhpcy5idXR0b25SZXNlcnNlLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXZfX2J1dHRvbl9zZWxlY3RlZFwiKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZURPTUVsZW1lbnQoKSB7XG4gICAgdGhpcy5lbGVtZW50LmNoaWxkTm9kZXMuZm9yRWFjaCgoZWwpID0+IGVsLnJlbW92ZSk7XG4gICAgdGhpcy5maWx0ZXJXcmFwID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcbiAgICAgIFwibmF2X19jb250YWluZXJcIixcbiAgICBdKTtcbiAgICB0aGlzLmJ1dHRvbkFsbCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxCdXR0b25FbGVtZW50LCBGaWx0ZXI+KFxuICAgICAgXCJidXR0b25cIixcbiAgICAgIFtcIm5hdl9fYnV0dG9uXCJdLFxuICAgICAgXCJBbGxcIixcbiAgICAgIFwiYWxsXCJcbiAgICApO1xuICAgIHRoaXMuYnV0dG9uQWN0aXZlID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTEJ1dHRvbkVsZW1lbnQsIEZpbHRlcj4oXG4gICAgICBcImJ1dHRvblwiLFxuICAgICAgW1wibmF2X19idXR0b25cIl0sXG4gICAgICBcIkFjdGl2ZVwiLFxuICAgICAgXCJhY3RpdmVcIlxuICAgICk7XG4gICAgdGhpcy5idXR0b25Eb25lID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTEJ1dHRvbkVsZW1lbnQsIEZpbHRlcj4oXG4gICAgICBcImJ1dHRvblwiLFxuICAgICAgW1wibmF2X19idXR0b25cIl0sXG4gICAgICBcIkRvbmVcIixcbiAgICAgIFwiZG9uZVwiXG4gICAgKTtcbiAgICB0aGlzLmJ1dHRvblJlc2Vyc2UgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MQnV0dG9uRWxlbWVudD4oXCJidXR0b25cIiwgW1xuICAgICAgXCJuYXZfX2J1dHRvblwiLFxuICAgICAgXCJuYXZfX3JldmVyc2VcIixcbiAgICBdKTtcbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kKHRoaXMuZmlsdGVyV3JhcCwgdGhpcy5idXR0b25SZXNlcnNlKTtcbiAgICB0aGlzLmZpbHRlcldyYXAuYXBwZW5kKHRoaXMuYnV0dG9uQWxsLCB0aGlzLmJ1dHRvbkFjdGl2ZSwgdGhpcy5idXR0b25Eb25lKTtcblxuICAgIFt0aGlzLmJ1dHRvbkFsbCwgdGhpcy5idXR0b25BY3RpdmUsIHRoaXMuYnV0dG9uRG9uZV0uZm9yRWFjaCgoYnV0dG9uKSA9PlxuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwiQ0hBTkdFX0ZJTFRFUlwiLFxuICAgICAgICAgIHBheWxvYWQ6IGJ1dHRvbi5kYXRhc2V0Lm5hbWUgYXMgRmlsdGVyLFxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzLmJ1dHRvblJlc2Vyc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHN3aXRjaCAodGhpcy5pc1JldmVyc2VkKSB7XG4gICAgICAgIGNhc2UgdHJ1ZTpcbiAgICAgICAgICB0aGlzLmlzUmV2ZXJzZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmJ1dHRvblJlc2Vyc2UuY2xhc3NMaXN0LnJlbW92ZShcIm5hdl9fYnV0dG9uX3NlbGVjdGVkXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIGZhbHNlOlxuICAgICAgICAgIHRoaXMuaXNSZXZlcnNlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5idXR0b25SZXNlcnNlLmNsYXNzTGlzdC5hZGQoXCJuYXZfX2J1dHRvbl9zZWxlY3RlZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcIkxPQURJTkdfU1RBVEVcIixcbiAgICAgICAgcGF5bG9hZDogdHJ1ZVxuICAgICAgfSlcbiAgICAgIHRoaXMuZGlzcGF0Y2goeyB0eXBlOiBcIkNIQU5HRV9JU19SRVZFUlNFRFwiLCBwYXlsb2FkOiB0aGlzLmlzUmV2ZXJzZWQgfSk7XG4gICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJMT0FESU5HX1NUQVRFXCIsXG4gICAgICAgIHBheWxvYWQ6IGZhbHNlXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL3N0eWxlcy5zY3NzXCI7XG5pbXBvcnQgeyBEaXNwYXRjaCwgVGFza0RhdGFPYmosIFN0YXR1cywgU3RhdGVPYmogfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGNyZWF0ZUh0bWxFbGVtZW50LCBnZXRQcmV0dHlEYXRlIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzXCI7XG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vLi4vLi4vYXBpXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2sge1xuICBlbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcbiAgcHJpdmF0ZSB3cmFwOiBIVE1MRGl2RWxlbWVudDtcbiAgZGlzcGF0Y2g6IERpc3BhdGNoO1xuICBwcml2YXRlIHN0YXR1czogU3RhdHVzO1xuICBwcml2YXRlIGlkOiBudW1iZXI7XG4gIHByaXZhdGUgYnV0dG9uRG9uZTogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgYnV0dG9uRGVsZXRlOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgYmluZGVkSGFuZGxlRG9uZTogKCkgPT4gdm9pZDtcbiAgYmluZGVkSGFuZGxlRGVsZXRlOiAoKSA9PiB2b2lkO1xuICB0YXNrRGF0YTogVGFza0RhdGFPYmo7XG4gIHNwaW5uZXI6IEhUTUxEaXZFbGVtZW50IHwgbnVsbDtcblxuICBjb25zdHJ1Y3Rvcih0YXNrRGF0YTogVGFza0RhdGFPYmosIGRpc3BhdGNoOiBEaXNwYXRjaCkge1xuICAgIHRoaXMuc3RhdHVzID0gdGFza0RhdGEuc3RhdHVzO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBkaXNwYXRjaDtcbiAgICB0aGlzLmlkID0gdGFza0RhdGEuaWQ7XG4gICAgdGhpcy5lbGVtZW50ID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcInRhc2tcIl0pO1xuICAgIHRoaXMuY3JlYXRlRE9NRWxlbWVudCh0YXNrRGF0YSk7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gIH1cblxuICBvblN0YXRlVXBkYXRlKHN0YXRlOiBTdGF0ZU9iaikge1xuICAgIGNvbnN0IGlzTG9hZGluZyA9IHN0YXRlLmxvYWRpbmdUYXNrcy5pbmNsdWRlcyh0aGlzLmlkKTtcbiAgICBjb25zdCBuZXdTdGF0dXMgPSBzdGF0ZS50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09PSB0aGlzLmlkKS5zdGF0dXM7XG5cbiAgICBpZiAodGhpcy5zdGF0dXMgIT09IG5ld1N0YXR1cykge1xuICAgICAgdGhpcy51cGRhdGVUYXNrRWxlbWVudChzdGF0ZSk7XG4gICAgfVxuICAgIGlmIChpc0xvYWRpbmcgJiYgIXRoaXMuc3Bpbm5lcikge1xuICAgICAgdGhpcy5hZGRTcGlubmVyKCk7XG4gICAgfSBlbHNlIGlmICghaXNMb2FkaW5nICYmIHRoaXMuc3Bpbm5lcikge1xuICAgICAgdGhpcy5yZW1vdmVTcGlubmVyKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVET01FbGVtZW50KHRhc2tEYXRhOiBUYXNrRGF0YU9iaikge1xuICAgIHRoaXMudGFza0RhdGEgPSB0YXNrRGF0YTtcbiAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcbiAgICB0aGlzLndyYXAgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1widGFza19fd3JhcFwiXSk7XG4gICAgY29uc3QgbGVmdENvbnRhaW5lciA9IGNyZWF0ZUh0bWxFbGVtZW50KFwiZGl2XCIsIFtcInRhc2tfX2NvbnRhaW5lcl9pbm5lclwiXSk7XG4gICAgY29uc3QgcmlnaHRDb250YWluZXIgPSBjcmVhdGVIdG1sRWxlbWVudChcImRpdlwiLCBbXCJ0YXNrX19jb250YWluZXJfaW5uZXJcIl0pO1xuICAgIGNvbnN0IHRhc2tUZXh0ID0gY3JlYXRlSHRtbEVsZW1lbnQoXCJoMlwiLCBbXCJ0YXNrX190ZXh0XCJdLCB0YXNrRGF0YS5ub3RlKTtcbiAgICBjb25zdCBidXR0b25zQ29udGFpbmVyID0gY3JlYXRlSHRtbEVsZW1lbnQoXCJkaXZcIiwgW1xuICAgICAgXCJ0YXNrX19jb250YWluZXJfYnV0dG9uc1wiLFxuICAgIF0pO1xuICAgIHRoaXMuYnV0dG9uRG9uZSA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxCdXR0b25FbGVtZW50PihcbiAgICAgIFwiYnV0dG9uXCIsXG4gICAgICBbXCJ0YXNrX19idXR0b25cIl0sXG4gICAgICBcIkRvbmVcIlxuICAgICk7XG4gICAgdGhpcy5idXR0b25EZWxldGUgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MQnV0dG9uRWxlbWVudD4oXG4gICAgICBcImJ1dHRvblwiLFxuICAgICAgW1widGFza19fYnV0dG9uXCJdLFxuICAgICAgXCJEZWxldGVcIlxuICAgICk7XG4gICAgbGV0IHN0YXR1c0VsZW07XG4gICAgc3dpdGNoICh0YXNrRGF0YS5zdGF0dXMpIHtcbiAgICAgIGNhc2UgXCJhY3RpdmVcIjpcbiAgICAgICAgdGhpcy5idXR0b25Eb25lID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTEJ1dHRvbkVsZW1lbnQsIFN0YXR1cz4oXG4gICAgICAgICAgXCJidXR0b25cIixcbiAgICAgICAgICBbXCJ0YXNrX19idXR0b25cIl0sXG4gICAgICAgICAgXCJEb25lXCIsXG4gICAgICAgICAgXCJkb25lXCJcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5idXR0b25EZWxldGUgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MQnV0dG9uRWxlbWVudD4oXG4gICAgICAgICAgXCJidXR0b25cIixcbiAgICAgICAgICBbXCJ0YXNrX19idXR0b25cIl0sXG4gICAgICAgICAgXCJEZWxldGVcIlxuICAgICAgICApO1xuICAgICAgICBzdGF0dXNFbGVtID0gY3JlYXRlSHRtbEVsZW1lbnQoXG4gICAgICAgICAgXCJwXCIsXG4gICAgICAgICAgW1widGFza19fc3RhdHVzXCIsIFwidGFza19fc3RhdHVzX2FjdGl2ZVwiXSxcbiAgICAgICAgICBcIkFjdGl2ZVwiXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImRvbmVcIjpcbiAgICAgICAgdGhpcy5idXR0b25Eb25lID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTEJ1dHRvbkVsZW1lbnQsIFN0YXR1cz4oXG4gICAgICAgICAgXCJidXR0b25cIixcbiAgICAgICAgICBbXCJ0YXNrX19idXR0b25cIiwgXCJ0YXNrX19idXR0b25fZG9uZVwiXSxcbiAgICAgICAgICBcIlVuZG9cIixcbiAgICAgICAgICBcImFjdGl2ZVwiXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuYnV0dG9uRGVsZXRlID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KFxuICAgICAgICAgIFwiYnV0dG9uXCIsXG4gICAgICAgICAgW1widGFza19fYnV0dG9uXCIsIFwidGFza19fYnV0dG9uX2RvbmVcIl0sXG4gICAgICAgICAgXCJEZWxldGVcIlxuICAgICAgICApO1xuICAgICAgICBzdGF0dXNFbGVtID0gY3JlYXRlSHRtbEVsZW1lbnQoXG4gICAgICAgICAgXCJwXCIsXG4gICAgICAgICAgW1widGFza19fc3RhdHVzXCIsIFwidGFza19fc3RhdHVzX2RvbmVcIl0sXG4gICAgICAgICAgXCJEb25lXCJcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNvbnN0IGRhdGVFbGVtID0gY3JlYXRlSHRtbEVsZW1lbnQoXG4gICAgICBcInBcIixcbiAgICAgIFtcInRhc2tfX2RhdGVcIl0sXG4gICAgICBnZXRQcmV0dHlEYXRlKHRhc2tEYXRhLmRhdGUpXG4gICAgKTtcblxuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLndyYXApO1xuICAgIHRoaXMud3JhcC5hcHBlbmQobGVmdENvbnRhaW5lciwgcmlnaHRDb250YWluZXIpO1xuICAgIGxlZnRDb250YWluZXIuYXBwZW5kKHRhc2tUZXh0LCBidXR0b25zQ29udGFpbmVyKTtcbiAgICBidXR0b25zQ29udGFpbmVyLmFwcGVuZCh0aGlzLmJ1dHRvbkRvbmUsIHRoaXMuYnV0dG9uRGVsZXRlKTtcbiAgICByaWdodENvbnRhaW5lci5hcHBlbmQoc3RhdHVzRWxlbSwgZGF0ZUVsZW0pO1xuXG4gICAgdGhpcy5iaW5kZWRIYW5kbGVEZWxldGUgPSB0aGlzLmhhbmRsZURlbGV0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYmluZGVkSGFuZGxlRG9uZSA9IHRoaXMuaGFuZGxlRG9uZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5idXR0b25Eb25lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmJpbmRlZEhhbmRsZURvbmUpO1xuICAgIHRoaXMuYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmJpbmRlZEhhbmRsZURlbGV0ZSk7XG4gIH1cblxuICBoYW5kbGVEZWxldGUoKSB7XG4gICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICB0eXBlOiBcIkxPQURJTkdfU1RBVEVcIixcbiAgICAgIHBheWxvYWQ6IHRydWUsXG4gICAgfSk7XG4gICAgYXBpXG4gICAgICAucmVtb3ZlKHRoaXMuaWQpXG4gICAgICAudGhlbigoaWQpID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMpPT57XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgICB0eXBlOiBcIkRFTEVURV9OT1RFXCIsXG4gICAgICAgICAgICBwYXlsb2FkOiBpZCxcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgfVxuXG4gIGhhbmRsZURvbmUoKSB7XG4gICAgdGhpcy50YXNrRGF0YS5zdGF0dXMgPSB0aGlzLmJ1dHRvbkRvbmUuZGF0YXNldC5uYW1lIGFzIFN0YXR1cztcbiAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwiTk9URV9MT0FESU5HX1NUQVRFXCIsXG4gICAgICBwYXlsb2FkOiB7IGlkOiB0aGlzLmlkLCBzdGF0ZTogdHJ1ZSB9LFxuICAgIH0pO1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZSh0aGlzLnRhc2tEYXRhKVxuICAgICAgLnRoZW4oKHRhc2tEYXRhKSA9PiB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwiQ0hBTkdFX05PVEVfU1RBVFVTXCIsXG4gICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgaWQ6IHRhc2tEYXRhLmlkLFxuICAgICAgICAgICAgc3RhdHVzOiB0YXNrRGF0YS5zdGF0dXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICB9XG5cbiAgY2xlYXJIYW5kbGVycygpIHtcbiAgICBpZiAodGhpcy5idXR0b25EZWxldGUpXG4gICAgICB0aGlzLmJ1dHRvbkRlbGV0ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5iaW5kZWRIYW5kbGVEZWxldGUpO1xuICAgIGlmICh0aGlzLmJ1dHRvbkRvbmUpXG4gICAgICB0aGlzLmJ1dHRvbkRvbmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYmluZGVkSGFuZGxlRG9uZSk7XG4gIH1cblxuICBhZGRTcGlubmVyKCkge1xuICAgIHRoaXMuc3Bpbm5lciA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxEaXZFbGVtZW50PihcImRpdlwiLCBbXCJ0YXNrX19zcGlubmVyXCJdKTtcbiAgICBjb25zdCB0ZXh0ID0gY3JlYXRlSHRtbEVsZW1lbnQoXCJoM1wiLCBbXCJ0YXNrX19zcGlubmVyX190ZXh0XCJdLCBcIkxvYWRpbmcuLi5cIik7XG4gICAgY29uc3QgdHlwZWQgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1xuICAgICAgXCJ0YXNrX19zcGlubmVyX3dyYXBcIixcbiAgICBdKTtcbiAgICB0aGlzLnNwaW5uZXIuYXBwZW5kKHR5cGVkKTtcbiAgICB0eXBlZC5hcHBlbmQodGV4dCk7XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZCh0aGlzLnNwaW5uZXIpO1xuICB9XG5cbiAgcmVtb3ZlU3Bpbm5lcigpIHtcbiAgICB0aGlzLnNwaW5uZXIucmVtb3ZlKCk7XG4gICAgdGhpcy5zcGlubmVyID0gbnVsbDtcbiAgfVxuXG4gIHVwZGF0ZVRhc2tFbGVtZW50KHN0YXRlOiBTdGF0ZU9iaikge1xuICAgIHRoaXMuY2xlYXJIYW5kbGVycygpO1xuICAgIHRoaXMuc3RhdHVzID0gc3RhdGUudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PT0gdGhpcy5pZCkuc3RhdHVzO1xuICAgIHRoaXMuY3JlYXRlRE9NRWxlbWVudChzdGF0ZS50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09PSB0aGlzLmlkKSk7XG4gIH1cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIdG1sRWxlbWVudDxUID0gSFRNTEVsZW1lbnQsIEQgZXh0ZW5kcyBzdHJpbmcgPSBzdHJpbmc+KFxuICB0eXBlOiBzdHJpbmcsXG4gIGNzc0NsYXNzQXJyYXk6IHN0cmluZ1tdLFxuICB0ZXh0Pzogc3RyaW5nLFxuICBkYXRhPzogRFxuKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuICBjc3NDbGFzc0FycmF5LmZvckVhY2goKHN0eWxlKSA9PiBlbGVtZW50LmNsYXNzTGlzdC5hZGQoc3R5bGUpKTtcbiAgaWYgKHRleHQpIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0O1xuICBpZiAoZGF0YSkgZWxlbWVudC5kYXRhc2V0Lm5hbWUgPSBkYXRhO1xuICByZXR1cm4gZWxlbWVudCBhcyBUO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJldHR5RGF0ZShkYXRlOiBEYXRlKSB7XG4gIGNvbnN0IGRheXNBcnIgPSBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZW5cIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl07XG4gIGNvbnN0IG1vbnRoc0FyciA9IFtcbiAgICBcIkphblwiLFxuICAgIFwiRmViXCIsXG4gICAgXCJNYXJcIixcbiAgICBcIkFwclwiLFxuICAgIFwiTWF5XCIsXG4gICAgXCJKdW5cIixcbiAgICBcIkp1bFwiLFxuICAgIFwiQXVnXCIsXG4gICAgXCJTZXBcIixcbiAgICBcIk9jdFwiLFxuICAgIFwiTm92XCIsXG4gICAgXCJEZWNcIixcbiAgXTtcbiAgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xuICB9XG4gIGNvbnN0IGRheTogc3RyaW5nID0gZGF5c0FycltkYXRlLmdldERheSgpXTtcbiAgY29uc3QgZGF0ZU51bTogbnVtYmVyID0gZGF0ZS5nZXREYXRlKCk7XG4gIGNvbnN0IG1vbnRoOiBzdHJpbmcgPSBtb250aHNBcnJbZGF0ZS5nZXRNb250aCgpXTtcbiAgY29uc3QgeWVhcjogbnVtYmVyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICBjb25zdCBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgbGV0IG1pbnMgPSBkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpO1xuICBpZiAobWlucy5sZW5ndGggPCAyKSBtaW5zID0gXCIwXCIgKyBtaW5zO1xuICByZXR1cm4gYCR7ZGF5fSAgICR7ZGF0ZU51bX0gJHttb250aH0gJHt5ZWFyfSAgICR7aG91cnN9OiR7bWluc31gO1xufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCBcIi4vc3R5bGVzLnNjc3NcIjtcbmltcG9ydCBcIi4vbm9ybWFsaXplLnNjc3NcIjtcbmltcG9ydCB7IGNyZWF0ZUh0bWxFbGVtZW50IH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCBkaXNwYXRjaGVyRnVuY3Rpb24gZnJvbSBcIi4vY29tcG9uZW50cy9kaXNwYXRjaGVyXCI7XG5pbXBvcnQgRm9ybSBmcm9tIFwiLi9jb21wb25lbnRzL3ZpZXcvZm9ybVwiO1xuaW1wb3J0IExpc3QgZnJvbSBcIi4vY29tcG9uZW50cy92aWV3L2xpc3RcIjtcbmltcG9ydCBOYXYgZnJvbSBcIi4vY29tcG9uZW50cy92aWV3L25hdlwiO1xuaW1wb3J0IFN0b3JhZ2UgZnJvbSBcIi4vY29tcG9uZW50cy9zdG9yYWdlXCI7XG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi9hcGlcIjtcbmltcG9ydCB7IFN0YXRlT2JqIH0gZnJvbSBcInR5cGVzXCI7XG5cbmNvbnN0IGluaXRpYWxTdGF0ZTogU3RhdGVPYmogPSB7XG4gIGZpbHRlcjogXCJhbGxcIixcbiAgdGFza3M6IFtdLFxuICBsb2FkaW5nU3RhdGU6IGZhbHNlLFxuICBsb2FkaW5nVGFza3M6IFtdLFxuICBpc1JldmVyc2VkOiBmYWxzZSxcbn07XG5cbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcbmNvbnN0IGFwcFJvb3QgPSBjcmVhdGVIdG1sRWxlbWVudChcImRpdlwiLCBbXCJhcHBcIl0pO1xuYm9keS5hcHBlbmQoYXBwUm9vdCk7XG5cbmNvbnN0IGFwcFRpdGxlID0gY3JlYXRlSHRtbEVsZW1lbnQoXCJoMVwiLCBbXCJhcHBfX3RpdGxlXCJdLCBcIlRvLWRvIExpc3RcIik7XG5jb25zdCBjb250YWluZXIgPSBjcmVhdGVIdG1sRWxlbWVudChcImRpdlwiLCBbXCJhcHBfX2NvbnRhaW5lclwiXSk7XG5cbmFwcFJvb3QuYXBwZW5kKGFwcFRpdGxlLCBjb250YWluZXIpO1xuXG5jb25zdCBzdG9yYWdlID0gbmV3IFN0b3JhZ2UoaW5pdGlhbFN0YXRlKTtcbmNvbnN0IGRpc3BhdGNoID0gZGlzcGF0Y2hlckZ1bmN0aW9uKHN0b3JhZ2UpO1xuY29uc3QgbmF2ID0gbmV3IE5hdihkaXNwYXRjaCk7XG5jb25zdCBsaXN0ID0gbmV3IExpc3QoZGlzcGF0Y2gpO1xuY29uc3QgZm9ybSA9IG5ldyBGb3JtKGRpc3BhdGNoKTtcblxuY29uc3Qgdmlld3MgPSBbbmF2LCBsaXN0LCBmb3JtXTtcbnZpZXdzLmZvckVhY2goKHZpZXcpID0+IHtcbiAgc3RvcmFnZS5zdWJzY3JpYmUodmlldy5vblN0YXRlVXBkYXRlLmJpbmQodmlldykpO1xuICBjb250YWluZXIuYXBwZW5kKHZpZXcuZ2V0VmlldygpKTtcbn0pO1xuXG5kaXNwYXRjaCh7XG4gIHR5cGU6IFwiTE9BRElOR19TVEFURVwiLFxuICBwYXlsb2FkOiB0cnVlLFxufSk7XG5cbmFwaS5nZXRBbGwoKS50aGVuKCh0YXNrcykgPT4ge1xuICBkaXNwYXRjaCh7IHR5cGU6IFwiTE9BRF9JTklUSUFMX1RBU0tTXCIsIHBheWxvYWQ6IHRhc2tzIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiYXBpIiwiY29uc3RydWN0b3IiLCJqc29uVGFza3MiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwidGhpcyIsInRhc2tzQXJyIiwiSlNPTiIsInBhcnNlIiwibWFwIiwib2JqIiwiZGF0ZSIsIkRhdGUiLCJnZXRBbGwiLCJ1cGRhdGVTdG9yZWREYXRhIiwiUHJvbWlzZSIsInJlcyIsInNldFRpbWVvdXQiLCJhZGQiLCJuZXdUYXNrIiwicHVzaCIsInJlbW92ZSIsImlkIiwiZmlsdGVyIiwidGFzayIsInVwZGF0ZSIsInVwZGF0ZWRUYXNrIiwiZmluZFRhc2siLCJzdGF0dXMiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZmluZCIsInN0b3JhZ2VJbnN0YW5jZSIsImFjdGlvbiIsImN1cnJlbnRTdGF0ZSIsImdldFN0YXRlIiwidXBkYXRlU3RhdGUiLCJ0eXBlIiwibG9hZGluZ1N0YXRlIiwidGFza3MiLCJwYXlsb2FkIiwibG9hZGluZ1Rhc2tzIiwiaXNSZXZlcnNlZCIsImxvYWRpbmdBcnIiLCJzbGljZSIsInN0YXRlIiwicmVkdWNlciIsInN1YnNjcmliZXJzIiwiZm9yY2VkQ29uc3RydWN0b3IiLCJmb3JFYWNoIiwiZm4iLCJzdWJzY3JpYmUiLCJmb3JjZVVwZGF0ZSIsImRpc3BhdGNoIiwiZWxlbWVudCIsImNyZWF0ZUh0bWxFbGVtZW50IiwiY3JlYXRlRE9NRWxlbWVudCIsImlubmVySFRNTCIsIndyYXAiLCJpbnB1dCIsInNldEF0dHJpYnV0ZSIsImJ1dHRvbkFkZCIsImNvdW50ZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJjb3VudGVyVmFsdWUiLCJ0ZXh0Q29udGVudCIsImxlbmd0aFdhcm5pbmciLCJiaW5kZWRIYW5kbGVJbnB1dFZhbGlkYXRpb24iLCJoYW5kbGVJbnB1dFZhbGlkYXRpb24iLCJiaW5kIiwiYmluZGVkSGFuZGxlQ3JlYXRlTm90ZSIsImhhbmRsZUNyZWF0ZU5vdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiYXBwZW5kIiwiYXBwZW5kQ2hpbGQiLCJvblN0YXRlVXBkYXRlIiwiY2xlYXJIYW5kbGVycyIsInRhc2tzQXJyYXkiLCJnZXRWaWV3IiwiaW5wdXRWYWxpZGF0aW9uIiwiaW5wdXRFbGVtIiwid2FybkVsZW0xIiwid2FybUVsZW0yIiwidmFsdWUiLCJ0YXNrVGV4dCIsImxlbmd0aCIsInRvVXBwZXJDYXNlIiwicmVtb3ZlQXR0cmlidXRlIiwiY3JlYXRlTmV3Tm90ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzb3J0IiwiYSIsImIiLCJnZXRUaW1lIiwidGFza09iaiIsIm5vdGUiLCJ0aGVuIiwic3Bpbm5lciIsImN1cnJlbnRMZW5ndGgiLCJ1cGRhdGVMaXN0IiwidGFza0luc3RhbmNlcyIsImFkZFNwaW5uZXIiLCJyZW1vdmVTcGlubmVyIiwiY3JlYXRlVGFza3NMaXN0IiwidGV4dCIsInR5cGVkIiwidGFza0VsZW1lbnRzIiwiY3JlYXRlVGFza0VsZW1lbnRzIiwiZWwiLCJ0YXNrRWxlbWVudHNBcnJheSIsInNvcnRFbGVtZW50c0J5RGF0ZSIsImJ1dHRvbkFsbCIsImJ1dHRvbkFjdGl2ZSIsImJ1dHRvbkRvbmUiLCJidXR0b24iLCJidXR0b25SZXNlcnNlIiwiY2hpbGROb2RlcyIsImZpbHRlcldyYXAiLCJkYXRhc2V0IiwibmFtZSIsInRhc2tEYXRhIiwiaXNMb2FkaW5nIiwiaW5jbHVkZXMiLCJuZXdTdGF0dXMiLCJ1cGRhdGVUYXNrRWxlbWVudCIsImxlZnRDb250YWluZXIiLCJyaWdodENvbnRhaW5lciIsImJ1dHRvbnNDb250YWluZXIiLCJzdGF0dXNFbGVtIiwiYnV0dG9uRGVsZXRlIiwiZGF0ZUVsZW0iLCJnZXRQcmV0dHlEYXRlIiwiYmluZGVkSGFuZGxlRGVsZXRlIiwiaGFuZGxlRGVsZXRlIiwiYmluZGVkSGFuZGxlRG9uZSIsImhhbmRsZURvbmUiLCJjc3NDbGFzc0FycmF5IiwiZGF0YSIsInN0eWxlIiwiZGF5IiwiZ2V0RGF5IiwiZGF0ZU51bSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwiaG91cnMiLCJnZXRIb3VycyIsIm1pbnMiLCJnZXRNaW51dGVzIiwidG9TdHJpbmciLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiYm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJhcHBSb290IiwiYXBwVGl0bGUiLCJjb250YWluZXIiLCJzdG9yYWdlIiwidmlldyJdLCJzb3VyY2VSb290IjoiIn0=