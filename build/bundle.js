(()=>{"use strict";var t={389:(t,e,s)=>{s.r(e)},100:(t,e,s)=>{s.r(e)},629:(t,e,s)=>{s.r(e)},35:(t,e,s)=>{s.r(e)},948:(t,e,s)=>{s.r(e)},387:(t,e,s)=>{s.r(e)},395:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.api=void 0;const a=s(570);e.api=new a.default},570:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){const t=localStorage.getItem("tasks");this.tasksArr=JSON.parse(t),this.tasksArr&&this.tasksArr.length||(this.tasksArr=[{id:1,note:"Create new task",status:"active",date:new Date}]),this.tasksArr.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.date)})))}getAll(){return this.updateStoredData(),new Promise((t=>{setTimeout((()=>{t(this.tasksArr)}),500)}))}add(t){return new Promise((e=>{setTimeout((()=>{this.tasksArr?this.tasksArr.push(t):this.tasksArr=[t],e(t),this.updateStoredData()}),1e3)}))}remove(t){return new Promise((e=>{this.tasksArr=this.tasksArr.filter((e=>e.id!==t)),this.updateStoredData(),setTimeout((()=>{e(t)}),1e3)}))}update(t){return this.findTask(t.id).status=t.status,new Promise((e=>{setTimeout((()=>{e(t),this.updateStoredData()}),1e3)}))}updateStoredData(){localStorage.setItem("tasks",JSON.stringify(this.tasksArr))}findTask(t){return this.tasksArr.find((e=>e.id===t))}}},954:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e){const s=t.getState();t.updateState(function(t,e){switch(e.type){case"LOAD_INITIAL_TASKS":return Object.assign(Object.assign({},t),{loadingState:!1,tasks:e.payload});case"ADD_NOTE":return Object.assign(Object.assign({},t),{loadingState:!1,tasks:[...t.tasks,e.payload]});case"DELETE_NOTE":return Object.assign(Object.assign({},t),{loadingState:!1,tasks:t.tasks.filter((t=>t.id!==e.payload))});case"CHANGE_NOTE_STATUS":return Object.assign(Object.assign({},t),{loadingTasks:t.loadingTasks.filter((t=>t!==e.payload.id)),tasks:t.tasks.map((t=>t.id===e.payload.id?Object.assign(Object.assign({},t),{status:e.payload.status}):t))});case"CHANGE_FILTER":return Object.assign(Object.assign({},t),{filter:e.payload});case"CHANGE_IS_REVERSED":return Object.assign(Object.assign({},t),{isReversed:e.payload});case"LOADING_STATE":return Object.assign(Object.assign({},t),{loadingState:e.payload});case"NOTE_LOADING_STATE":let s=t.loadingTasks.slice(0);return e.payload.state?s.push(e.payload.id):s=s.filter((t=>t!==e.payload.id)),Object.assign(Object.assign({},t),{loadingTasks:s});default:return t}}(JSON.parse(JSON.stringify(s)),e))}}},586:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.subscribers=[],this.state=t}forcedConstructor(t){this.state=t}getState(){return this.state}updateState(t){this.state=t,this.subscribers.forEach((t=>{t(this.state)}))}subscribe(t){this.subscribers.push(t)}forceUpdate(){this.subscribers.forEach((t=>{t(this.state)}))}}},584:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(389);const a=s(593),n=s(395);e.default=class{constructor(t){this.element=(0,a.createHtmlElement)("div",["form"]),this.dispatch=t}createDOMElement(){this.element.innerHTML="",this.wrap=(0,a.createHtmlElement)("div",["form__wrap"]),this.input=(0,a.createHtmlElement)("input",["form__input"]),this.input.setAttribute("type","textarea"),this.input.setAttribute("required","true"),this.buttonAdd=(0,a.createHtmlElement)("button",["form__button"],"Add"),this.buttonAdd.setAttribute("type","submit"),this.buttonAdd.setAttribute("disabled","true"),this.counter=document.createElement("p"),this.counter.classList.add("board__counter"),this.counterValue=0,this.counter.textContent=`${this.counterValue}/55`,this.lengthWarning=(0,a.createHtmlElement)("p",["form__counter_error","form__warning"],"Note should contain from 5 to 55 symbols"),this.bindedHandleInputValidation=this.handleInputValidation.bind(this),this.bindedHandleCreateNote=this.handleCreateNote.bind(this),this.input.addEventListener("input",this.bindedHandleInputValidation),this.buttonAdd.addEventListener("click",this.bindedHandleCreateNote),this.wrap.append(this.input,this.counter,this.lengthWarning,this.buttonAdd),this.element.appendChild(this.wrap)}onStateUpdate(t){this.clearHandlers(),t.tasks?(this.tasksArray=t.tasks.slice(0),this.createDOMElement()):this.tasksArray=[]}getView(){return this.element}inputValidation(t,e,s){""===t.value?(this.counterValue=0,this.taskText=""):(this.counterValue=t.value.length,this.counterValue>=55&&(t.value=this.taskText),this.taskText=t.value[0].toUpperCase()+t.value.slice(1),t.value=this.taskText,this.counterValue<5?(e.classList.add("form__counter_error"),s.classList.add("form__warning_visible"),this.buttonAdd.setAttribute("disabled","true")):(e.classList.remove("form__counter_error"),s.classList.remove("form__warning_visible"),this.buttonAdd.removeAttribute("disabled"))),e.textContent=`${this.counterValue}/55`}handleInputValidation(){this.inputValidation(this.input,this.counter,this.lengthWarning)}handleCreateNote(){this.createNewNote(this.tasksArray)}clearHandlers(){this.input&&this.input.removeEventListener("input",this.bindedHandleInputValidation),this.buttonAdd&&this.buttonAdd.removeEventListener("click",this.bindedHandleCreateNote)}createNewNote(t){t.sort(((t,e)=>new Date(t.date).getTime()-new Date(e.date).getTime()));const e={id:t.length?t[t.length-1].id+1:1,note:this.taskText,status:"active",date:new Date};this.dispatch({type:"LOADING_STATE",payload:!0}),n.api.add(e).then((t=>{this.dispatch({type:"ADD_NOTE",payload:t})}))}}},348:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(100);const a=s(593),n=s(42);e.default=class{constructor(t){this.spinner=null,this.dispatch=t,this.element=(0,a.createHtmlElement)("div",["list"])}onStateUpdate(t){if(t.tasks){const e=t.loadingState;this.currentLength!==t.tasks.length||this.filter!==t.filter||this.isReversed!==t.isReversed?(this.updateList(t),this.spinner=null):this.taskInstances.forEach((e=>e.onStateUpdate(t))),e&&!this.spinner&&this.addSpinner(),this.spinner&&!t.loadingState&&this.removeSpinner()}}getView(){return this.element}updateList(t){this.filter=t.filter,this.isReversed=t.isReversed,this.taskInstances&&this.taskInstances.forEach((t=>{t.clearHandlers()})),this.createTasksList(t.tasks)}addSpinner(){this.spinner=(0,a.createHtmlElement)("div",["task__spinner"]);const t=(0,a.createHtmlElement)("h3",["task__spinner__text"],"Loading..."),e=(0,a.createHtmlElement)("div",["task__spinner_wrap"]);this.spinner.append(e),e.append(t),this.wrap.append(this.spinner)}removeSpinner(){this.spinner.remove(),this.spinner=null}createTasksList(t){if(this.element.innerHTML="",this.currentLength=0,this.wrap=(0,a.createHtmlElement)("div",["list__wrap"]),t){let e=[];e="active"===this.filter?this.createTaskElements(t,"active"):"done"===this.filter?this.createTaskElements(t,"done"):this.createTaskElements(t,"all"),e.forEach((t=>this.wrap.append(t))),this.element.appendChild(this.wrap)}}createTaskElements(t,e){const s=[];return this.sortElementsByDate(t),this.taskInstances=[],t.forEach((t=>{if("all"===e||t.status===e){const e=new n.default(t,this.dispatch);s.push(e.getView()),this.currentLength++,this.taskInstances.push(e)}})),s}sortElementsByDate(t){this.isReversed?t.sort(((t,e)=>new Date(t.date).getTime()-new Date(e.date).getTime())):t.sort(((t,e)=>new Date(e.date).getTime()-new Date(t.date).getTime()))}}},678:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(629);const a=s(593);e.default=class{constructor(t){this.isReversed=!1,this.dispatch=t,this.element=(0,a.createHtmlElement)("div",["nav"]),this.createDOMElement(),this.buttonAll.classList.add("nav__button_selected")}getView(){return this.element}onStateUpdate(t){switch([this.buttonAll,this.buttonActive,this.buttonDone].forEach((t=>t.classList.remove("nav__button_selected"))),t.filter){case"active":this.buttonActive.classList.add("nav__button_selected");break;case"done":this.buttonDone.classList.add("nav__button_selected");break;default:this.buttonAll.classList.add("nav__button_selected")}switch(t.isReversed){case!0:this.buttonReserse.classList.add("nav__button_selected");break;case!1:this.buttonReserse.classList.remove("nav__button_selected")}}createDOMElement(){this.element.childNodes.forEach((t=>t.remove)),this.filterWrap=(0,a.createHtmlElement)("div",["nav__container"]),this.buttonAll=(0,a.createHtmlElement)("button",["nav__button"],"All","all"),this.buttonActive=(0,a.createHtmlElement)("button",["nav__button"],"Active","active"),this.buttonDone=(0,a.createHtmlElement)("button",["nav__button"],"Done","done"),this.buttonReserse=(0,a.createHtmlElement)("button",["nav__button","nav__reverse"]),this.element.append(this.filterWrap,this.buttonReserse),this.filterWrap.append(this.buttonAll,this.buttonActive,this.buttonDone),[this.buttonAll,this.buttonActive,this.buttonDone].forEach((t=>t.addEventListener("click",(()=>{this.dispatch({type:"CHANGE_FILTER",payload:t.dataset.name})})))),this.buttonReserse.addEventListener("click",(()=>{switch(this.isReversed){case!0:this.isReversed=!1,this.buttonReserse.classList.remove("nav__button_selected");break;case!1:this.isReversed=!0,this.buttonReserse.classList.add("nav__button_selected")}this.dispatch({type:"LOADING_STATE",payload:!0}),this.dispatch({type:"CHANGE_IS_REVERSED",payload:this.isReversed}),this.dispatch({type:"LOADING_STATE",payload:!1})}))}}},42:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(35);const a=s(593),n=s(395);e.default=class{constructor(t,e){this.status=t.status,this.dispatch=e,this.id=t.id,this.element=(0,a.createHtmlElement)("div",["task"]),this.createDOMElement(t)}getView(){return this.element}onStateUpdate(t){const e=t.loadingTasks.includes(this.id),s=t.tasks.find((t=>t.id===this.id)).status;this.status!==s&&this.updateTaskElement(t),e&&!this.spinner?this.addSpinner():!e&&this.spinner&&this.removeSpinner()}createDOMElement(t){this.taskData=t,this.element.innerHTML="",this.wrap=(0,a.createHtmlElement)("div",["task__wrap"]);const e=(0,a.createHtmlElement)("div",["task__container_inner"]),s=(0,a.createHtmlElement)("div",["task__container_inner"]),n=(0,a.createHtmlElement)("h2",["task__text"],t.note),i=(0,a.createHtmlElement)("div",["task__container_buttons"]);let r;switch(this.buttonDone=(0,a.createHtmlElement)("button",["task__button"],"Done"),this.buttonDelete=(0,a.createHtmlElement)("button",["task__button"],"Delete"),t.status){case"active":this.buttonDone=(0,a.createHtmlElement)("button",["task__button"],"Done","done"),this.buttonDelete=(0,a.createHtmlElement)("button",["task__button"],"Delete"),r=(0,a.createHtmlElement)("p",["task__status","task__status_active"],"Active");break;case"done":this.buttonDone=(0,a.createHtmlElement)("button",["task__button","task__button_done"],"Undo","active"),this.buttonDelete=(0,a.createHtmlElement)("button",["task__button","task__button_done"],"Delete"),r=(0,a.createHtmlElement)("p",["task__status","task__status_done"],"Done")}const d=(0,a.createHtmlElement)("p",["task__date"],(0,a.getPrettyDate)(t.date));this.element.appendChild(this.wrap),this.wrap.append(e,s),e.append(n,i),i.append(this.buttonDone,this.buttonDelete),s.append(r,d),this.bindedHandleDelete=this.handleDelete.bind(this),this.bindedHandleDone=this.handleDone.bind(this),this.buttonDone.addEventListener("click",this.bindedHandleDone),this.buttonDelete.addEventListener("click",this.bindedHandleDelete)}handleDelete(){this.dispatch({type:"LOADING_STATE",payload:!0}),n.api.remove(this.id).then((t=>new Promise((e=>{this.dispatch({type:"DELETE_NOTE",payload:t})}))))}handleDone(){this.taskData.status=this.buttonDone.dataset.name,this.dispatch({type:"NOTE_LOADING_STATE",payload:{id:this.id,state:!0}}),n.api.update(this.taskData).then((t=>{this.dispatch({type:"CHANGE_NOTE_STATUS",payload:{id:t.id,status:t.status}})}))}clearHandlers(){this.buttonDelete&&this.buttonDelete.removeEventListener("click",this.bindedHandleDelete),this.buttonDone&&this.buttonDone.removeEventListener("click",this.bindedHandleDone)}addSpinner(){this.spinner=(0,a.createHtmlElement)("div",["task__spinner"]);const t=(0,a.createHtmlElement)("h3",["task__spinner__text"],"Loading..."),e=(0,a.createHtmlElement)("div",["task__spinner_wrap"]);this.spinner.append(e),e.append(t),this.element.append(this.spinner)}removeSpinner(){this.spinner.remove(),this.spinner=null}updateTaskElement(t){this.clearHandlers(),this.status=t.tasks.find((t=>t.id===this.id)).status,this.createDOMElement(t.tasks.find((t=>t.id===this.id)))}}},593:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getPrettyDate=e.createHtmlElement=void 0,e.createHtmlElement=function(t,e,s,a){const n=document.createElement(t);return e.forEach((t=>n.classList.add(t))),s&&(n.textContent=s),a&&(n.dataset.name=a),n},e.getPrettyDate=function(t){"string"==typeof t&&(t=new Date(t));const e=["Sun","Mon","Tue","Wen","Thu","Fri","Sat"][t.getDay()],s=t.getDate(),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],n=t.getFullYear(),i=t.getHours();let r=t.getMinutes().toString();return r.length<2&&(r="0"+r),`${e}   ${s} ${a} ${n}   ${i}:${r}`}}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,s),i.exports}s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{s(387),s(948);const t=s(593),e=s(954),a=s(584),n=s(348),i=s(678),r=s(586),d=s(395),l=document.querySelector("body"),o=(0,t.createHtmlElement)("div",["app"]);l.append(o);const h=(0,t.createHtmlElement)("h1",["app__title"],"TaskTracker 1.0"),c=(0,t.createHtmlElement)("div",["app__container"]);o.append(h,c);const u=new r.default({filter:"all",tasks:[],loadingState:!1,loadingTasks:[],isReversed:!1}),p=(0,e.default)(u);[new i.default(p),new n.default(p),new a.default(p)].forEach((t=>{u.subscribe(t.onStateUpdate.bind(t)),c.append(t.getView())})),p({type:"LOADING_STATE",payload:!0}),d.api.getAll().then((t=>{p({type:"LOAD_INITIAL_TASKS",payload:t})}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGNBQWMsUUFDOUJDLEdBQVUsSUFBQWhILG1CQUFrQixNQUFPLENBQUMsUUFDMUM4RyxFQUFLMUYsT0FBTzRGLEdBRVosTUFBTUMsR0FBVyxJQUFBakgsbUJBQWtCLEtBQU0sQ0FBQyxjQUFlLG1CQUNuRGtILEdBQVksSUFBQWxILG1CQUFrQixNQUFPLENBQUMsbUJBRTVDZ0gsRUFBUTVGLE9BQU82RixFQUFVQyxHQUV6QixNQUFNQyxFQUFVLElBQUksVUFqQlcsQ0FDN0JsSixPQUFRLE1BQ1JlLE1BQU8sR0FDUEQsY0FBYyxFQUNkRyxhQUFjLEdBQ2RDLFlBQVksSUFhUlcsR0FBVyxhQUFtQnFILEdBS3RCLENBSkYsSUFBSSxVQUFJckgsR0FDUCxJQUFJLFVBQUtBLEdBQ1QsSUFBSSxVQUFLQSxJQUdoQkosU0FBUzBILElBQ2JELEVBQVF2SCxVQUFVd0gsRUFBSzlGLGNBQWNOLEtBQUtvRyxJQUMxQ0YsRUFBVTlGLE9BQU9nRyxFQUFLM0YsVUFBVSxJQUdsQzNCLEVBQVMsQ0FDUGhCLEtBQU0sZ0JBQ05HLFNBQVMsSUFHWCxFQUFBMUMsSUFBSWlCLFNBQVNpRixNQUFNekQsSUFDakJjLEVBQVMsQ0FBRWhCLEtBQU0scUJBQXNCRyxRQUFTRCxHQUFRLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXNrLXRyYWNrZXIvLi9zcmMvYXBpL2luZGV4LnRzIiwid2VicGFjazovL3Rhc2stdHJhY2tlci8uL3NyYy9hcGkvbG9jYWxBcGkudHMiLCJ3ZWJwYWNrOi8vdGFzay10cmFja2VyLy4vc3JjL2NvbXBvbmVudHMvZGlzcGF0Y2hlci9pbmRleC50cyIsIndlYnBhY2s6Ly90YXNrLXRyYWNrZXIvLi9zcmMvY29tcG9uZW50cy9zdG9yYWdlL2luZGV4LnRzIiwid2VicGFjazovL3Rhc2stdHJhY2tlci8uL3NyYy9jb21wb25lbnRzL3ZpZXcvZm9ybS9pbmRleC50cyIsIndlYnBhY2s6Ly90YXNrLXRyYWNrZXIvLi9zcmMvY29tcG9uZW50cy92aWV3L2xpc3QvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdGFzay10cmFja2VyLy4vc3JjL2NvbXBvbmVudHMvdmlldy9uYXYvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdGFzay10cmFja2VyLy4vc3JjL2NvbXBvbmVudHMvdmlldy90YXNrL2luZGV4LnRzIiwid2VicGFjazovL3Rhc2stdHJhY2tlci8uL3NyYy91dGlscy50cyIsIndlYnBhY2s6Ly90YXNrLXRyYWNrZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdGFzay10cmFja2VyL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdGFzay10cmFja2VyLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMb2NhbEFwaSBmcm9tIFwiLi9sb2NhbEFwaVwiO1xuaW1wb3J0IFNlcnZlckFwaSBmcm9tIFwiLi9zZXJ2ZXJBcGlcIjtcblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBMb2NhbEFwaSgpO1xuLy8gY2hhbmdlIFwibmV3IExvY2FsQXBpKClcIiB0byBcIm5ldyBTZXJ2ZXJBcGkoKVwiIHRvIHN3aXRjaCBmcm9tIGxvY2Fsc3RvcmFnZSB0byBTZXJ2ZXIgbWVtb3JpemluZ1xuLy8gdG8gdXNlIHNlcnZlciBtZW1vcml6aW5nIHlvdSBhbHNvIG5lZWQgdG8gbG9jYWxseSBpbnN0YWxsIEpTT04gU2VydmVyIHdpdGggXCJucG0gaW5zdGFsbCBqc29uLXNlcnZlclwiIGFuZCBzdGFydCBpdCB3aXRoIFwibnB4IGpzb24tc2VydmVyIC0td2F0Y2ggZGIuanNvblwiXG4iLCJpbXBvcnQgeyBUYXNrRGF0YU9iaiB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IEFwaUludGVyZmFjZSBmcm9tIFwiLi9hcGlJbnRlcmZhY2VcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9jYWxBcGkgaW1wbGVtZW50cyBBcGlJbnRlcmZhY2Uge1xuICB0YXNrc0FycjogVGFza0RhdGFPYmpbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBjb25zdCBqc29uVGFza3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRhc2tzXCIpO1xuICAgIHRoaXMudGFza3NBcnIgPSBKU09OLnBhcnNlKGpzb25UYXNrcyk7XG4gICAgaWYgKCF0aGlzLnRhc2tzQXJyIHx8ICF0aGlzLnRhc2tzQXJyLmxlbmd0aCkge1xuICAgICAgdGhpcy50YXNrc0FyciA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgIG5vdGU6IFwiQ3JlYXRlIG5ldyB0YXNrXCIsXG4gICAgICAgICAgc3RhdHVzOiBcImFjdGl2ZVwiLFxuICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICBdO1xuICAgIH1cbiAgICB0aGlzLnRhc2tzQXJyLm1hcCgob2JqOiBUYXNrRGF0YU9iaikgPT4gKHtcbiAgICAgIC4uLm9iaixcbiAgICAgIGRhdGU6IG5ldyBEYXRlKG9iai5kYXRlKSxcbiAgICB9KSk7XG4gIH1cblxuICBnZXRBbGwoKSB7XG4gICAgdGhpcy51cGRhdGVTdG9yZWREYXRhKCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFRhc2tEYXRhT2JqW10+KChyZXMpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICByZXModGhpcy50YXNrc0Fycik7XG4gICAgICB9LCA1MDApO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkKG5ld1Rhc2s6IFRhc2tEYXRhT2JqKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFRhc2tEYXRhT2JqPigocmVzKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMudGFza3NBcnIpIHtcbiAgICAgICAgICB0aGlzLnRhc2tzQXJyLnB1c2gobmV3VGFzayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50YXNrc0FyciA9IFtuZXdUYXNrXTtcbiAgICAgICAgfVxuICAgICAgICByZXMobmV3VGFzayk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RvcmVkRGF0YSgpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfSk7XG4gIH1cblxuICByZW1vdmUoaWQ6IG51bWJlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxudW1iZXI+KChyZXMpID0+IHtcbiAgICAgIHRoaXMudGFza3NBcnIgPSB0aGlzLnRhc2tzQXJyLmZpbHRlcigodGFzaykgPT4gdGFzay5pZCAhPT0gaWQpO1xuICAgICAgdGhpcy51cGRhdGVTdG9yZWREYXRhKCk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVzKGlkKTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlKHVwZGF0ZWRUYXNrOiBUYXNrRGF0YU9iaikge1xuICAgIHRoaXMuZmluZFRhc2sodXBkYXRlZFRhc2suaWQpLnN0YXR1cyA9IHVwZGF0ZWRUYXNrLnN0YXR1cztcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VGFza0RhdGFPYmo+KChyZXMpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICByZXModXBkYXRlZFRhc2spO1xuXG4gICAgICAgIHRoaXMudXBkYXRlU3RvcmVkRGF0YSgpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0b3JlZERhdGEoKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0YXNrc1wiLCBKU09OLnN0cmluZ2lmeSh0aGlzLnRhc2tzQXJyKSk7XG4gIH1cblxuICBwcml2YXRlIGZpbmRUYXNrKGlkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gdGhpcy50YXNrc0Fyci5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09PSBpZCk7XG4gIH1cbn1cbiIsImltcG9ydCBTdG9yYWdlIGZyb20gXCIuLi9zdG9yYWdlXCI7XG5pbXBvcnQgeyBBY3Rpb24sIERpc3BhdGNoLCBTdGF0ZU9iaiB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5mdW5jdGlvbiByZWR1Y2VyKGN1cnJlbnRTdGF0ZTogU3RhdGVPYmosIGFjdGlvbjogQWN0aW9uKTogU3RhdGVPYmoge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBcIkxPQURfSU5JVElBTF9UQVNLU1wiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY3VycmVudFN0YXRlLFxuICAgICAgICBsb2FkaW5nU3RhdGU6IGZhbHNlLFxuICAgICAgICB0YXNrczogYWN0aW9uLnBheWxvYWQsXG4gICAgICB9O1xuICAgIGNhc2UgXCJBRERfTk9URVwiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY3VycmVudFN0YXRlLFxuICAgICAgICBsb2FkaW5nU3RhdGU6IGZhbHNlLFxuICAgICAgICB0YXNrczogWy4uLmN1cnJlbnRTdGF0ZS50YXNrcywgYWN0aW9uLnBheWxvYWRdLFxuICAgICAgfTtcblxuICAgIGNhc2UgXCJERUxFVEVfTk9URVwiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY3VycmVudFN0YXRlLFxuICAgICAgICBsb2FkaW5nU3RhdGU6IGZhbHNlLFxuICAgICAgICB0YXNrczogY3VycmVudFN0YXRlLnRhc2tzLmZpbHRlcigodGFzaykgPT4gdGFzay5pZCAhPT0gYWN0aW9uLnBheWxvYWQpLFxuICAgICAgfTtcblxuICAgIGNhc2UgXCJDSEFOR0VfTk9URV9TVEFUVVNcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgbG9hZGluZ1Rhc2tzOiBjdXJyZW50U3RhdGUubG9hZGluZ1Rhc2tzLmZpbHRlcigoaWQpPT4gaWQhPT1hY3Rpb24ucGF5bG9hZC5pZCksXG4gICAgICAgIHRhc2tzOiBjdXJyZW50U3RhdGUudGFza3MubWFwKCh0YXNrKSA9PlxuICAgICAgICAgIHRhc2suaWQgPT09IGFjdGlvbi5wYXlsb2FkLmlkXG4gICAgICAgICAgICA/IHsgLi4udGFzaywgc3RhdHVzOiBhY3Rpb24ucGF5bG9hZC5zdGF0dXMgfVxuICAgICAgICAgICAgOiB0YXNrXG4gICAgICAgICksXG4gICAgICB9O1xuXG4gICAgY2FzZSBcIkNIQU5HRV9GSUxURVJcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgZmlsdGVyOiBhY3Rpb24ucGF5bG9hZCxcbiAgICAgIH07XG5cbiAgICBjYXNlIFwiQ0hBTkdFX0lTX1JFVkVSU0VEXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgIGlzUmV2ZXJzZWQ6IGFjdGlvbi5wYXlsb2FkLFxuICAgICAgfTtcblxuICAgIGNhc2UgXCJMT0FESU5HX1NUQVRFXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgIGxvYWRpbmdTdGF0ZTogYWN0aW9uLnBheWxvYWQsXG4gICAgICB9O1xuXG4gICAgY2FzZSBcIk5PVEVfTE9BRElOR19TVEFURVwiOlxuICAgICAgbGV0IGxvYWRpbmdBcnIgPSBjdXJyZW50U3RhdGUubG9hZGluZ1Rhc2tzLnNsaWNlKDApO1xuICAgICAgaWYgKGFjdGlvbi5wYXlsb2FkLnN0YXRlKSB7XG4gICAgICAgIGxvYWRpbmdBcnIucHVzaChhY3Rpb24ucGF5bG9hZC5pZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2FkaW5nQXJyID0gbG9hZGluZ0Fyci5maWx0ZXIoKHRhc2spID0+IHRhc2sgIT09IGFjdGlvbi5wYXlsb2FkLmlkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IC4uLmN1cnJlbnRTdGF0ZSwgbG9hZGluZ1Rhc2tzOiBsb2FkaW5nQXJyIH07XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkaXNwYXRjaGVyRnVuY3Rpb24oc3RvcmFnZUluc3RhbmNlOiBTdG9yYWdlKTogRGlzcGF0Y2gge1xuICByZXR1cm4gZnVuY3Rpb24gZGlzcGF0Y2goYWN0aW9uOiBBY3Rpb24pIHtcbiAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBzdG9yYWdlSW5zdGFuY2UuZ2V0U3RhdGUoKTtcbiAgICBzdG9yYWdlSW5zdGFuY2UudXBkYXRlU3RhdGUocmVkdWNlcihKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGN1cnJlbnRTdGF0ZSkpLCBhY3Rpb24pKTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IFN0YXRlT2JqIH0gZnJvbSBcInR5cGVzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3JhZ2Uge1xuICBzdGF0ZTogU3RhdGVPYmo7XG4gIHN1YnNjcmliZXJzOiBGdW5jdGlvbltdID0gW107XG5cbiAgY29uc3RydWN0b3Ioc3RhdGU6IFN0YXRlT2JqKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICB9XG5cbiAgZm9yY2VkQ29uc3RydWN0b3Ioc3RhdGU6IFN0YXRlT2JqKSB7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICB9XG5cbiAgZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH1cblxuICB1cGRhdGVTdGF0ZShzdGF0ZTogU3RhdGVPYmopIHtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5zdWJzY3JpYmVycy5mb3JFYWNoKChmbikgPT4ge1xuICAgICAgZm4odGhpcy5zdGF0ZSk7XG4gICAgfSk7XG4gIH1cblxuICBzdWJzY3JpYmUoZm46IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5zdWJzY3JpYmVycy5wdXNoKGZuKTtcbiAgfVxuXG4gIGZvcmNlVXBkYXRlKCkge1xuICAgIHRoaXMuc3Vic2NyaWJlcnMuZm9yRWFjaCgoZm4pID0+IHtcbiAgICAgIGZuKHRoaXMuc3RhdGUpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL3N0eWxlcy5zY3NzXCI7XG5pbXBvcnQgeyBEaXNwYXRjaCwgU3RhdGVPYmosIFRhc2tEYXRhT2JqIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBjcmVhdGVIdG1sRWxlbWVudCB9IGZyb20gXCIuLi8uLi8uLi91dGlsc1wiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uLy4uLy4uL2FwaVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtIHtcbiAgZWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XG4gIHdyYXA6IEhUTUxEaXZFbGVtZW50O1xuICBkaXNwYXRjaDogRGlzcGF0Y2g7XG4gIGJ1dHRvbkFkZDogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIGNvdW50ZXJWYWx1ZTogbnVtYmVyO1xuICB0YXNrVGV4dDogc3RyaW5nO1xuICBpbnB1dDogSFRNTElucHV0RWxlbWVudDtcbiAgY291bnRlcjogSFRNTFBhcmFncmFwaEVsZW1lbnQ7XG4gIGxlbmd0aFdhcm5pbmc6IEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xuICB0YXNrc0FycmF5OiBUYXNrRGF0YU9ialtdO1xuICBiaW5kZWRIYW5kbGVJbnB1dFZhbGlkYXRpb246ICgpID0+IHZvaWQgfCB1bmRlZmluZWQ7XG4gIGJpbmRlZEhhbmRsZUNyZWF0ZU5vdGU6ICgpID0+IHZvaWQgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoZGlzcGF0Y2g6IERpc3BhdGNoKSB7XG4gICAgdGhpcy5lbGVtZW50ID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcImZvcm1cIl0pO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBkaXNwYXRjaDtcbiAgfVxuXG4gIGNyZWF0ZURPTUVsZW1lbnQoKSB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XG4gICAgdGhpcy53cmFwID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcImZvcm1fX3dyYXBcIl0pO1xuICAgIHRoaXMuaW5wdXQgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MSW5wdXRFbGVtZW50PihcImlucHV0XCIsIFtcImZvcm1fX2lucHV0XCJdKTtcbiAgICB0aGlzLmlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0YXJlYVwiKTtcbiAgICB0aGlzLmlucHV0LnNldEF0dHJpYnV0ZShcInJlcXVpcmVkXCIsIFwidHJ1ZVwiKTtcbiAgICB0aGlzLmJ1dHRvbkFkZCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxCdXR0b25FbGVtZW50PihcbiAgICAgIFwiYnV0dG9uXCIsXG4gICAgICBbXCJmb3JtX19idXR0b25cIl0sXG4gICAgICBcIkFkZFwiXG4gICAgKTtcbiAgICB0aGlzLmJ1dHRvbkFkZC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic3VibWl0XCIpO1xuICAgIHRoaXMuYnV0dG9uQWRkLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcbiAgICB0aGlzLmNvdW50ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICB0aGlzLmNvdW50ZXIuY2xhc3NMaXN0LmFkZChcImJvYXJkX19jb3VudGVyXCIpO1xuICAgIHRoaXMuY291bnRlclZhbHVlID0gMDtcbiAgICB0aGlzLmNvdW50ZXIudGV4dENvbnRlbnQgPSBgJHt0aGlzLmNvdW50ZXJWYWx1ZX0vNTVgO1xuICAgIHRoaXMubGVuZ3RoV2FybmluZyA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxQYXJhZ3JhcGhFbGVtZW50PihcbiAgICAgIFwicFwiLFxuICAgICAgW1wiZm9ybV9fY291bnRlcl9lcnJvclwiLCBcImZvcm1fX3dhcm5pbmdcIl0sXG4gICAgICBcIk5vdGUgc2hvdWxkIGNvbnRhaW4gZnJvbSA1IHRvIDU1IHN5bWJvbHNcIlxuICAgICk7XG5cbiAgICB0aGlzLmJpbmRlZEhhbmRsZUlucHV0VmFsaWRhdGlvbiA9IHRoaXMuaGFuZGxlSW5wdXRWYWxpZGF0aW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5iaW5kZWRIYW5kbGVDcmVhdGVOb3RlID0gdGhpcy5oYW5kbGVDcmVhdGVOb3RlLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLmJpbmRlZEhhbmRsZUlucHV0VmFsaWRhdGlvbik7XG4gICAgdGhpcy5idXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYmluZGVkSGFuZGxlQ3JlYXRlTm90ZSk7XG5cbiAgICB0aGlzLndyYXAuYXBwZW5kKFxuICAgICAgdGhpcy5pbnB1dCxcbiAgICAgIHRoaXMuY291bnRlcixcbiAgICAgIHRoaXMubGVuZ3RoV2FybmluZyxcbiAgICAgIHRoaXMuYnV0dG9uQWRkXG4gICAgKTtcbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy53cmFwKTtcbiAgfVxuXG4gIG9uU3RhdGVVcGRhdGUoc3RhdGU6IFN0YXRlT2JqKSB7XG4gICAgdGhpcy5jbGVhckhhbmRsZXJzKCk7XG4gICAgaWYgKHN0YXRlLnRhc2tzKSB7XG4gICAgICB0aGlzLnRhc2tzQXJyYXkgPSBzdGF0ZS50YXNrcy5zbGljZSgwKTtcbiAgICAgIHRoaXMuY3JlYXRlRE9NRWxlbWVudCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRhc2tzQXJyYXkgPSBbXTtcbiAgICB9XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIGlucHV0VmFsaWRhdGlvbihcbiAgICBpbnB1dEVsZW06IEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgd2FybkVsZW0xOiBIVE1MUGFyYWdyYXBoRWxlbWVudCxcbiAgICB3YXJtRWxlbTI6IEhUTUxQYXJhZ3JhcGhFbGVtZW50XG4gICk6IHZvaWQge1xuICAgIGlmIChpbnB1dEVsZW0udmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHRoaXMuY291bnRlclZhbHVlID0gMDtcbiAgICAgIHRoaXMudGFza1RleHQgPSBcIlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvdW50ZXJWYWx1ZSA9IGlucHV0RWxlbS52YWx1ZS5sZW5ndGg7XG4gICAgICBpZiAodGhpcy5jb3VudGVyVmFsdWUgPj0gNTUpIGlucHV0RWxlbS52YWx1ZSA9IHRoaXMudGFza1RleHQ7XG4gICAgICB0aGlzLnRhc2tUZXh0ID1cbiAgICAgICAgaW5wdXRFbGVtLnZhbHVlWzBdLnRvVXBwZXJDYXNlKCkgKyBpbnB1dEVsZW0udmFsdWUuc2xpY2UoMSk7XG4gICAgICBpbnB1dEVsZW0udmFsdWUgPSB0aGlzLnRhc2tUZXh0O1xuICAgICAgaWYgKHRoaXMuY291bnRlclZhbHVlIDwgNSkge1xuICAgICAgICB3YXJuRWxlbTEuY2xhc3NMaXN0LmFkZChcImZvcm1fX2NvdW50ZXJfZXJyb3JcIik7XG4gICAgICAgIHdhcm1FbGVtMi5jbGFzc0xpc3QuYWRkKFwiZm9ybV9fd2FybmluZ192aXNpYmxlXCIpO1xuICAgICAgICB0aGlzLmJ1dHRvbkFkZC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuRWxlbTEuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2NvdW50ZXJfZXJyb3JcIik7XG4gICAgICAgIHdhcm1FbGVtMi5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9fd2FybmluZ192aXNpYmxlXCIpO1xuICAgICAgICB0aGlzLmJ1dHRvbkFkZC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgd2FybkVsZW0xLnRleHRDb250ZW50ID0gYCR7dGhpcy5jb3VudGVyVmFsdWV9LzU1YDtcbiAgfVxuXG4gIGhhbmRsZUlucHV0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLmlucHV0VmFsaWRhdGlvbih0aGlzLmlucHV0LCB0aGlzLmNvdW50ZXIsIHRoaXMubGVuZ3RoV2FybmluZyk7XG4gIH1cblxuICBoYW5kbGVDcmVhdGVOb3RlKCkge1xuICAgIHRoaXMuY3JlYXRlTmV3Tm90ZSh0aGlzLnRhc2tzQXJyYXkpO1xuICB9XG5cbiAgY2xlYXJIYW5kbGVycygpIHtcbiAgICBpZiAodGhpcy5pbnB1dClcbiAgICAgIHRoaXMuaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMuYmluZGVkSGFuZGxlSW5wdXRWYWxpZGF0aW9uKTtcbiAgICBpZiAodGhpcy5idXR0b25BZGQpXG4gICAgICB0aGlzLmJ1dHRvbkFkZC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5iaW5kZWRIYW5kbGVDcmVhdGVOb3RlKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTmV3Tm90ZSh0YXNrc0FycmF5OiBUYXNrRGF0YU9ialtdKSB7XG4gICAgdGFza3NBcnJheS5zb3J0KFxuICAgICAgKGEsIGIpID0+IG5ldyBEYXRlKGEuZGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYi5kYXRlKS5nZXRUaW1lKClcbiAgICApO1xuICAgIGNvbnN0IHRhc2tPYmo6IFRhc2tEYXRhT2JqID0ge1xuICAgICAgaWQ6IHRhc2tzQXJyYXkubGVuZ3RoID8gdGFza3NBcnJheVt0YXNrc0FycmF5Lmxlbmd0aCAtIDFdLmlkICsgMSA6IDEsXG4gICAgICBub3RlOiB0aGlzLnRhc2tUZXh0LFxuICAgICAgc3RhdHVzOiBcImFjdGl2ZVwiLFxuICAgICAgZGF0ZTogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgdHlwZTogXCJMT0FESU5HX1NUQVRFXCIsXG4gICAgICBwYXlsb2FkOiB0cnVlLFxuICAgIH0pO1xuICAgIGFwaS5hZGQodGFza09iaikudGhlbigodGFza09iaikgPT4ge1xuICAgICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiQUREX05PVEVcIixcbiAgICAgICAgcGF5bG9hZDogdGFza09iaixcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL3N0eWxlcy5zY3NzXCI7XG5pbXBvcnQgeyBEaXNwYXRjaCwgU3RhdGVPYmosIFRhc2tEYXRhT2JqLCBGaWx0ZXIgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGNyZWF0ZUh0bWxFbGVtZW50IH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzXCI7XG5pbXBvcnQgVGFzayBmcm9tIFwiLi4vdGFza1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXN0IHtcbiAgZWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XG4gIHByaXZhdGUgd3JhcDogSFRNTERpdkVsZW1lbnQ7XG4gIGRpc3BhdGNoOiBEaXNwYXRjaDtcbiAgcHJpdmF0ZSBjdXJyZW50TGVuZ3RoOiBudW1iZXI7XG4gIHByaXZhdGUgaXNSZXZlcnNlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBmaWx0ZXI6IEZpbHRlcjtcbiAgdGFza0luc3RhbmNlczogVGFza1tdO1xuICBzcGlubmVyOiBIVE1MRGl2RWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKGRpc3BhdGNoOiBEaXNwYXRjaCkge1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBkaXNwYXRjaDtcbiAgICB0aGlzLmVsZW1lbnQgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1wibGlzdFwiXSk7XG4gIH1cblxuICBvblN0YXRlVXBkYXRlKHN0YXRlOiBTdGF0ZU9iaikge1xuICAgIGlmIChzdGF0ZS50YXNrcykge1xuICAgICAgY29uc3QgbG9hZGluZ1N0YXRlID0gc3RhdGUubG9hZGluZ1N0YXRlO1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmN1cnJlbnRMZW5ndGggIT09IHN0YXRlLnRhc2tzLmxlbmd0aCB8fFxuICAgICAgICB0aGlzLmZpbHRlciAhPT0gc3RhdGUuZmlsdGVyIHx8XG4gICAgICAgIHRoaXMuaXNSZXZlcnNlZCAhPT0gc3RhdGUuaXNSZXZlcnNlZFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMudXBkYXRlTGlzdChzdGF0ZSk7XG4gICAgICAgIHRoaXMuc3Bpbm5lciA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRhc2tJbnN0YW5jZXMuZm9yRWFjaCgodGFzaykgPT4gdGFzay5vblN0YXRlVXBkYXRlKHN0YXRlKSk7XG4gICAgICB9XG4gICAgICBpZiAobG9hZGluZ1N0YXRlICYmICF0aGlzLnNwaW5uZXIpIHtcbiAgICAgICAgdGhpcy5hZGRTcGlubmVyKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zcGlubmVyICYmICFzdGF0ZS5sb2FkaW5nU3RhdGUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVTcGlubmVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICB9XG5cbiAgdXBkYXRlTGlzdChzdGF0ZTogU3RhdGVPYmopIHtcbiAgICB0aGlzLmZpbHRlciA9IHN0YXRlLmZpbHRlcjtcbiAgICB0aGlzLmlzUmV2ZXJzZWQgPSBzdGF0ZS5pc1JldmVyc2VkO1xuICAgIGlmICh0aGlzLnRhc2tJbnN0YW5jZXMpXG4gICAgICB0aGlzLnRhc2tJbnN0YW5jZXMuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgICB0YXNrLmNsZWFySGFuZGxlcnMoKTtcbiAgICAgIH0pO1xuICAgIHRoaXMuY3JlYXRlVGFza3NMaXN0KHN0YXRlLnRhc2tzKTtcbiAgfVxuXG4gIGFkZFNwaW5uZXIoKSB7XG4gICAgdGhpcy5zcGlubmVyID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcInRhc2tfX3NwaW5uZXJcIl0pO1xuICAgIGNvbnN0IHRleHQgPSBjcmVhdGVIdG1sRWxlbWVudChcImgzXCIsIFtcInRhc2tfX3NwaW5uZXJfX3RleHRcIl0sIFwiTG9hZGluZy4uLlwiKTtcbiAgICBjb25zdCB0eXBlZCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxEaXZFbGVtZW50PihcImRpdlwiLCBbXG4gICAgICBcInRhc2tfX3NwaW5uZXJfd3JhcFwiLFxuICAgIF0pO1xuICAgIHRoaXMuc3Bpbm5lci5hcHBlbmQodHlwZWQpO1xuICAgIHR5cGVkLmFwcGVuZCh0ZXh0KTtcbiAgICB0aGlzLndyYXAuYXBwZW5kKHRoaXMuc3Bpbm5lcik7XG4gIH1cblxuICByZW1vdmVTcGlubmVyKCkge1xuICAgIHRoaXMuc3Bpbm5lci5yZW1vdmUoKTtcbiAgICB0aGlzLnNwaW5uZXIgPSBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVUYXNrc0xpc3QodGFza3M6IFRhc2tEYXRhT2JqW10pIHtcbiAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcbiAgICB0aGlzLmN1cnJlbnRMZW5ndGggPSAwO1xuICAgIHRoaXMud3JhcCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxEaXZFbGVtZW50PihcImRpdlwiLCBbXCJsaXN0X193cmFwXCJdKTtcbiAgICBpZiAodGFza3MpIHtcbiAgICAgIGxldCB0YXNrRWxlbWVudHMgPSBbXTtcbiAgICAgIGlmICh0aGlzLmZpbHRlciA9PT0gXCJhY3RpdmVcIikge1xuICAgICAgICB0YXNrRWxlbWVudHMgPSB0aGlzLmNyZWF0ZVRhc2tFbGVtZW50cyh0YXNrcywgXCJhY3RpdmVcIik7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZmlsdGVyID09PSBcImRvbmVcIikge1xuICAgICAgICB0YXNrRWxlbWVudHMgPSB0aGlzLmNyZWF0ZVRhc2tFbGVtZW50cyh0YXNrcywgXCJkb25lXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFza0VsZW1lbnRzID0gdGhpcy5jcmVhdGVUYXNrRWxlbWVudHModGFza3MsIFwiYWxsXCIpO1xuICAgICAgfVxuICAgICAgdGFza0VsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB0aGlzLndyYXAuYXBwZW5kKGVsKSk7XG4gICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy53cmFwKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVRhc2tFbGVtZW50cyh0YXNrczogVGFza0RhdGFPYmpbXSwgZmlsdGVyOiBGaWx0ZXIpIHtcbiAgICBjb25zdCB0YXNrRWxlbWVudHNBcnJheTogSFRNTEVsZW1lbnRbXSA9IFtdO1xuICAgIHRoaXMuc29ydEVsZW1lbnRzQnlEYXRlKHRhc2tzKTtcbiAgICB0aGlzLnRhc2tJbnN0YW5jZXMgPSBbXTtcbiAgICB0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICBpZiAoZmlsdGVyID09PSBcImFsbFwiIHx8IHRhc2suc3RhdHVzID09PSBmaWx0ZXIpIHtcbiAgICAgICAgY29uc3QgbmV3VGFzayA9IG5ldyBUYXNrKHRhc2ssIHRoaXMuZGlzcGF0Y2gpO1xuICAgICAgICB0YXNrRWxlbWVudHNBcnJheS5wdXNoKG5ld1Rhc2suZ2V0VmlldygpKTtcbiAgICAgICAgdGhpcy5jdXJyZW50TGVuZ3RoKys7XG4gICAgICAgIHRoaXMudGFza0luc3RhbmNlcy5wdXNoKG5ld1Rhc2spO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0YXNrRWxlbWVudHNBcnJheTtcbiAgfVxuXG4gIHNvcnRFbGVtZW50c0J5RGF0ZSh0YXNrc0FycjogVGFza0RhdGFPYmpbXSkge1xuICAgIGlmICh0aGlzLmlzUmV2ZXJzZWQpIHtcbiAgICAgIHRhc2tzQXJyLnNvcnQoXG4gICAgICAgIChhLCBiKSA9PiBuZXcgRGF0ZShhLmRhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGIuZGF0ZSkuZ2V0VGltZSgpXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXNrc0Fyci5zb3J0KFxuICAgICAgICAoYSwgYikgPT4gbmV3IERhdGUoYi5kYXRlKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmRhdGUpLmdldFRpbWUoKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vc3R5bGVzLnNjc3NcIjtcbmltcG9ydCB7IFN0YXRlT2JqLCBEaXNwYXRjaCwgRmlsdGVyIH0gZnJvbSBcInR5cGVzXCI7XG5pbXBvcnQgeyBjcmVhdGVIdG1sRWxlbWVudCB9IGZyb20gXCIuLi8uLi8uLi91dGlsc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOYXYge1xuICBlbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcbiAgcHJpdmF0ZSBmaWx0ZXJXcmFwOiBIVE1MRGl2RWxlbWVudDtcbiAgcHJpdmF0ZSBidXR0b25BbGw6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIGJ1dHRvbkFjdGl2ZTogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgYnV0dG9uRG9uZTogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgYnV0dG9uUmVzZXJzZTogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIGRpc3BhdGNoOiBEaXNwYXRjaDtcbiAgcHJpdmF0ZSBpc1JldmVyc2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoZGlzcGF0Y2g6IERpc3BhdGNoKSB7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGRpc3BhdGNoO1xuICAgIHRoaXMuZWxlbWVudCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxEaXZFbGVtZW50PihcImRpdlwiLCBbXCJuYXZcIl0pO1xuICAgIHRoaXMuY3JlYXRlRE9NRWxlbWVudCgpO1xuICAgIHRoaXMuYnV0dG9uQWxsLmNsYXNzTGlzdC5hZGQoXCJuYXZfX2J1dHRvbl9zZWxlY3RlZFwiKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgfVxuXG4gIG9uU3RhdGVVcGRhdGUoc3RhdGU6IFN0YXRlT2JqKSB7XG4gICAgW3RoaXMuYnV0dG9uQWxsLCB0aGlzLmJ1dHRvbkFjdGl2ZSwgdGhpcy5idXR0b25Eb25lXS5mb3JFYWNoKChidXR0b24pID0+XG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm5hdl9fYnV0dG9uX3NlbGVjdGVkXCIpXG4gICAgKTtcbiAgICBzd2l0Y2ggKHN0YXRlLmZpbHRlcikge1xuICAgICAgY2FzZSBcImFjdGl2ZVwiOlxuICAgICAgICB0aGlzLmJ1dHRvbkFjdGl2ZS5jbGFzc0xpc3QuYWRkKFwibmF2X19idXR0b25fc2VsZWN0ZWRcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImRvbmVcIjpcbiAgICAgICAgdGhpcy5idXR0b25Eb25lLmNsYXNzTGlzdC5hZGQoXCJuYXZfX2J1dHRvbl9zZWxlY3RlZFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLmJ1dHRvbkFsbC5jbGFzc0xpc3QuYWRkKFwibmF2X19idXR0b25fc2VsZWN0ZWRcIik7XG4gICAgfVxuICAgIHN3aXRjaCAoc3RhdGUuaXNSZXZlcnNlZCkge1xuICAgICAgY2FzZSB0cnVlOlxuICAgICAgICB0aGlzLmJ1dHRvblJlc2Vyc2UuY2xhc3NMaXN0LmFkZChcIm5hdl9fYnV0dG9uX3NlbGVjdGVkXCIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgZmFsc2U6XG4gICAgICAgIHRoaXMuYnV0dG9uUmVzZXJzZS5jbGFzc0xpc3QucmVtb3ZlKFwibmF2X19idXR0b25fc2VsZWN0ZWRcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVET01FbGVtZW50KCkge1xuICAgIHRoaXMuZWxlbWVudC5jaGlsZE5vZGVzLmZvckVhY2goKGVsKSA9PiBlbC5yZW1vdmUpO1xuICAgIHRoaXMuZmlsdGVyV3JhcCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxEaXZFbGVtZW50PihcImRpdlwiLCBbXG4gICAgICBcIm5hdl9fY29udGFpbmVyXCIsXG4gICAgXSk7XG4gICAgdGhpcy5idXR0b25BbGwgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MQnV0dG9uRWxlbWVudCwgRmlsdGVyPihcbiAgICAgIFwiYnV0dG9uXCIsXG4gICAgICBbXCJuYXZfX2J1dHRvblwiXSxcbiAgICAgIFwiQWxsXCIsXG4gICAgICBcImFsbFwiXG4gICAgKTtcbiAgICB0aGlzLmJ1dHRvbkFjdGl2ZSA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxCdXR0b25FbGVtZW50LCBGaWx0ZXI+KFxuICAgICAgXCJidXR0b25cIixcbiAgICAgIFtcIm5hdl9fYnV0dG9uXCJdLFxuICAgICAgXCJBY3RpdmVcIixcbiAgICAgIFwiYWN0aXZlXCJcbiAgICApO1xuICAgIHRoaXMuYnV0dG9uRG9uZSA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxCdXR0b25FbGVtZW50LCBGaWx0ZXI+KFxuICAgICAgXCJidXR0b25cIixcbiAgICAgIFtcIm5hdl9fYnV0dG9uXCJdLFxuICAgICAgXCJEb25lXCIsXG4gICAgICBcImRvbmVcIlxuICAgICk7XG4gICAgdGhpcy5idXR0b25SZXNlcnNlID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KFwiYnV0dG9uXCIsIFtcbiAgICAgIFwibmF2X19idXR0b25cIixcbiAgICAgIFwibmF2X19yZXZlcnNlXCIsXG4gICAgXSk7XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZCh0aGlzLmZpbHRlcldyYXAsIHRoaXMuYnV0dG9uUmVzZXJzZSk7XG4gICAgdGhpcy5maWx0ZXJXcmFwLmFwcGVuZCh0aGlzLmJ1dHRvbkFsbCwgdGhpcy5idXR0b25BY3RpdmUsIHRoaXMuYnV0dG9uRG9uZSk7XG5cbiAgICBbdGhpcy5idXR0b25BbGwsIHRoaXMuYnV0dG9uQWN0aXZlLCB0aGlzLmJ1dHRvbkRvbmVdLmZvckVhY2goKGJ1dHRvbikgPT5cbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBcIkNIQU5HRV9GSUxURVJcIixcbiAgICAgICAgICBwYXlsb2FkOiBidXR0b24uZGF0YXNldC5uYW1lIGFzIEZpbHRlcixcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICk7XG4gICAgdGhpcy5idXR0b25SZXNlcnNlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBzd2l0Y2ggKHRoaXMuaXNSZXZlcnNlZCkge1xuICAgICAgICBjYXNlIHRydWU6XG4gICAgICAgICAgdGhpcy5pc1JldmVyc2VkID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5idXR0b25SZXNlcnNlLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXZfX2J1dHRvbl9zZWxlY3RlZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBmYWxzZTpcbiAgICAgICAgICB0aGlzLmlzUmV2ZXJzZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuYnV0dG9uUmVzZXJzZS5jbGFzc0xpc3QuYWRkKFwibmF2X19idXR0b25fc2VsZWN0ZWRcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJMT0FESU5HX1NUQVRFXCIsXG4gICAgICAgIHBheWxvYWQ6IHRydWVcbiAgICAgIH0pXG4gICAgICB0aGlzLmRpc3BhdGNoKHsgdHlwZTogXCJDSEFOR0VfSVNfUkVWRVJTRURcIiwgcGF5bG9hZDogdGhpcy5pc1JldmVyc2VkIH0pO1xuICAgICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiTE9BRElOR19TVEFURVwiLFxuICAgICAgICBwYXlsb2FkOiBmYWxzZVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9zdHlsZXMuc2Nzc1wiO1xuaW1wb3J0IHsgRGlzcGF0Y2gsIFRhc2tEYXRhT2JqLCBTdGF0dXMsIFN0YXRlT2JqIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBjcmVhdGVIdG1sRWxlbWVudCwgZ2V0UHJldHR5RGF0ZSB9IGZyb20gXCIuLi8uLi8uLi91dGlsc1wiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uLy4uLy4uL2FwaVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYXNrIHtcbiAgZWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XG4gIHByaXZhdGUgd3JhcDogSFRNTERpdkVsZW1lbnQ7XG4gIGRpc3BhdGNoOiBEaXNwYXRjaDtcbiAgcHJpdmF0ZSBzdGF0dXM6IFN0YXR1cztcbiAgcHJpdmF0ZSBpZDogbnVtYmVyO1xuICBwcml2YXRlIGJ1dHRvbkRvbmU6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIGJ1dHRvbkRlbGV0ZTogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIGJpbmRlZEhhbmRsZURvbmU6ICgpID0+IHZvaWQ7XG4gIGJpbmRlZEhhbmRsZURlbGV0ZTogKCkgPT4gdm9pZDtcbiAgdGFza0RhdGE6IFRhc2tEYXRhT2JqO1xuICBzcGlubmVyOiBIVE1MRGl2RWxlbWVudCB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IodGFza0RhdGE6IFRhc2tEYXRhT2JqLCBkaXNwYXRjaDogRGlzcGF0Y2gpIHtcbiAgICB0aGlzLnN0YXR1cyA9IHRhc2tEYXRhLnN0YXR1cztcbiAgICB0aGlzLmRpc3BhdGNoID0gZGlzcGF0Y2g7XG4gICAgdGhpcy5pZCA9IHRhc2tEYXRhLmlkO1xuICAgIHRoaXMuZWxlbWVudCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxEaXZFbGVtZW50PihcImRpdlwiLCBbXCJ0YXNrXCJdKTtcbiAgICB0aGlzLmNyZWF0ZURPTUVsZW1lbnQodGFza0RhdGEpO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICB9XG5cbiAgb25TdGF0ZVVwZGF0ZShzdGF0ZTogU3RhdGVPYmopIHtcbiAgICBjb25zdCBpc0xvYWRpbmcgPSBzdGF0ZS5sb2FkaW5nVGFza3MuaW5jbHVkZXModGhpcy5pZCk7XG4gICAgY29uc3QgbmV3U3RhdHVzID0gc3RhdGUudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PT0gdGhpcy5pZCkuc3RhdHVzO1xuXG4gICAgaWYgKHRoaXMuc3RhdHVzICE9PSBuZXdTdGF0dXMpIHtcbiAgICAgIHRoaXMudXBkYXRlVGFza0VsZW1lbnQoc3RhdGUpO1xuICAgIH1cbiAgICBpZiAoaXNMb2FkaW5nICYmICF0aGlzLnNwaW5uZXIpIHtcbiAgICAgIHRoaXMuYWRkU3Bpbm5lcigpO1xuICAgIH0gZWxzZSBpZiAoIWlzTG9hZGluZyAmJiB0aGlzLnNwaW5uZXIpIHtcbiAgICAgIHRoaXMucmVtb3ZlU3Bpbm5lcigpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRE9NRWxlbWVudCh0YXNrRGF0YTogVGFza0RhdGFPYmopIHtcbiAgICB0aGlzLnRhc2tEYXRhID0gdGFza0RhdGE7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XG4gICAgdGhpcy53cmFwID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcInRhc2tfX3dyYXBcIl0pO1xuICAgIGNvbnN0IGxlZnRDb250YWluZXIgPSBjcmVhdGVIdG1sRWxlbWVudChcImRpdlwiLCBbXCJ0YXNrX19jb250YWluZXJfaW5uZXJcIl0pO1xuICAgIGNvbnN0IHJpZ2h0Q29udGFpbmVyID0gY3JlYXRlSHRtbEVsZW1lbnQoXCJkaXZcIiwgW1widGFza19fY29udGFpbmVyX2lubmVyXCJdKTtcbiAgICBjb25zdCB0YXNrVGV4dCA9IGNyZWF0ZUh0bWxFbGVtZW50KFwiaDJcIiwgW1widGFza19fdGV4dFwiXSwgdGFza0RhdGEubm90ZSk7XG4gICAgY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IGNyZWF0ZUh0bWxFbGVtZW50KFwiZGl2XCIsIFtcbiAgICAgIFwidGFza19fY29udGFpbmVyX2J1dHRvbnNcIixcbiAgICBdKTtcbiAgICB0aGlzLmJ1dHRvbkRvbmUgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MQnV0dG9uRWxlbWVudD4oXG4gICAgICBcImJ1dHRvblwiLFxuICAgICAgW1widGFza19fYnV0dG9uXCJdLFxuICAgICAgXCJEb25lXCJcbiAgICApO1xuICAgIHRoaXMuYnV0dG9uRGVsZXRlID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KFxuICAgICAgXCJidXR0b25cIixcbiAgICAgIFtcInRhc2tfX2J1dHRvblwiXSxcbiAgICAgIFwiRGVsZXRlXCJcbiAgICApO1xuICAgIGxldCBzdGF0dXNFbGVtO1xuICAgIHN3aXRjaCAodGFza0RhdGEuc3RhdHVzKSB7XG4gICAgICBjYXNlIFwiYWN0aXZlXCI6XG4gICAgICAgIHRoaXMuYnV0dG9uRG9uZSA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxCdXR0b25FbGVtZW50LCBTdGF0dXM+KFxuICAgICAgICAgIFwiYnV0dG9uXCIsXG4gICAgICAgICAgW1widGFza19fYnV0dG9uXCJdLFxuICAgICAgICAgIFwiRG9uZVwiLFxuICAgICAgICAgIFwiZG9uZVwiXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuYnV0dG9uRGVsZXRlID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KFxuICAgICAgICAgIFwiYnV0dG9uXCIsXG4gICAgICAgICAgW1widGFza19fYnV0dG9uXCJdLFxuICAgICAgICAgIFwiRGVsZXRlXCJcbiAgICAgICAgKTtcbiAgICAgICAgc3RhdHVzRWxlbSA9IGNyZWF0ZUh0bWxFbGVtZW50KFxuICAgICAgICAgIFwicFwiLFxuICAgICAgICAgIFtcInRhc2tfX3N0YXR1c1wiLCBcInRhc2tfX3N0YXR1c19hY3RpdmVcIl0sXG4gICAgICAgICAgXCJBY3RpdmVcIlxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJkb25lXCI6XG4gICAgICAgIHRoaXMuYnV0dG9uRG9uZSA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxCdXR0b25FbGVtZW50LCBTdGF0dXM+KFxuICAgICAgICAgIFwiYnV0dG9uXCIsXG4gICAgICAgICAgW1widGFza19fYnV0dG9uXCIsIFwidGFza19fYnV0dG9uX2RvbmVcIl0sXG4gICAgICAgICAgXCJVbmRvXCIsXG4gICAgICAgICAgXCJhY3RpdmVcIlxuICAgICAgICApO1xuICAgICAgICB0aGlzLmJ1dHRvbkRlbGV0ZSA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxCdXR0b25FbGVtZW50PihcbiAgICAgICAgICBcImJ1dHRvblwiLFxuICAgICAgICAgIFtcInRhc2tfX2J1dHRvblwiLCBcInRhc2tfX2J1dHRvbl9kb25lXCJdLFxuICAgICAgICAgIFwiRGVsZXRlXCJcbiAgICAgICAgKTtcbiAgICAgICAgc3RhdHVzRWxlbSA9IGNyZWF0ZUh0bWxFbGVtZW50KFxuICAgICAgICAgIFwicFwiLFxuICAgICAgICAgIFtcInRhc2tfX3N0YXR1c1wiLCBcInRhc2tfX3N0YXR1c19kb25lXCJdLFxuICAgICAgICAgIFwiRG9uZVwiXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjb25zdCBkYXRlRWxlbSA9IGNyZWF0ZUh0bWxFbGVtZW50KFxuICAgICAgXCJwXCIsXG4gICAgICBbXCJ0YXNrX19kYXRlXCJdLFxuICAgICAgZ2V0UHJldHR5RGF0ZSh0YXNrRGF0YS5kYXRlKVxuICAgICk7XG5cbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy53cmFwKTtcbiAgICB0aGlzLndyYXAuYXBwZW5kKGxlZnRDb250YWluZXIsIHJpZ2h0Q29udGFpbmVyKTtcbiAgICBsZWZ0Q29udGFpbmVyLmFwcGVuZCh0YXNrVGV4dCwgYnV0dG9uc0NvbnRhaW5lcik7XG4gICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmQodGhpcy5idXR0b25Eb25lLCB0aGlzLmJ1dHRvbkRlbGV0ZSk7XG4gICAgcmlnaHRDb250YWluZXIuYXBwZW5kKHN0YXR1c0VsZW0sIGRhdGVFbGVtKTtcblxuICAgIHRoaXMuYmluZGVkSGFuZGxlRGVsZXRlID0gdGhpcy5oYW5kbGVEZWxldGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmJpbmRlZEhhbmRsZURvbmUgPSB0aGlzLmhhbmRsZURvbmUuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuYnV0dG9uRG9uZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5iaW5kZWRIYW5kbGVEb25lKTtcbiAgICB0aGlzLmJ1dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5iaW5kZWRIYW5kbGVEZWxldGUpO1xuICB9XG5cbiAgaGFuZGxlRGVsZXRlKCkge1xuICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgdHlwZTogXCJMT0FESU5HX1NUQVRFXCIsXG4gICAgICBwYXlsb2FkOiB0cnVlLFxuICAgIH0pO1xuICAgIGFwaVxuICAgICAgLnJlbW92ZSh0aGlzLmlkKVxuICAgICAgLnRoZW4oKGlkKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzKT0+e1xuICAgICAgICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgICAgICAgdHlwZTogXCJERUxFVEVfTk9URVwiLFxuICAgICAgICAgICAgcGF5bG9hZDogaWQsXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gIH1cblxuICBoYW5kbGVEb25lKCkge1xuICAgIHRoaXMudGFza0RhdGEuc3RhdHVzID0gdGhpcy5idXR0b25Eb25lLmRhdGFzZXQubmFtZSBhcyBTdGF0dXM7XG4gICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICB0eXBlOiBcIk5PVEVfTE9BRElOR19TVEFURVwiLFxuICAgICAgcGF5bG9hZDogeyBpZDogdGhpcy5pZCwgc3RhdGU6IHRydWUgfSxcbiAgICB9KTtcbiAgICBhcGlcbiAgICAgIC51cGRhdGUodGhpcy50YXNrRGF0YSlcbiAgICAgIC50aGVuKCh0YXNrRGF0YSkgPT4ge1xuICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBcIkNIQU5HRV9OT1RFX1NUQVRVU1wiLFxuICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgIGlkOiB0YXNrRGF0YS5pZCxcbiAgICAgICAgICAgIHN0YXR1czogdGFza0RhdGEuc3RhdHVzLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgfVxuXG4gIGNsZWFySGFuZGxlcnMoKSB7XG4gICAgaWYgKHRoaXMuYnV0dG9uRGVsZXRlKVxuICAgICAgdGhpcy5idXR0b25EZWxldGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYmluZGVkSGFuZGxlRGVsZXRlKTtcbiAgICBpZiAodGhpcy5idXR0b25Eb25lKVxuICAgICAgdGhpcy5idXR0b25Eb25lLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmJpbmRlZEhhbmRsZURvbmUpO1xuICB9XG5cbiAgYWRkU3Bpbm5lcigpIHtcbiAgICB0aGlzLnNwaW5uZXIgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1widGFza19fc3Bpbm5lclwiXSk7XG4gICAgY29uc3QgdGV4dCA9IGNyZWF0ZUh0bWxFbGVtZW50KFwiaDNcIiwgW1widGFza19fc3Bpbm5lcl9fdGV4dFwiXSwgXCJMb2FkaW5nLi4uXCIpO1xuICAgIGNvbnN0IHR5cGVkID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcbiAgICAgIFwidGFza19fc3Bpbm5lcl93cmFwXCIsXG4gICAgXSk7XG4gICAgdGhpcy5zcGlubmVyLmFwcGVuZCh0eXBlZCk7XG4gICAgdHlwZWQuYXBwZW5kKHRleHQpO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmQodGhpcy5zcGlubmVyKTtcbiAgfVxuXG4gIHJlbW92ZVNwaW5uZXIoKSB7XG4gICAgdGhpcy5zcGlubmVyLnJlbW92ZSgpO1xuICAgIHRoaXMuc3Bpbm5lciA9IG51bGw7XG4gIH1cblxuICB1cGRhdGVUYXNrRWxlbWVudChzdGF0ZTogU3RhdGVPYmopIHtcbiAgICB0aGlzLmNsZWFySGFuZGxlcnMoKTtcbiAgICB0aGlzLnN0YXR1cyA9IHN0YXRlLnRhc2tzLmZpbmQoKHRhc2spID0+IHRhc2suaWQgPT09IHRoaXMuaWQpLnN0YXR1cztcbiAgICB0aGlzLmNyZWF0ZURPTUVsZW1lbnQoc3RhdGUudGFza3MuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PT0gdGhpcy5pZCkpO1xuICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gY3JlYXRlSHRtbEVsZW1lbnQ8VCA9IEhUTUxFbGVtZW50LCBEIGV4dGVuZHMgc3RyaW5nID0gc3RyaW5nPihcbiAgdHlwZTogc3RyaW5nLFxuICBjc3NDbGFzc0FycmF5OiBzdHJpbmdbXSxcbiAgdGV4dD86IHN0cmluZyxcbiAgZGF0YT86IERcbikge1xuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcbiAgY3NzQ2xhc3NBcnJheS5mb3JFYWNoKChzdHlsZSkgPT4gZWxlbWVudC5jbGFzc0xpc3QuYWRkKHN0eWxlKSk7XG4gIGlmICh0ZXh0KSBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcbiAgaWYgKGRhdGEpIGVsZW1lbnQuZGF0YXNldC5uYW1lID0gZGF0YTtcbiAgcmV0dXJuIGVsZW1lbnQgYXMgVDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByZXR0eURhdGUoZGF0ZTogRGF0ZSkge1xuICBjb25zdCBkYXlzQXJyID0gW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VuXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdO1xuICBjb25zdCBtb250aHNBcnIgPSBbXG4gICAgXCJKYW5cIixcbiAgICBcIkZlYlwiLFxuICAgIFwiTWFyXCIsXG4gICAgXCJBcHJcIixcbiAgICBcIk1heVwiLFxuICAgIFwiSnVuXCIsXG4gICAgXCJKdWxcIixcbiAgICBcIkF1Z1wiLFxuICAgIFwiU2VwXCIsXG4gICAgXCJPY3RcIixcbiAgICBcIk5vdlwiLFxuICAgIFwiRGVjXCIsXG4gIF07XG4gIGlmICh0eXBlb2YgZGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgfVxuICBjb25zdCBkYXk6IHN0cmluZyA9IGRheXNBcnJbZGF0ZS5nZXREYXkoKV07XG4gIGNvbnN0IGRhdGVOdW06IG51bWJlciA9IGRhdGUuZ2V0RGF0ZSgpO1xuICBjb25zdCBtb250aDogc3RyaW5nID0gbW9udGhzQXJyW2RhdGUuZ2V0TW9udGgoKV07XG4gIGNvbnN0IHllYXI6IG51bWJlciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gIGxldCBtaW5zID0gZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKTtcbiAgaWYgKG1pbnMubGVuZ3RoIDwgMikgbWlucyA9IFwiMFwiICsgbWlucztcbiAgcmV0dXJuIGAke2RheX0gICAke2RhdGVOdW19ICR7bW9udGh9ICR7eWVhcn0gICAke2hvdXJzfToke21pbnN9YDtcbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgXCIuL3N0eWxlcy5zY3NzXCI7XG5pbXBvcnQgXCIuL25vcm1hbGl6ZS5zY3NzXCI7XG5pbXBvcnQgeyBjcmVhdGVIdG1sRWxlbWVudCB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgZGlzcGF0Y2hlckZ1bmN0aW9uIGZyb20gXCIuL2NvbXBvbmVudHMvZGlzcGF0Y2hlclwiO1xuaW1wb3J0IEZvcm0gZnJvbSBcIi4vY29tcG9uZW50cy92aWV3L2Zvcm1cIjtcbmltcG9ydCBMaXN0IGZyb20gXCIuL2NvbXBvbmVudHMvdmlldy9saXN0XCI7XG5pbXBvcnQgTmF2IGZyb20gXCIuL2NvbXBvbmVudHMvdmlldy9uYXZcIjtcbmltcG9ydCBTdG9yYWdlIGZyb20gXCIuL2NvbXBvbmVudHMvc3RvcmFnZVwiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4vYXBpXCI7XG5pbXBvcnQgeyBTdGF0ZU9iaiB9IGZyb20gXCJ0eXBlc1wiO1xuXG5jb25zdCBpbml0aWFsU3RhdGU6IFN0YXRlT2JqID0ge1xuICBmaWx0ZXI6IFwiYWxsXCIsXG4gIHRhc2tzOiBbXSxcbiAgbG9hZGluZ1N0YXRlOiBmYWxzZSxcbiAgbG9hZGluZ1Rhc2tzOiBbXSxcbiAgaXNSZXZlcnNlZDogZmFsc2UsXG59O1xuXG5jb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIik7XG5jb25zdCBhcHBSb290ID0gY3JlYXRlSHRtbEVsZW1lbnQoXCJkaXZcIiwgW1wiYXBwXCJdKTtcbmJvZHkuYXBwZW5kKGFwcFJvb3QpO1xuXG5jb25zdCBhcHBUaXRsZSA9IGNyZWF0ZUh0bWxFbGVtZW50KFwiaDFcIiwgW1wiYXBwX190aXRsZVwiXSwgXCJUYXNrVHJhY2tlciAxLjBcIik7XG5jb25zdCBjb250YWluZXIgPSBjcmVhdGVIdG1sRWxlbWVudChcImRpdlwiLCBbXCJhcHBfX2NvbnRhaW5lclwiXSk7XG5cbmFwcFJvb3QuYXBwZW5kKGFwcFRpdGxlLCBjb250YWluZXIpO1xuXG5jb25zdCBzdG9yYWdlID0gbmV3IFN0b3JhZ2UoaW5pdGlhbFN0YXRlKTtcbmNvbnN0IGRpc3BhdGNoID0gZGlzcGF0Y2hlckZ1bmN0aW9uKHN0b3JhZ2UpO1xuY29uc3QgbmF2ID0gbmV3IE5hdihkaXNwYXRjaCk7XG5jb25zdCBsaXN0ID0gbmV3IExpc3QoZGlzcGF0Y2gpO1xuY29uc3QgZm9ybSA9IG5ldyBGb3JtKGRpc3BhdGNoKTtcblxuY29uc3Qgdmlld3MgPSBbbmF2LCBsaXN0LCBmb3JtXTtcbnZpZXdzLmZvckVhY2goKHZpZXcpID0+IHtcbiAgc3RvcmFnZS5zdWJzY3JpYmUodmlldy5vblN0YXRlVXBkYXRlLmJpbmQodmlldykpO1xuICBjb250YWluZXIuYXBwZW5kKHZpZXcuZ2V0VmlldygpKTtcbn0pO1xuXG5kaXNwYXRjaCh7XG4gIHR5cGU6IFwiTE9BRElOR19TVEFURVwiLFxuICBwYXlsb2FkOiB0cnVlLFxufSk7XG5cbmFwaS5nZXRBbGwoKS50aGVuKCh0YXNrcykgPT4ge1xuICBkaXNwYXRjaCh7IHR5cGU6IFwiTE9BRF9JTklUSUFMX1RBU0tTXCIsIHBheWxvYWQ6IHRhc2tzIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiYXBpIiwiY29uc3RydWN0b3IiLCJqc29uVGFza3MiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwidGhpcyIsInRhc2tzQXJyIiwiSlNPTiIsInBhcnNlIiwibGVuZ3RoIiwiaWQiLCJub3RlIiwic3RhdHVzIiwiZGF0ZSIsIkRhdGUiLCJtYXAiLCJvYmoiLCJnZXRBbGwiLCJ1cGRhdGVTdG9yZWREYXRhIiwiUHJvbWlzZSIsInJlcyIsInNldFRpbWVvdXQiLCJhZGQiLCJuZXdUYXNrIiwicHVzaCIsInJlbW92ZSIsImZpbHRlciIsInRhc2siLCJ1cGRhdGUiLCJ1cGRhdGVkVGFzayIsImZpbmRUYXNrIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImZpbmQiLCJzdG9yYWdlSW5zdGFuY2UiLCJhY3Rpb24iLCJjdXJyZW50U3RhdGUiLCJnZXRTdGF0ZSIsInVwZGF0ZVN0YXRlIiwidHlwZSIsImxvYWRpbmdTdGF0ZSIsInRhc2tzIiwicGF5bG9hZCIsImxvYWRpbmdUYXNrcyIsImlzUmV2ZXJzZWQiLCJsb2FkaW5nQXJyIiwic2xpY2UiLCJzdGF0ZSIsInJlZHVjZXIiLCJzdWJzY3JpYmVycyIsImZvcmNlZENvbnN0cnVjdG9yIiwiZm9yRWFjaCIsImZuIiwic3Vic2NyaWJlIiwiZm9yY2VVcGRhdGUiLCJkaXNwYXRjaCIsImVsZW1lbnQiLCJjcmVhdGVIdG1sRWxlbWVudCIsImNyZWF0ZURPTUVsZW1lbnQiLCJpbm5lckhUTUwiLCJ3cmFwIiwiaW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJidXR0b25BZGQiLCJjb3VudGVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiY291bnRlclZhbHVlIiwidGV4dENvbnRlbnQiLCJsZW5ndGhXYXJuaW5nIiwiYmluZGVkSGFuZGxlSW5wdXRWYWxpZGF0aW9uIiwiaGFuZGxlSW5wdXRWYWxpZGF0aW9uIiwiYmluZCIsImJpbmRlZEhhbmRsZUNyZWF0ZU5vdGUiLCJoYW5kbGVDcmVhdGVOb3RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFwcGVuZCIsImFwcGVuZENoaWxkIiwib25TdGF0ZVVwZGF0ZSIsImNsZWFySGFuZGxlcnMiLCJ0YXNrc0FycmF5IiwiZ2V0VmlldyIsImlucHV0VmFsaWRhdGlvbiIsImlucHV0RWxlbSIsIndhcm5FbGVtMSIsIndhcm1FbGVtMiIsInZhbHVlIiwidGFza1RleHQiLCJ0b1VwcGVyQ2FzZSIsInJlbW92ZUF0dHJpYnV0ZSIsImNyZWF0ZU5ld05vdGUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic29ydCIsImEiLCJiIiwiZ2V0VGltZSIsInRhc2tPYmoiLCJ0aGVuIiwic3Bpbm5lciIsImN1cnJlbnRMZW5ndGgiLCJ1cGRhdGVMaXN0IiwidGFza0luc3RhbmNlcyIsImFkZFNwaW5uZXIiLCJyZW1vdmVTcGlubmVyIiwiY3JlYXRlVGFza3NMaXN0IiwidGV4dCIsInR5cGVkIiwidGFza0VsZW1lbnRzIiwiY3JlYXRlVGFza0VsZW1lbnRzIiwiZWwiLCJ0YXNrRWxlbWVudHNBcnJheSIsInNvcnRFbGVtZW50c0J5RGF0ZSIsImJ1dHRvbkFsbCIsImJ1dHRvbkFjdGl2ZSIsImJ1dHRvbkRvbmUiLCJidXR0b24iLCJidXR0b25SZXNlcnNlIiwiY2hpbGROb2RlcyIsImZpbHRlcldyYXAiLCJkYXRhc2V0IiwibmFtZSIsInRhc2tEYXRhIiwiaXNMb2FkaW5nIiwiaW5jbHVkZXMiLCJuZXdTdGF0dXMiLCJ1cGRhdGVUYXNrRWxlbWVudCIsImxlZnRDb250YWluZXIiLCJyaWdodENvbnRhaW5lciIsImJ1dHRvbnNDb250YWluZXIiLCJzdGF0dXNFbGVtIiwiYnV0dG9uRGVsZXRlIiwiZGF0ZUVsZW0iLCJnZXRQcmV0dHlEYXRlIiwiYmluZGVkSGFuZGxlRGVsZXRlIiwiaGFuZGxlRGVsZXRlIiwiYmluZGVkSGFuZGxlRG9uZSIsImhhbmRsZURvbmUiLCJjc3NDbGFzc0FycmF5IiwiZGF0YSIsInN0eWxlIiwiZGF5IiwiZ2V0RGF5IiwiZGF0ZU51bSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwiaG91cnMiLCJnZXRIb3VycyIsIm1pbnMiLCJnZXRNaW51dGVzIiwidG9TdHJpbmciLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiYm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJhcHBSb290IiwiYXBwVGl0bGUiLCJjb250YWluZXIiLCJzdG9yYWdlIiwidmlldyJdLCJzb3VyY2VSb290IjoiIn0=