(()=>{"use strict";var t={188:(t,e,n)=>{n.r(e)},540:(t,e,n)=>{n.r(e)},406:(t,e,n)=>{n.r(e)},121:(t,e,n)=>{n.r(e)},502:(t,e,n)=>{n.r(e)},948:(t,e,n)=>{n.r(e)},387:(t,e,n)=>{n.r(e)},752:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0,n(387);const s=n(926),o=n(402),i=n(223),a=n(112),r=n(570);e.App=class{constructor(){this.appRoot=document.createElement("div"),this.appRoot.classList.add("app");const t=document.createElement("h1");t.classList.add("app__title");const e=document.createElement("div");e.classList.add("app__container"),this.appRoot.append(t,e),t.textContent="To-do List";const n=(0,r.getDefaultArray)();if(null==localStorage.getItem("notes")){const t=JSON.stringify(n);localStorage.setItem("notes",t)}const o=new s.Nav;this.list=new a.List;const d=new i.Form,c=this.handleNoteSubmit.bind(this);d.onFormSubmit(c),o.onFilterChange(this.handleFilterChange.bind(this)),e.append(o.container,this.list.container,d.container)}handleNoteSubmit(t){const e=new o.Note(t.note,t.date,t.status,t.id);this.list.addNote(e)}handleFilterChange(t,e){this.list.renderNotes(t,e),this.list.isReversed=e}}},570:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultArray=void 0,e.getDefaultArray=function(){const t=new Date;t.setMonth(0,1),t.setHours(11,20);const e=new Date;return e.setMonth(0,10),e.setHours(15,5),[{id:1,note:"Create new tasks",status:"Active",date:e},{id:2,note:"Create to-do list app",status:"Done",date:t}]}},223:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Form=void 0,n(188);const s=n(62);e.Form=class{constructor(){this.handler=null,this.container=document.createElement("div"),this.container.classList.add("board");const t=document.createElement("input");t.setAttribute("type","textarea"),t.setAttribute("required","true"),t.classList.add("board__input"),this.buttonAdd=document.createElement("button"),this.buttonAdd.classList.add("board__button"),this.buttonAdd.setAttribute("type","submit"),this.buttonAdd.textContent="Add",this.buttonAdd.setAttribute("disabled","true");const e=document.createElement("p");e.classList.add("board__counter"),this.counterValue=0,e.textContent=`${this.counterValue}/55`;const n=document.createElement("p");n.classList.add("board__counter_error","board__warning"),n.textContent="Note should contain from 5 to 55 symbols";const o=new s.Warning(this.buttonAdd);this.container.append(t,e,n,this.buttonAdd,o.container),t.addEventListener("input",(()=>this.countAndUpgradeInput(t,e,n))),this.buttonAdd.addEventListener("click",(e=>{e.preventDefault();const n=JSON.parse(localStorage.getItem("notes"));if(!1===this.checkNoteDuples(n,o.container)){const e=this.createAndSaveNewNote(n);this.handler&&this.handler(e),t.value="",this.counterValue=0,this.noteText=""}}))}countAndUpgradeInput(t,e,n){""===t.value?(this.counterValue=0,this.noteText=""):(this.counterValue=t.value.length,this.counterValue>=55&&(t.value=this.noteText),this.noteText=t.value[0].toUpperCase()+t.value.slice(1),t.value=this.noteText,this.counterValue<5?(e.classList.add("board__counter_error"),n.classList.add("board__warning_visible"),this.buttonAdd.setAttribute("disabled","true")):(e.classList.remove("board__counter_error"),n.classList.remove("board__warning_visible"),this.buttonAdd.removeAttribute("disabled"))),e.textContent=`${this.counterValue}/55`}checkNoteDuples(t,e){let n=t.find((t=>t.note===this.noteText));return void 0!==n&&"Active"===n.status&&(e.classList.add("warning_visible"),this.buttonAdd.setAttribute("disabled","true"),!0)}createAndSaveNewNote(t){const e={id:t[t.length-1].id+1,note:this.noteText,status:"Active",date:new Date};return t.push(e),localStorage.setItem("notes",JSON.stringify(t)),e}onFormSubmit(t){this.handler=t}}},112:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.List=void 0,n(540);const s=n(402);e.List=class{constructor(){this.isReversed=!1,this.container=document.createElement("div"),this.container.classList.add("list"),this.renderNotes("All",!1)}getFromLocalStorage(){this.notesArr=JSON.parse(localStorage.getItem("notes")).map((t=>Object.assign(Object.assign({},t),{date:new Date(t.date)})))}renderNotes(t,e){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild);this.getFromLocalStorage(),"Active"===t?this.notesArr=this.notesArr.filter((t=>"Active"===t.status)):"Done"===t&&(this.notesArr=this.notesArr.filter((t=>"Done"===t.status))),e?this.notesArr.sort(((t,e)=>t.date>e.date?1:-1)):this.notesArr.sort(((t,e)=>t.date<e.date?1:-1)),this.notesArr.forEach((t=>{const e=new s.Note(t.note,t.date,t.status,t.id);this.container.appendChild(e.container)}))}addNote(t){!0===this.isReversed?this.container.appendChild(t.container):this.container.prepend(t.container)}}},926:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Nav=void 0,n(406),e.Nav=class{constructor(){this.filter="All",this.isReversed=!1,this.handler=null,this.container=document.createElement("div"),this.container.classList.add("nav"),this.buttonsContainer=document.createElement("div"),this.buttonsContainer.classList.add("nav__container"),this.buttonReverse=document.createElement("button"),this.buttonReverse.classList.add("nav__button"),this.container.append(this.buttonsContainer,this.buttonReverse);const t=document.createElement("div");t.classList.add("nav__reverse"),this.buttonReverse.appendChild(t),this.buttonReverse.addEventListener("click",(()=>{!1===this.isReversed?this.isReversed=!0:this.isReversed=!1,this.handler(this.filter,this.isReversed)})),this.buttonAll=document.createElement("button"),this.buttonAll.classList.add("nav__button","nav__button_selected"),this.selectedButton=this.buttonAll,this.buttonAll.textContent="All",this.setFilterOnClick(this.buttonAll,"All"),this.buttonToDo=document.createElement("button"),this.buttonToDo.classList.add("nav__button"),this.buttonToDo.textContent="Active",this.setFilterOnClick(this.buttonToDo,"Active"),this.buttonDone=document.createElement("button"),this.buttonDone.classList.add("nav__button"),this.buttonDone.textContent="Done",this.setFilterOnClick(this.buttonDone,"Done"),this.buttonsContainer.append(this.buttonAll,this.buttonToDo,this.buttonDone)}onFilterChange(t){this.handler=t}setFilterOnClick(t,e){t.addEventListener("click",(()=>{this.selectedButton.classList.remove("nav__button_selected"),this.filter=e,this.selectedButton=t,t.classList.add("nav__button_selected"),this.handler(this.filter,this.isReversed)}))}}},402:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Note=void 0,n(121),e.Note=class{constructor(t,e,n,s){this.filter="All",this.id=s,this.container=document.createElement("div"),this.container.classList.add("note");const o=document.createElement("div");o.classList.add("note__container_inner");const i=document.createElement("div");i.classList.add("note__container_inner"),this.container.append(o,i);const a=document.createElement("h2");a.classList.add("note__text"),a.textContent=t,this.noteText=t;const r=document.createElement("div");r.classList.add("note__container_buttons"),o.append(a,r),this.buttonDelete=document.createElement("button"),this.buttonDelete.classList.add("note__button"),this.buttonDelete.textContent="Delete",this.buttonDelete.addEventListener("click",(()=>this.deleteNote())),this.buttonDone=document.createElement("button"),this.buttonDone.classList.add("note__button"),this.buttonDone.textContent="Done",this.buttonDone.addEventListener("click",(()=>this.markNoteAsDone())),r.append(this.buttonDone,this.buttonDelete),this.statusElem=document.createElement("p"),this.statusElem.classList.add("note__status"),this.statusElem.textContent=n,"Active"===n?this.statusElem.classList.add("note__status_active"):(this.statusElem.classList.add("note__status_done"),this.buttonDone.setAttribute("disabled","true"),this.buttonDelete.setAttribute("disabled","true"));const d=document.createElement("p");d.classList.add("note__date"),d.textContent=function(t){const e=["Sun","Mon","Tue","Wen","Thu","Fri","Sat"][t.getDay()],n=t.getDate(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o=t.getFullYear(),i=t.getHours();let a=t.getMinutes().toString();return a.length<2&&(a="0"+a),`${e}   ${n} ${s} ${o}   ${i}:${a}`}(e),i.append(this.statusElem,d)}deleteNote(){const t=JSON.parse(localStorage.getItem("notes")),e=t.findIndex((t=>t.id===this.id));t.splice(e,1);const n=JSON.stringify(t);localStorage.setItem("notes",n),this.container.remove()}markNoteAsDone(){const t=JSON.parse(localStorage.getItem("notes"));t.find((t=>t.id===this.id)).status="Done",this.statusElem.classList.remove("note__status_active"),this.statusElem.classList.add("note__status_done"),this.buttonDone.setAttribute("disabled","true"),this.buttonDelete.setAttribute("disabled","true"),this.statusElem.textContent="Done";const e=JSON.stringify(t);localStorage.setItem("notes",e)}}},62:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Warning=void 0,n(502),e.Warning=class{constructor(t){this.container=document.createElement("div"),this.container.classList.add("warning"),this.button=document.createElement("button"),this.button.classList.add("warning__button"),this.button.addEventListener("click",(()=>{this.container.classList.remove("warning_visible"),t.removeAttribute("disabled")}));const e=document.createElement("p");e.classList.add("warning__text"),e.textContent="Sorry, you already have this task!";const n=document.createElement("p");n.classList.add("warning__text"),n.textContent="You can't create it agian until it isn't done/deleted :(",this.container.append(this.button,e,n)}}}},e={};function n(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,n),i.exports}n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const t=n(752);n(387),n(948);const e=document.querySelector("body"),s=new t.App;e.appendChild(s.appRoot)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPQyxlQUFlUCxFQUFTLGFBQWMsQ0FBRXRFLE9BQU8sR0FBTyxFLE1DTDlELGVBQ0EsT0FDQSxPQUVBLE1BQU04RSxFQUFPNUksU0FBUzZJLGNBQWMsUUFDOUJDLEVBQU0sSUFBSSxFQUFBQyxJQUNoQkgsRUFBS3JELFlBQVl1RCxFQUFJL0ksUSIsInNvdXJjZXMiOlsid2VicGFjazovL29seWFsYXNzLy4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly9vbHlhbGFzcy8uL3NyYy9jb21wb25lbnRzL2RlZmF1bHROb3Rlcy9pbmRleC50cyIsIndlYnBhY2s6Ly9vbHlhbGFzcy8uL3NyYy9jb21wb25lbnRzL2Zvcm0vaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2x5YWxhc3MvLi9zcmMvY29tcG9uZW50cy9saXN0L2luZGV4LnRzIiwid2VicGFjazovL29seWFsYXNzLy4vc3JjL2NvbXBvbmVudHMvbmF2L2luZGV4LnRzIiwid2VicGFjazovL29seWFsYXNzLy4vc3JjL2NvbXBvbmVudHMvbm90ZS9pbmRleC50cyIsIndlYnBhY2s6Ly9vbHlhbGFzcy8uL3NyYy9jb21wb25lbnRzL3dhcm5pbmcvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb2x5YWxhc3Mvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb2x5YWxhc3Mvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9vbHlhbGFzcy8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCIuL3N0eWxlcy5zY3NzXCI7XG5pbXBvcnQgeyBOYXYgfSBmcm9tIFwiLi9jb21wb25lbnRzL25hdlwiO1xuaW1wb3J0IHsgTm90ZSB9IGZyb20gXCIuL2NvbXBvbmVudHMvbm90ZVwiO1xuaW1wb3J0IHsgRm9ybSB9IGZyb20gXCIuL2NvbXBvbmVudHMvZm9ybVwiO1xuaW1wb3J0IHsgTGlzdCB9IGZyb20gXCIuL2NvbXBvbmVudHMvbGlzdFwiO1xuaW1wb3J0IHsgRGF0YU9iaiwgRmlsdGVyIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRBcnJheSB9IGZyb20gXCIuL2NvbXBvbmVudHMvZGVmYXVsdE5vdGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBBcHAge1xuICBhcHBSb290OiBIVE1MRGl2RWxlbWVudDtcbiAgbGlzdDogTGlzdDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmFwcFJvb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRoaXMuYXBwUm9vdC5jbGFzc0xpc3QuYWRkKFwiYXBwXCIpO1xuXG4gICAgY29uc3QgYXBwVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG4gICAgYXBwVGl0bGUuY2xhc3NMaXN0LmFkZChcImFwcF9fdGl0bGVcIik7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcImFwcF9fY29udGFpbmVyXCIpO1xuXG4gICAgdGhpcy5hcHBSb290LmFwcGVuZChhcHBUaXRsZSwgY29udGFpbmVyKTtcbiAgICBhcHBUaXRsZS50ZXh0Q29udGVudCA9IFwiVG8tZG8gTGlzdFwiO1xuXG4gICAgY29uc3Qgbm90ZXNBcnIgPSBnZXREZWZhdWx0QXJyYXkoKTtcblxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm5vdGVzXCIpID09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3Qgbm90ZXNKc29uID0gSlNPTi5zdHJpbmdpZnkobm90ZXNBcnIpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJub3Rlc1wiLCBub3Rlc0pzb24pO1xuICAgIH1cblxuICAgIGNvbnN0IG5hdmlnYXRpb24gPSBuZXcgTmF2KCk7XG4gICAgdGhpcy5saXN0ID0gbmV3IExpc3QoKTtcbiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm0oKTtcbiAgICBjb25zdCBiaW5kZWRNZXRob2QgPSB0aGlzLmhhbmRsZU5vdGVTdWJtaXQuYmluZCh0aGlzKTtcbiAgICBmb3JtLm9uRm9ybVN1Ym1pdChiaW5kZWRNZXRob2QpO1xuICAgIG5hdmlnYXRpb24ub25GaWx0ZXJDaGFuZ2UodGhpcy5oYW5kbGVGaWx0ZXJDaGFuZ2UuYmluZCh0aGlzKSk7XG5cbiAgICBjb250YWluZXIuYXBwZW5kKG5hdmlnYXRpb24uY29udGFpbmVyLCB0aGlzLmxpc3QuY29udGFpbmVyLCBmb3JtLmNvbnRhaW5lcik7XG4gIH1cblxuICBoYW5kbGVOb3RlU3VibWl0KG5vdGVEYXRhOiBEYXRhT2JqKSB7XG4gICAgY29uc3QgbmV3Tm90ZSA9IG5ldyBOb3RlKFxuICAgICAgbm90ZURhdGEubm90ZSxcbiAgICAgIG5vdGVEYXRhLmRhdGUsXG4gICAgICBub3RlRGF0YS5zdGF0dXMsXG4gICAgICBub3RlRGF0YS5pZFxuICAgICk7XG4gICAgdGhpcy5saXN0LmFkZE5vdGUobmV3Tm90ZSk7XG4gIH1cblxuICBoYW5kbGVGaWx0ZXJDaGFuZ2Uoc3RhdHVzRmlsdGVyOiBGaWx0ZXIsIGlzUmV2ZXJzZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmxpc3QucmVuZGVyTm90ZXMoc3RhdHVzRmlsdGVyLCBpc1JldmVyc2VkKTtcbiAgICB0aGlzLmxpc3QuaXNSZXZlcnNlZCA9IGlzUmV2ZXJzZWQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IERhdGFPYmogfSBmcm9tIFwidHlwZXNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRBcnJheSgpOiBBcnJheTxEYXRhT2JqPiB7XG4gIGNvbnN0IGRhdGUxID0gbmV3IERhdGUoKTtcbiAgZGF0ZTEuc2V0TW9udGgoMCwgMSk7XG4gIGRhdGUxLnNldEhvdXJzKDExLCAyMCk7XG5cbiAgY29uc3QgZGF0ZTIgPSBuZXcgRGF0ZSgpO1xuICBkYXRlMi5zZXRNb250aCgwLCAxMCk7XG4gIGRhdGUyLnNldEhvdXJzKDE1LCA1KTtcblxuICBjb25zdCBub3Rlc0FycjogQXJyYXk8RGF0YU9iaj4gPSBbXG4gICAge1xuICAgICAgaWQ6IDEsXG4gICAgICBub3RlOiBcIkNyZWF0ZSBuZXcgdGFza3NcIixcbiAgICAgIHN0YXR1czogXCJBY3RpdmVcIixcbiAgICAgIGRhdGU6IGRhdGUyLFxuICAgIH0sXG5cbiAgICB7XG4gICAgICBpZDogMixcbiAgICAgIG5vdGU6IFwiQ3JlYXRlIHRvLWRvIGxpc3QgYXBwXCIsXG4gICAgICBzdGF0dXM6IFwiRG9uZVwiLFxuICAgICAgZGF0ZTogZGF0ZTEsXG4gICAgfSxcbiAgXTtcblxuICByZXR1cm4gbm90ZXNBcnI7XG59XG4iLCJpbXBvcnQgXCIuL3N0eWxlcy5zY3NzXCI7XG5pbXBvcnQgeyBEYXRhT2JqLCBTdWJtaXRIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBXYXJuaW5nIH0gZnJvbSBcIi4uL3dhcm5pbmdcIjtcblxuZXhwb3J0IGNsYXNzIEZvcm0ge1xuICBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICBwcml2YXRlIGJ1dHRvbkFkZDogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgbm90ZVRleHQ6IHN0cmluZztcbiAgcHJpdmF0ZSBjb3VudGVyVmFsdWU6IG51bWJlcjtcbiAgaGFuZGxlcjogU3VibWl0SGFuZGxlciB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYm9hcmRcIik7XG5cbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dGFyZWFcIik7XG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgXCJ0cnVlXCIpO1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoXCJib2FyZF9faW5wdXRcIik7XG5cbiAgICB0aGlzLmJ1dHRvbkFkZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgdGhpcy5idXR0b25BZGQuY2xhc3NMaXN0LmFkZChcImJvYXJkX19idXR0b25cIik7XG4gICAgdGhpcy5idXR0b25BZGQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICB0aGlzLmJ1dHRvbkFkZC50ZXh0Q29udGVudCA9IFwiQWRkXCI7XG4gICAgdGhpcy5idXR0b25BZGQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuXG4gICAgY29uc3QgY291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGNvdW50ZXIuY2xhc3NMaXN0LmFkZChcImJvYXJkX19jb3VudGVyXCIpO1xuICAgIHRoaXMuY291bnRlclZhbHVlID0gMDtcbiAgICBjb3VudGVyLnRleHRDb250ZW50ID0gYCR7dGhpcy5jb3VudGVyVmFsdWV9LzU1YDtcbiAgICBjb25zdCBsZW5ndGhXYXJuaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgbGVuZ3RoV2FybmluZy5jbGFzc0xpc3QuYWRkKFwiYm9hcmRfX2NvdW50ZXJfZXJyb3JcIiwgXCJib2FyZF9fd2FybmluZ1wiKTtcbiAgICBsZW5ndGhXYXJuaW5nLnRleHRDb250ZW50ID0gXCJOb3RlIHNob3VsZCBjb250YWluIGZyb20gNSB0byA1NSBzeW1ib2xzXCI7XG4gICAgY29uc3Qgd2FybmluZ0FsZXJ0ID0gbmV3IFdhcm5pbmcodGhpcy5idXR0b25BZGQpO1xuXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKFxuICAgICAgaW5wdXQsXG4gICAgICBjb3VudGVyLFxuICAgICAgbGVuZ3RoV2FybmluZyxcbiAgICAgIHRoaXMuYnV0dG9uQWRkLFxuICAgICAgd2FybmluZ0FsZXJ0LmNvbnRhaW5lclxuICAgICk7XG5cbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT5cbiAgICAgIHRoaXMuY291bnRBbmRVcGdyYWRlSW5wdXQoaW5wdXQsIGNvdW50ZXIsIGxlbmd0aFdhcm5pbmcpXG4gICAgKTtcbiAgICB0aGlzLmJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGRhdGFBcnJheSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJub3Rlc1wiKSk7XG4gICAgICBpZiAodGhpcy5jaGVja05vdGVEdXBsZXMoZGF0YUFycmF5LCB3YXJuaW5nQWxlcnQuY29udGFpbmVyKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgbmV3Tm90ZSA9IHRoaXMuY3JlYXRlQW5kU2F2ZU5ld05vdGUoZGF0YUFycmF5KTtcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxlcikge1xuICAgICAgICAgIHRoaXMuaGFuZGxlcihuZXdOb3RlKTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMuY291bnRlclZhbHVlID0gMDtcbiAgICAgICAgdGhpcy5ub3RlVGV4dCA9IFwiXCI7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNvdW50QW5kVXBncmFkZUlucHV0KFxuICAgIGlucHV0RWxlbTogSFRNTElucHV0RWxlbWVudCxcbiAgICB3YXJuRWxlbTE6IEhUTUxQYXJhZ3JhcGhFbGVtZW50LFxuICAgIHdhcm1FbGVtMjogSFRNTFBhcmFncmFwaEVsZW1lbnRcbiAgKTogdm9pZCB7XG4gICAgaWYgKGlucHV0RWxlbS52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgdGhpcy5jb3VudGVyVmFsdWUgPSAwO1xuICAgICAgdGhpcy5ub3RlVGV4dCA9IFwiXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY291bnRlclZhbHVlID0gaW5wdXRFbGVtLnZhbHVlLmxlbmd0aDtcbiAgICAgIGlmICh0aGlzLmNvdW50ZXJWYWx1ZSA+PSA1NSkgaW5wdXRFbGVtLnZhbHVlID0gdGhpcy5ub3RlVGV4dDtcbiAgICAgIHRoaXMubm90ZVRleHQgPVxuICAgICAgICBpbnB1dEVsZW0udmFsdWVbMF0udG9VcHBlckNhc2UoKSArIGlucHV0RWxlbS52YWx1ZS5zbGljZSgxKTtcbiAgICAgIGlucHV0RWxlbS52YWx1ZSA9IHRoaXMubm90ZVRleHQ7XG4gICAgICBpZiAodGhpcy5jb3VudGVyVmFsdWUgPCA1KSB7XG4gICAgICAgIHdhcm5FbGVtMS5jbGFzc0xpc3QuYWRkKFwiYm9hcmRfX2NvdW50ZXJfZXJyb3JcIik7XG4gICAgICAgIHdhcm1FbGVtMi5jbGFzc0xpc3QuYWRkKFwiYm9hcmRfX3dhcm5pbmdfdmlzaWJsZVwiKTtcbiAgICAgICAgdGhpcy5idXR0b25BZGQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybkVsZW0xLmNsYXNzTGlzdC5yZW1vdmUoXCJib2FyZF9fY291bnRlcl9lcnJvclwiKTtcbiAgICAgICAgd2FybUVsZW0yLmNsYXNzTGlzdC5yZW1vdmUoXCJib2FyZF9fd2FybmluZ192aXNpYmxlXCIpO1xuICAgICAgICB0aGlzLmJ1dHRvbkFkZC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgd2FybkVsZW0xLnRleHRDb250ZW50ID0gYCR7dGhpcy5jb3VudGVyVmFsdWV9LzU1YDtcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tOb3RlRHVwbGVzKFxuICAgIGRhdGFBcnJheTogQXJyYXk8RGF0YU9iaj4sXG4gICAgd2FybkFsZXJ0RWxlbTogSFRNTERpdkVsZW1lbnRcbiAgKTogYm9vbGVhbiB7XG4gICAgbGV0IGV4aXN0aW5nTm90ZSA9IGRhdGFBcnJheS5maW5kKFxuICAgICAgKGRhdGFBcnJheSkgPT4gZGF0YUFycmF5Lm5vdGUgPT09IHRoaXMubm90ZVRleHRcbiAgICApO1xuICAgIGlmIChleGlzdGluZ05vdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGV4aXN0aW5nTm90ZS5zdGF0dXMgPT09IFwiQWN0aXZlXCIpIHtcbiAgICAgICAgd2FybkFsZXJ0RWxlbS5jbGFzc0xpc3QuYWRkKFwid2FybmluZ192aXNpYmxlXCIpO1xuICAgICAgICB0aGlzLmJ1dHRvbkFkZC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVBbmRTYXZlTmV3Tm90ZShkYXRhQXJyYXk6IEFycmF5PERhdGFPYmo+KSB7XG4gICAgY29uc3QgcHJldkluZGV4ID0gZGF0YUFycmF5W2RhdGFBcnJheS5sZW5ndGggLSAxXS5pZDtcbiAgICBjb25zdCBub3RlT2JqID0ge1xuICAgICAgaWQ6IHByZXZJbmRleCArIDEsXG4gICAgICBub3RlOiB0aGlzLm5vdGVUZXh0LFxuICAgICAgc3RhdHVzOiBcIkFjdGl2ZVwiLFxuICAgICAgZGF0ZTogbmV3IERhdGUoKSxcbiAgICB9O1xuICAgIGRhdGFBcnJheS5wdXNoKG5vdGVPYmopO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibm90ZXNcIiwgSlNPTi5zdHJpbmdpZnkoZGF0YUFycmF5KSk7XG4gICAgcmV0dXJuIG5vdGVPYmo7XG4gIH1cblxuICBvbkZvcm1TdWJtaXQoaGFuZGxlcjogU3VibWl0SGFuZGxlcikge1xuICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vc3R5bGVzLnNjc3NcIjtcbmltcG9ydCB7IE5vdGUgfSBmcm9tIFwiLi4vbm90ZVwiO1xuaW1wb3J0IHsgRGF0YU9iaiB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgTGlzdCB7XG4gIGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQ7XG4gIG5vdGVzQXJyOiBBcnJheTxEYXRhT2JqPjtcbiAgaXNSZXZlcnNlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibGlzdFwiKTtcblxuICAgIHRoaXMucmVuZGVyTm90ZXMoXCJBbGxcIiwgZmFsc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRGcm9tTG9jYWxTdG9yYWdlKCkge1xuICAgIHRoaXMubm90ZXNBcnIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibm90ZXNcIikpLm1hcChcbiAgICAgIChvYmo6IERhdGFPYmopID0+ICh7IC4uLm9iaiwgZGF0ZTogbmV3IERhdGUob2JqLmRhdGUpIH0pXG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlck5vdGVzKHN0YXR1c0ZpbHRlcjogc3RyaW5nLCBpc1JldmVyc2VkOiBib29sZWFuKSB7XG4gICAgd2hpbGUgKHRoaXMuY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICB0aGlzLmdldEZyb21Mb2NhbFN0b3JhZ2UoKTtcblxuICAgIGlmIChzdGF0dXNGaWx0ZXIgPT09IFwiQWN0aXZlXCIpIHtcbiAgICAgIHRoaXMubm90ZXNBcnIgPSB0aGlzLm5vdGVzQXJyLmZpbHRlcigoZSkgPT4gZS5zdGF0dXMgPT09IFwiQWN0aXZlXCIpO1xuICAgIH0gZWxzZSBpZiAoc3RhdHVzRmlsdGVyID09PSBcIkRvbmVcIikge1xuICAgICAgdGhpcy5ub3Rlc0FyciA9IHRoaXMubm90ZXNBcnIuZmlsdGVyKChlKSA9PiBlLnN0YXR1cyA9PT0gXCJEb25lXCIpO1xuICAgIH1cblxuICAgIGlmIChpc1JldmVyc2VkKSB7XG4gICAgICB0aGlzLm5vdGVzQXJyLnNvcnQoKG5vdGUxLCBub3RlMikgPT4gKG5vdGUxLmRhdGUgPiBub3RlMi5kYXRlID8gMSA6IC0xKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubm90ZXNBcnIuc29ydCgobm90ZTEsIG5vdGUyKSA9PiAobm90ZTEuZGF0ZSA8IG5vdGUyLmRhdGUgPyAxIDogLTEpKTtcbiAgICB9XG5cbiAgICB0aGlzLm5vdGVzQXJyLmZvckVhY2goKGUpID0+IHtcbiAgICAgIGNvbnN0IG5vdGU6IE5vdGUgPSBuZXcgTm90ZShlLm5vdGUsIGUuZGF0ZSwgZS5zdGF0dXMsIGUuaWQpO1xuICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQobm90ZS5jb250YWluZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFkZE5vdGUobm90ZTogTm90ZSkge1xuICAgIHRoaXMuaXNSZXZlcnNlZCA9PT0gdHJ1ZVxuICAgICAgPyB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChub3RlLmNvbnRhaW5lcilcbiAgICAgIDogdGhpcy5jb250YWluZXIucHJlcGVuZChub3RlLmNvbnRhaW5lcik7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vc3R5bGVzLnNjc3NcIjtcbmltcG9ydCB7IEZpbHRlckNoYW5nZUhhbmRsZXIsIEZpbHRlciB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgTmF2IHtcbiAgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcbiAgYnV0dG9uc0NvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQ7XG4gIGJ1dHRvbkFsbDogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIGJ1dHRvblRvRG86IEhUTUxCdXR0b25FbGVtZW50O1xuICBidXR0b25Eb25lOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgYnV0dG9uUmV2ZXJzZTogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIGZpbHRlcjogRmlsdGVyID0gXCJBbGxcIjtcbiAgaXNSZXZlcnNlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBoYW5kbGVyOiBGaWx0ZXJDaGFuZ2VIYW5kbGVyIHwgbnVsbCA9IG51bGw7XG4gIHNlbGVjdGVkQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm5hdlwiKTtcbiAgICB0aGlzLmJ1dHRvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRoaXMuYnV0dG9uc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibmF2X19jb250YWluZXJcIik7XG4gICAgdGhpcy5idXR0b25SZXZlcnNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICB0aGlzLmJ1dHRvblJldmVyc2UuY2xhc3NMaXN0LmFkZChcIm5hdl9fYnV0dG9uXCIpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLmJ1dHRvbnNDb250YWluZXIsIHRoaXMuYnV0dG9uUmV2ZXJzZSk7XG5cbiAgICBjb25zdCBidXR0b25JbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGJ1dHRvbkltZy5jbGFzc0xpc3QuYWRkKFwibmF2X19yZXZlcnNlXCIpO1xuICAgIHRoaXMuYnV0dG9uUmV2ZXJzZS5hcHBlbmRDaGlsZChidXR0b25JbWcpO1xuICAgIHRoaXMuYnV0dG9uUmV2ZXJzZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5pc1JldmVyc2VkID09PSBmYWxzZVxuICAgICAgICA/ICh0aGlzLmlzUmV2ZXJzZWQgPSB0cnVlKVxuICAgICAgICA6ICh0aGlzLmlzUmV2ZXJzZWQgPSBmYWxzZSk7XG4gICAgICB0aGlzLmhhbmRsZXIodGhpcy5maWx0ZXIsIHRoaXMuaXNSZXZlcnNlZCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmJ1dHRvbkFsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgdGhpcy5idXR0b25BbGwuY2xhc3NMaXN0LmFkZChcIm5hdl9fYnV0dG9uXCIsIFwibmF2X19idXR0b25fc2VsZWN0ZWRcIik7XG4gICAgdGhpcy5zZWxlY3RlZEJ1dHRvbiA9IHRoaXMuYnV0dG9uQWxsO1xuICAgIHRoaXMuYnV0dG9uQWxsLnRleHRDb250ZW50ID0gXCJBbGxcIjtcbiAgICB0aGlzLnNldEZpbHRlck9uQ2xpY2sodGhpcy5idXR0b25BbGwsIFwiQWxsXCIpO1xuXG4gICAgdGhpcy5idXR0b25Ub0RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICB0aGlzLmJ1dHRvblRvRG8uY2xhc3NMaXN0LmFkZChcIm5hdl9fYnV0dG9uXCIpO1xuICAgIHRoaXMuYnV0dG9uVG9Eby50ZXh0Q29udGVudCA9IFwiQWN0aXZlXCI7XG4gICAgdGhpcy5zZXRGaWx0ZXJPbkNsaWNrKHRoaXMuYnV0dG9uVG9EbywgXCJBY3RpdmVcIik7XG5cbiAgICB0aGlzLmJ1dHRvbkRvbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIHRoaXMuYnV0dG9uRG9uZS5jbGFzc0xpc3QuYWRkKFwibmF2X19idXR0b25cIik7XG4gICAgdGhpcy5idXR0b25Eb25lLnRleHRDb250ZW50ID0gXCJEb25lXCI7XG4gICAgdGhpcy5zZXRGaWx0ZXJPbkNsaWNrKHRoaXMuYnV0dG9uRG9uZSwgXCJEb25lXCIpO1xuXG4gICAgdGhpcy5idXR0b25zQ29udGFpbmVyLmFwcGVuZChcbiAgICAgIHRoaXMuYnV0dG9uQWxsLFxuICAgICAgdGhpcy5idXR0b25Ub0RvLFxuICAgICAgdGhpcy5idXR0b25Eb25lXG4gICAgKTtcbiAgfVxuXG4gIG9uRmlsdGVyQ2hhbmdlKGhhbmRsZXI6IEZpbHRlckNoYW5nZUhhbmRsZXIpIHtcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xuICB9XG5cbiAgc2V0RmlsdGVyT25DbGljayhidXR0b246IEhUTUxCdXR0b25FbGVtZW50LCBuYW1lOiBGaWx0ZXIpIHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm5hdl9fYnV0dG9uX3NlbGVjdGVkXCIpO1xuICAgICAgdGhpcy5maWx0ZXIgPSBuYW1lO1xuICAgICAgdGhpcy5zZWxlY3RlZEJ1dHRvbiA9IGJ1dHRvbjtcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibmF2X19idXR0b25fc2VsZWN0ZWRcIik7XG4gICAgICB0aGlzLmhhbmRsZXIodGhpcy5maWx0ZXIsIHRoaXMuaXNSZXZlcnNlZCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vc3R5bGVzLnNjc3NcIjtcbmltcG9ydCB7IERhdGFPYmosIEZpbHRlciB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgTm90ZSB7XG4gIGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQ7XG4gIGJ1dHRvbkRlbGV0ZTogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIGJ1dHRvbkRvbmU6IEhUTUxCdXR0b25FbGVtZW50O1xuICBub3RlVGV4dDogc3RyaW5nO1xuICBzdGF0dXNFbGVtOiBIVE1MUGFyYWdyYXBoRWxlbWVudDtcbiAgZmlsdGVyOiBGaWx0ZXIgPSBcIkFsbFwiO1xuICBpZDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHRleHQ6IHN0cmluZywgZGF0ZTogRGF0ZSwgc3RhdHVzOiBzdHJpbmcsIGlkOiBudW1iZXIpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG5cbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm5vdGVcIik7XG4gICAgY29uc3QgbGVmdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbGVmdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibm90ZV9fY29udGFpbmVyX2lubmVyXCIpO1xuICAgIGNvbnN0IHJpZ2h0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICByaWdodENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibm90ZV9fY29udGFpbmVyX2lubmVyXCIpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChsZWZ0Q29udGFpbmVyLCByaWdodENvbnRhaW5lcik7XG5cbiAgICBjb25zdCBub3RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgIG5vdGUuY2xhc3NMaXN0LmFkZChcIm5vdGVfX3RleHRcIik7XG4gICAgbm90ZS50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgdGhpcy5ub3RlVGV4dCA9IHRleHQ7XG4gICAgY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgYnV0dG9uc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibm90ZV9fY29udGFpbmVyX2J1dHRvbnNcIik7XG4gICAgbGVmdENvbnRhaW5lci5hcHBlbmQobm90ZSwgYnV0dG9uc0NvbnRhaW5lcik7XG5cbiAgICB0aGlzLmJ1dHRvbkRlbGV0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgdGhpcy5idXR0b25EZWxldGUuY2xhc3NMaXN0LmFkZChcIm5vdGVfX2J1dHRvblwiKTtcbiAgICB0aGlzLmJ1dHRvbkRlbGV0ZS50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCI7XG4gICAgdGhpcy5idXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuZGVsZXRlTm90ZSgpKTtcblxuICAgIHRoaXMuYnV0dG9uRG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgdGhpcy5idXR0b25Eb25lLmNsYXNzTGlzdC5hZGQoXCJub3RlX19idXR0b25cIik7XG4gICAgdGhpcy5idXR0b25Eb25lLnRleHRDb250ZW50ID0gXCJEb25lXCI7XG4gICAgdGhpcy5idXR0b25Eb25lLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLm1hcmtOb3RlQXNEb25lKCkpO1xuXG4gICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmQodGhpcy5idXR0b25Eb25lLCB0aGlzLmJ1dHRvbkRlbGV0ZSk7XG5cbiAgICB0aGlzLnN0YXR1c0VsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICB0aGlzLnN0YXR1c0VsZW0uY2xhc3NMaXN0LmFkZChcIm5vdGVfX3N0YXR1c1wiKTtcbiAgICB0aGlzLnN0YXR1c0VsZW0udGV4dENvbnRlbnQgPSBzdGF0dXM7XG4gICAgaWYgKHN0YXR1cyA9PT0gXCJBY3RpdmVcIikge1xuICAgICAgdGhpcy5zdGF0dXNFbGVtLmNsYXNzTGlzdC5hZGQoXCJub3RlX19zdGF0dXNfYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXR1c0VsZW0uY2xhc3NMaXN0LmFkZChcIm5vdGVfX3N0YXR1c19kb25lXCIpO1xuICAgICAgdGhpcy5idXR0b25Eb25lLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcbiAgICAgIHRoaXMuYnV0dG9uRGVsZXRlLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGRhdGVFbGVtLmNsYXNzTGlzdC5hZGQoXCJub3RlX19kYXRlXCIpO1xuICAgIGRhdGVFbGVtLnRleHRDb250ZW50ID0gZ2V0UHJldHR5RGF0ZShkYXRlKTtcblxuICAgIHJpZ2h0Q29udGFpbmVyLmFwcGVuZCh0aGlzLnN0YXR1c0VsZW0sIGRhdGVFbGVtKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVsZXRlTm90ZSgpIHtcbiAgICBjb25zdCBub3Rlc0FycjogQXJyYXk8RGF0YU9iaj4gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibm90ZXNcIikpO1xuICAgIGNvbnN0IG5vdGVJbmRleCA9IG5vdGVzQXJyLmZpbmRJbmRleCgoZSkgPT4gZS5pZCA9PT0gdGhpcy5pZCk7XG4gICAgbm90ZXNBcnIuc3BsaWNlKG5vdGVJbmRleCwgMSk7XG4gICAgY29uc3QgSnNvbkFyciA9IEpTT04uc3RyaW5naWZ5KG5vdGVzQXJyKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm5vdGVzXCIsIEpzb25BcnIpO1xuICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBtYXJrTm90ZUFzRG9uZSgpIHtcbiAgICBjb25zdCBub3Rlc0FycjogQXJyYXk8RGF0YU9iaj4gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibm90ZXNcIikpO1xuICAgIG5vdGVzQXJyLmZpbmQoKGUpID0+IGUuaWQgPT09IHRoaXMuaWQpLnN0YXR1cyA9IFwiRG9uZVwiO1xuICAgIHRoaXMuc3RhdHVzRWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwibm90ZV9fc3RhdHVzX2FjdGl2ZVwiKTtcbiAgICB0aGlzLnN0YXR1c0VsZW0uY2xhc3NMaXN0LmFkZChcIm5vdGVfX3N0YXR1c19kb25lXCIpO1xuICAgIHRoaXMuYnV0dG9uRG9uZS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgdGhpcy5idXR0b25EZWxldGUuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgIHRoaXMuc3RhdHVzRWxlbS50ZXh0Q29udGVudCA9IFwiRG9uZVwiO1xuICAgIGNvbnN0IEpzb25BcnIgPSBKU09OLnN0cmluZ2lmeShub3Rlc0Fycik7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJub3Rlc1wiLCBKc29uQXJyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRQcmV0dHlEYXRlKGRhdGU6IERhdGUpIHtcbiAgY29uc3QgZGF5c0FyciA9IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlblwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXTtcbiAgY29uc3QgbW9udGhzQXJyID0gW1xuICAgIFwiSmFuXCIsXG4gICAgXCJGZWJcIixcbiAgICBcIk1hclwiLFxuICAgIFwiQXByXCIsXG4gICAgXCJNYXlcIixcbiAgICBcIkp1blwiLFxuICAgIFwiSnVsXCIsXG4gICAgXCJBdWdcIixcbiAgICBcIlNlcFwiLFxuICAgIFwiT2N0XCIsXG4gICAgXCJOb3ZcIixcbiAgICBcIkRlY1wiLFxuICBdO1xuICBjb25zdCBkYXk6IHN0cmluZyA9IGRheXNBcnJbZGF0ZS5nZXREYXkoKV07XG4gIGNvbnN0IGRhdGVOdW06IG51bWJlciA9IGRhdGUuZ2V0RGF0ZSgpO1xuICBjb25zdCBtb250aDogc3RyaW5nID0gbW9udGhzQXJyW2RhdGUuZ2V0TW9udGgoKV07XG4gIGNvbnN0IHllYXI6IG51bWJlciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgY29uc3QgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gIGxldCBtaW5zID0gZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKTtcbiAgaWYgKG1pbnMubGVuZ3RoIDwgMikgbWlucyA9IFwiMFwiICsgbWlucztcbiAgcmV0dXJuIGAke2RheX0gICAke2RhdGVOdW19ICR7bW9udGh9ICR7eWVhcn0gICAke2hvdXJzfToke21pbnN9YDtcbn1cbiIsImltcG9ydCBcIi4vc3R5bGVzLnNjc3NcIjtcblxuZXhwb3J0IGNsYXNzIFdhcm5pbmcge1xuICBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICBidXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKGFkZEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQpIHtcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIndhcm5pbmdcIik7XG5cbiAgICB0aGlzLmJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgdGhpcy5idXR0b24uY2xhc3NMaXN0LmFkZChcIndhcm5pbmdfX2J1dHRvblwiKTtcbiAgICB0aGlzLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcIndhcm5pbmdfdmlzaWJsZVwiKTtcbiAgICAgIGFkZEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHdhcm5pbmdUZXh0MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHdhcm5pbmdUZXh0MS5jbGFzc0xpc3QuYWRkKFwid2FybmluZ19fdGV4dFwiKTtcbiAgICB3YXJuaW5nVGV4dDEudGV4dENvbnRlbnQgPSBcIlNvcnJ5LCB5b3UgYWxyZWFkeSBoYXZlIHRoaXMgdGFzayFcIjtcbiAgICBjb25zdCB3YXJuaW5nVGV4dDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICB3YXJuaW5nVGV4dDIuY2xhc3NMaXN0LmFkZChcIndhcm5pbmdfX3RleHRcIik7XG4gICAgd2FybmluZ1RleHQyLnRleHRDb250ZW50ID1cbiAgICAgIFwiWW91IGNhbid0IGNyZWF0ZSBpdCBhZ2lhbiB1bnRpbCBpdCBpc24ndCBkb25lL2RlbGV0ZWQgOihcIjtcblxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZCh0aGlzLmJ1dHRvbiwgd2FybmluZ1RleHQxLCB3YXJuaW5nVGV4dDIpO1xuICB9XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vYXBwXCI7XG5pbXBvcnQgXCIuL3N0eWxlcy5zY3NzXCI7XG5pbXBvcnQgXCIuL25vcm1hbGl6ZS5zY3NzXCI7XG5cbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcbmJvZHkuYXBwZW5kQ2hpbGQoYXBwLmFwcFJvb3QpO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwidGhpcyIsImFwcFJvb3QiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBUaXRsZSIsImNvbnRhaW5lciIsImFwcGVuZCIsInRleHRDb250ZW50Iiwibm90ZXNBcnIiLCJnZXREZWZhdWx0QXJyYXkiLCJ1bmRlZmluZWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwibm90ZXNKc29uIiwiSlNPTiIsInN0cmluZ2lmeSIsInNldEl0ZW0iLCJuYXZpZ2F0aW9uIiwiTmF2IiwibGlzdCIsIkxpc3QiLCJmb3JtIiwiRm9ybSIsImJpbmRlZE1ldGhvZCIsImhhbmRsZU5vdGVTdWJtaXQiLCJiaW5kIiwib25Gb3JtU3VibWl0Iiwib25GaWx0ZXJDaGFuZ2UiLCJoYW5kbGVGaWx0ZXJDaGFuZ2UiLCJub3RlRGF0YSIsIm5ld05vdGUiLCJOb3RlIiwibm90ZSIsImRhdGUiLCJzdGF0dXMiLCJpZCIsImFkZE5vdGUiLCJzdGF0dXNGaWx0ZXIiLCJpc1JldmVyc2VkIiwicmVuZGVyTm90ZXMiLCJkYXRlMSIsIkRhdGUiLCJzZXRNb250aCIsInNldEhvdXJzIiwiZGF0ZTIiLCJoYW5kbGVyIiwiaW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJidXR0b25BZGQiLCJjb3VudGVyIiwiY291bnRlclZhbHVlIiwibGVuZ3RoV2FybmluZyIsIndhcm5pbmdBbGVydCIsIldhcm5pbmciLCJhZGRFdmVudExpc3RlbmVyIiwiY291bnRBbmRVcGdyYWRlSW5wdXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJkYXRhQXJyYXkiLCJwYXJzZSIsImNoZWNrTm90ZUR1cGxlcyIsImNyZWF0ZUFuZFNhdmVOZXdOb3RlIiwidmFsdWUiLCJub3RlVGV4dCIsImlucHV0RWxlbSIsIndhcm5FbGVtMSIsIndhcm1FbGVtMiIsImxlbmd0aCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJyZW1vdmUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ3YXJuQWxlcnRFbGVtIiwiZXhpc3RpbmdOb3RlIiwiZmluZCIsIm5vdGVPYmoiLCJwdXNoIiwiZ2V0RnJvbUxvY2FsU3RvcmFnZSIsIm1hcCIsIm9iaiIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImZpbHRlciIsInNvcnQiLCJub3RlMSIsIm5vdGUyIiwiZm9yRWFjaCIsImFwcGVuZENoaWxkIiwicHJlcGVuZCIsImJ1dHRvbnNDb250YWluZXIiLCJidXR0b25SZXZlcnNlIiwiYnV0dG9uSW1nIiwiYnV0dG9uQWxsIiwic2VsZWN0ZWRCdXR0b24iLCJzZXRGaWx0ZXJPbkNsaWNrIiwiYnV0dG9uVG9EbyIsImJ1dHRvbkRvbmUiLCJidXR0b24iLCJuYW1lIiwidGV4dCIsImxlZnRDb250YWluZXIiLCJyaWdodENvbnRhaW5lciIsImJ1dHRvbkRlbGV0ZSIsImRlbGV0ZU5vdGUiLCJtYXJrTm90ZUFzRG9uZSIsInN0YXR1c0VsZW0iLCJkYXRlRWxlbSIsImRheSIsImdldERheSIsImRhdGVOdW0iLCJnZXREYXRlIiwibW9udGgiLCJnZXRNb250aCIsInllYXIiLCJnZXRGdWxsWWVhciIsImhvdXJzIiwiZ2V0SG91cnMiLCJtaW5zIiwiZ2V0TWludXRlcyIsInRvU3RyaW5nIiwiZ2V0UHJldHR5RGF0ZSIsIm5vdGVJbmRleCIsImZpbmRJbmRleCIsInNwbGljZSIsIkpzb25BcnIiLCJhZGRCdXR0b24iLCJ3YXJuaW5nVGV4dDEiLCJ3YXJuaW5nVGV4dDIiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiYm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJhcHAiLCJBcHAiXSwic291cmNlUm9vdCI6IiJ9