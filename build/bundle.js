(()=>{"use strict";var t={389:(t,e,s)=>{s.r(e)},100:(t,e,s)=>{s.r(e)},629:(t,e,s)=>{s.r(e)},35:(t,e,s)=>{s.r(e)},948:(t,e,s)=>{s.r(e)},387:(t,e,s)=>{s.r(e)},395:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.api=void 0;const a=s(570);e.api=new a.default},570:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){const t=localStorage.getItem("tasks");this.tasksArr=JSON.parse(t),this.tasksArr&&this.tasksArr.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.date)})))}getAll(){return this.updateStoredData(),new Promise((t=>{setTimeout((()=>{t(this.tasksArr)}),500)}))}add(t){return new Promise((e=>{setTimeout((()=>{this.tasksArr?this.tasksArr.push(t):this.tasksArr=[t],e(t),this.updateStoredData()}),1e3)}))}remove(t){return new Promise((e=>{this.tasksArr=this.tasksArr.filter((e=>e.id!==t)),this.updateStoredData(),setTimeout((()=>{e(t)}),1e3)}))}update(t){return this.findTask(t.id).status=t.status,new Promise((e=>{setTimeout((()=>{e(t),this.updateStoredData()}),1e3)}))}updateStoredData(){localStorage.setItem("tasks",JSON.stringify(this.tasksArr))}findTask(t){return this.tasksArr.find((e=>e.id===t))}}},954:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e){const s=t.getState();t.updateState(function(t,e){switch(e.type){case"LOAD_INITIAL_TASKS":return Object.assign(Object.assign({},t),{loadingState:!1,tasks:e.payload});case"ADD_NOTE":return Object.assign(Object.assign({},t),{loadingState:!1,tasks:[...t.tasks,e.payload]});case"DELETE_NOTE":return Object.assign(Object.assign({},t),{loadingState:!1,tasks:t.tasks.filter((t=>t.id!==e.payload))});case"CHANGE_NOTE_STATUS":return Object.assign(Object.assign({},t),{loadingTasks:t.loadingTasks.filter((t=>t!==e.payload.id)),tasks:t.tasks.map((t=>t.id===e.payload.id?Object.assign(Object.assign({},t),{status:e.payload.status}):t))});case"CHANGE_FILTER":return Object.assign(Object.assign({},t),{filter:e.payload});case"CHANGE_IS_REVERSED":return Object.assign(Object.assign({},t),{isReversed:e.payload});case"LOADING_STATE":return Object.assign(Object.assign({},t),{loadingState:e.payload});case"NOTE_LOADING_STATE":let s=t.loadingTasks.slice(0);return e.payload.state?s.push(e.payload.id):s=s.filter((t=>t!==e.payload.id)),Object.assign(Object.assign({},t),{loadingTasks:s});default:return t}}(JSON.parse(JSON.stringify(s)),e))}}},586:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.subscribers=[],this.state=t}forcedConstructor(t){this.state=t}getState(){return this.state}updateState(t){this.state=t,this.subscribers.forEach((t=>{t(this.state)}))}subscribe(t){this.subscribers.push(t)}forceUpdate(){this.subscribers.forEach((t=>{t(this.state)}))}}},584:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(389);const a=s(593),n=s(395);e.default=class{constructor(t){this.element=(0,a.createHtmlElement)("div",["form"]),this.dispatch=t}createDOMElement(){this.element.innerHTML="",this.wrap=(0,a.createHtmlElement)("div",["form__wrap"]),this.input=(0,a.createHtmlElement)("input",["form__input"]),this.input.setAttribute("type","textarea"),this.input.setAttribute("required","true"),this.buttonAdd=(0,a.createHtmlElement)("button",["form__button"],"Add"),this.buttonAdd.setAttribute("type","submit"),this.buttonAdd.setAttribute("disabled","true"),this.counter=document.createElement("p"),this.counter.classList.add("board__counter"),this.counterValue=0,this.counter.textContent=`${this.counterValue}/55`,this.lengthWarning=(0,a.createHtmlElement)("p",["form__counter_error","form__warning"],"Note should contain from 5 to 55 symbols"),this.bindedHandleInputValidation=this.handleInputValidation.bind(this),this.bindedHandleCreateNote=this.handleCreateNote.bind(this),this.input.addEventListener("input",this.bindedHandleInputValidation),this.buttonAdd.addEventListener("click",this.bindedHandleCreateNote),this.wrap.append(this.input,this.counter,this.lengthWarning,this.buttonAdd),this.element.appendChild(this.wrap)}onStateUpdate(t){this.clearHandlers(),t.tasks&&(this.tasksArray=t.tasks.slice(0),this.createDOMElement())}getView(){return this.element}inputValidation(t,e,s){""===t.value?(this.counterValue=0,this.taskText=""):(this.counterValue=t.value.length,this.counterValue>=55&&(t.value=this.taskText),this.taskText=t.value[0].toUpperCase()+t.value.slice(1),t.value=this.taskText,this.counterValue<5?(e.classList.add("form__counter_error"),s.classList.add("form__warning_visible"),this.buttonAdd.setAttribute("disabled","true")):(e.classList.remove("form__counter_error"),s.classList.remove("form__warning_visible"),this.buttonAdd.removeAttribute("disabled"))),e.textContent=`${this.counterValue}/55`}handleInputValidation(){this.inputValidation(this.input,this.counter,this.lengthWarning)}handleCreateNote(){this.createNewNote(this.tasksArray)}clearHandlers(){this.input&&this.input.removeEventListener("input",this.bindedHandleInputValidation),this.buttonAdd&&this.buttonAdd.removeEventListener("click",this.bindedHandleCreateNote)}createNewNote(t){t.sort(((t,e)=>new Date(t.date).getTime()-new Date(e.date).getTime()));const e={id:t.length?t[t.length-1].id+1:1,note:this.taskText,status:"active",date:new Date};this.dispatch({type:"LOADING_STATE",payload:!0}),n.api.add(e).then((t=>{this.dispatch({type:"ADD_NOTE",payload:t})}))}}},348:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(100);const a=s(593),n=s(42);e.default=class{constructor(t){this.spinner=null,this.dispatch=t,this.element=(0,a.createHtmlElement)("div",["list"])}onStateUpdate(t){if(t.tasks){const e=t.loadingState;this.currentLength!==t.tasks.length||this.filter!==t.filter||this.isReversed!==t.isReversed?(this.updateList(t),this.spinner=null):this.taskInstances.forEach((e=>e.onStateUpdate(t))),e&&!this.spinner&&this.addSpinner(),this.spinner&&!t.loadingState&&this.removeSpinner()}}getView(){return this.element}updateList(t){this.filter=t.filter,this.isReversed=t.isReversed,this.taskInstances&&this.taskInstances.forEach((t=>{t.clearHandlers()})),this.createTasksList(t.tasks)}addSpinner(){this.spinner=(0,a.createHtmlElement)("div",["task__spinner"]);const t=(0,a.createHtmlElement)("h3",["task__spinner__text"],"Loading..."),e=(0,a.createHtmlElement)("div",["task__spinner_wrap"]);this.spinner.append(e),e.append(t),this.wrap.append(this.spinner)}removeSpinner(){this.spinner.remove(),this.spinner=null}createTasksList(t){if(this.element.innerHTML="",this.currentLength=0,this.wrap=(0,a.createHtmlElement)("div",["list__wrap"]),t){let e=[];e="active"===this.filter?this.createTaskElements(t,"active"):"done"===this.filter?this.createTaskElements(t,"done"):this.createTaskElements(t,"all"),e.forEach((t=>this.wrap.append(t))),this.element.appendChild(this.wrap)}}createTaskElements(t,e){const s=[];return this.sortElementsByDate(t),this.taskInstances=[],t.forEach((t=>{if("all"===e||t.status===e){const e=new n.default(t,this.dispatch);s.push(e.getView()),this.currentLength++,this.taskInstances.push(e)}})),s}sortElementsByDate(t){this.isReversed?t.sort(((t,e)=>new Date(t.date).getTime()-new Date(e.date).getTime())):t.sort(((t,e)=>new Date(e.date).getTime()-new Date(t.date).getTime()))}}},678:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(629);const a=s(593);e.default=class{constructor(t){this.isReversed=!1,this.dispatch=t,this.element=(0,a.createHtmlElement)("div",["nav"]),this.createDOMElement(),this.buttonAll.classList.add("nav__button_selected")}getView(){return this.element}onStateUpdate(t){switch([this.buttonAll,this.buttonActive,this.buttonDone].forEach((t=>t.classList.remove("nav__button_selected"))),t.filter){case"active":this.buttonActive.classList.add("nav__button_selected");break;case"done":this.buttonDone.classList.add("nav__button_selected");break;default:this.buttonAll.classList.add("nav__button_selected")}switch(t.isReversed){case!0:this.buttonReserse.classList.add("nav__button_selected");break;case!1:this.buttonReserse.classList.remove("nav__button_selected")}}createDOMElement(){this.element.childNodes.forEach((t=>t.remove)),this.filterWrap=(0,a.createHtmlElement)("div",["nav__container"]),this.buttonAll=(0,a.createHtmlElement)("button",["nav__button"],"All","all"),this.buttonActive=(0,a.createHtmlElement)("button",["nav__button"],"Active","active"),this.buttonDone=(0,a.createHtmlElement)("button",["nav__button"],"Done","done"),this.buttonReserse=(0,a.createHtmlElement)("button",["nav__button","nav__reverse"]),this.element.append(this.filterWrap,this.buttonReserse),this.filterWrap.append(this.buttonAll,this.buttonActive,this.buttonDone),[this.buttonAll,this.buttonActive,this.buttonDone].forEach((t=>t.addEventListener("click",(()=>{this.dispatch({type:"CHANGE_FILTER",payload:t.dataset.name})})))),this.buttonReserse.addEventListener("click",(()=>{switch(this.isReversed){case!0:this.isReversed=!1,this.buttonReserse.classList.remove("nav__button_selected");break;case!1:this.isReversed=!0,this.buttonReserse.classList.add("nav__button_selected")}this.dispatch({type:"LOADING_STATE",payload:!0}),this.dispatch({type:"CHANGE_IS_REVERSED",payload:this.isReversed}),this.dispatch({type:"LOADING_STATE",payload:!1})}))}}},42:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),s(35);const a=s(593),n=s(395);e.default=class{constructor(t,e){this.status=t.status,this.dispatch=e,this.id=t.id,this.element=(0,a.createHtmlElement)("div",["task"]),this.createDOMElement(t)}getView(){return this.element}onStateUpdate(t){const e=t.loadingTasks.includes(this.id),s=t.tasks.find((t=>t.id===this.id)).status;this.status!==s&&this.updateTaskElement(t),e&&!this.spinner?this.addSpinner():!e&&this.spinner&&this.removeSpinner()}createDOMElement(t){this.taskData=t,this.element.innerHTML="",this.wrap=(0,a.createHtmlElement)("div",["task__wrap"]);const e=(0,a.createHtmlElement)("div",["task__container_inner"]),s=(0,a.createHtmlElement)("div",["task__container_inner"]),n=(0,a.createHtmlElement)("h2",["task__text"],t.note),i=(0,a.createHtmlElement)("div",["task__container_buttons"]);let r;switch(this.buttonDone=(0,a.createHtmlElement)("button",["task__button"],"Done"),this.buttonDelete=(0,a.createHtmlElement)("button",["task__button"],"Delete"),t.status){case"active":this.buttonDone=(0,a.createHtmlElement)("button",["task__button"],"Done","done"),this.buttonDelete=(0,a.createHtmlElement)("button",["task__button"],"Delete"),r=(0,a.createHtmlElement)("p",["task__status","task__status_active"],"Active");break;case"done":this.buttonDone=(0,a.createHtmlElement)("button",["task__button","task__button_done"],"Undo","active"),this.buttonDelete=(0,a.createHtmlElement)("button",["task__button","task__button_done"],"Delete"),r=(0,a.createHtmlElement)("p",["task__status","task__status_done"],"Done")}const d=(0,a.createHtmlElement)("p",["task__date"],(0,a.getPrettyDate)(t.date));this.element.appendChild(this.wrap),this.wrap.append(e,s),e.append(n,i),i.append(this.buttonDone,this.buttonDelete),s.append(r,d),this.bindedHandleDelete=this.handleDelete.bind(this),this.bindedHandleDone=this.handleDone.bind(this),this.buttonDone.addEventListener("click",this.bindedHandleDone),this.buttonDelete.addEventListener("click",this.bindedHandleDelete)}handleDelete(){this.dispatch({type:"LOADING_STATE",payload:!0}),n.api.remove(this.id).then((t=>new Promise((e=>{this.dispatch({type:"DELETE_NOTE",payload:t})}))))}handleDone(){this.taskData.status=this.buttonDone.dataset.name,this.dispatch({type:"NOTE_LOADING_STATE",payload:{id:this.id,state:!0}}),n.api.update(this.taskData).then((t=>{this.dispatch({type:"CHANGE_NOTE_STATUS",payload:{id:t.id,status:t.status}})}))}clearHandlers(){this.buttonDelete&&this.buttonDelete.removeEventListener("click",this.bindedHandleDelete),this.buttonDone&&this.buttonDone.removeEventListener("click",this.bindedHandleDone)}addSpinner(){this.spinner=(0,a.createHtmlElement)("div",["task__spinner"]);const t=(0,a.createHtmlElement)("h3",["task__spinner__text"],"Loading..."),e=(0,a.createHtmlElement)("div",["task__spinner_wrap"]);this.spinner.append(e),e.append(t),this.element.append(this.spinner)}removeSpinner(){this.spinner.remove(),this.spinner=null}updateTaskElement(t){this.clearHandlers(),this.status=t.tasks.find((t=>t.id===this.id)).status,this.createDOMElement(t.tasks.find((t=>t.id===this.id)))}}},593:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getPrettyDate=e.createHtmlElement=void 0,e.createHtmlElement=function(t,e,s,a){const n=document.createElement(t);return e.forEach((t=>n.classList.add(t))),s&&(n.textContent=s),a&&(n.dataset.name=a),n},e.getPrettyDate=function(t){"string"==typeof t&&(t=new Date(t));const e=["Sun","Mon","Tue","Wen","Thu","Fri","Sat"][t.getDay()],s=t.getDate(),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],n=t.getFullYear(),i=t.getHours();let r=t.getMinutes().toString();return r.length<2&&(r="0"+r),`${e}   ${s} ${a} ${n}   ${i}:${r}`}}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,s),i.exports}s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{s(387),s(948);const t=s(593),e=s(954),a=s(584),n=s(348),i=s(678),r=s(586),d=s(395),l=document.querySelector("body"),o=(0,t.createHtmlElement)("div",["app"]);l.append(o);const h=(0,t.createHtmlElement)("h1",["app__title"],"To-do List"),c=(0,t.createHtmlElement)("div",["app__container"]);o.append(h,c);const u=new r.default({filter:"all",tasks:[],loadingState:!1,loadingTasks:[],isReversed:!1}),p=(0,e.default)(u);[new i.default(p),new n.default(p),new a.default(p)].forEach((t=>{u.subscribe(t.onStateUpdate.bind(t)),c.append(t.getView())})),p({type:"LOADING_STATE",payload:!0}),d.api.getAll().then((t=>{p({type:"LOAD_INITIAL_TASKS",payload:t})}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WSxJQUFBcEgsbUJBQWtCLE1BQU8sQ0FBQyxtQkFFNUNrSCxFQUFROUYsT0FBTytGLEVBQVVDLEdBRXpCLE1BQU1DLEVBQVUsSUFBSSxVQWpCVyxDQUM3QnJKLE9BQVEsTUFDUmdCLE1BQU8sR0FDUEQsY0FBYyxFQUNkRyxhQUFjLEdBQ2RDLFlBQVksSUFhUlcsR0FBVyxhQUFtQnVILEdBS3RCLENBSkYsSUFBSSxVQUFJdkgsR0FDUCxJQUFJLFVBQUtBLEdBQ1QsSUFBSSxVQUFLQSxJQUdoQkosU0FBUzRILElBQ2JELEVBQVF6SCxVQUFVMEgsRUFBS2hHLGNBQWNOLEtBQUtzRyxJQUMxQ0YsRUFBVWhHLE9BQU9rRyxFQUFLN0YsVUFBVSxJQUdsQzNCLEVBQVMsQ0FDUGhCLEtBQU0sZ0JBQ05HLFNBQVMsSUFHWCxFQUFBeEMsSUFBSWEsU0FBU3FGLE1BQU0zRCxJQUNqQmMsRUFBUyxDQUFFaEIsS0FBTSxxQkFBc0JHLFFBQVNELEdBQVEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL29seWFsYXNzLy4vc3JjL2FwaS9pbmRleC50cyIsIndlYnBhY2s6Ly9vbHlhbGFzcy8uL3NyYy9hcGkvbG9jYWxBcGkudHMiLCJ3ZWJwYWNrOi8vb2x5YWxhc3MvLi9zcmMvY29tcG9uZW50cy9kaXNwYXRjaGVyL2luZGV4LnRzIiwid2VicGFjazovL29seWFsYXNzLy4vc3JjL2NvbXBvbmVudHMvc3RvcmFnZS9pbmRleC50cyIsIndlYnBhY2s6Ly9vbHlhbGFzcy8uL3NyYy9jb21wb25lbnRzL3ZpZXcvZm9ybS9pbmRleC50cyIsIndlYnBhY2s6Ly9vbHlhbGFzcy8uL3NyYy9jb21wb25lbnRzL3ZpZXcvbGlzdC9pbmRleC50cyIsIndlYnBhY2s6Ly9vbHlhbGFzcy8uL3NyYy9jb21wb25lbnRzL3ZpZXcvbmF2L2luZGV4LnRzIiwid2VicGFjazovL29seWFsYXNzLy4vc3JjL2NvbXBvbmVudHMvdmlldy90YXNrL2luZGV4LnRzIiwid2VicGFjazovL29seWFsYXNzLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL29seWFsYXNzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29seWFsYXNzL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb2x5YWxhc3MvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExvY2FsQXBpIGZyb20gXCIuL2xvY2FsQXBpXCI7XG5pbXBvcnQgU2VydmVyQXBpIGZyb20gXCIuL3NlcnZlckFwaVwiO1xuXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IExvY2FsQXBpKCk7XG4vLyBjaGFuZ2UgXCJuZXcgTG9jYWxBcGkoKVwiIHRvIFwibmV3IFNlcnZlckFwaSgpXCIgdG8gc3dpdGNoIGZyb20gbG9jYWxzdG9yYWdlIHRvIFNlcnZlciBtZW1vcml6aW5nXG4vLyB0byB1c2Ugc2VydmVyIG1lbW9yaXppbmcgeW91IGFsc28gbmVlZCB0byBsb2NhbGx5IGluc3RhbGwgSlNPTiBTZXJ2ZXIgd2l0aCBcIm5wbSBpbnN0YWxsIGpzb24tc2VydmVyXCIgYW5kIHN0YXJ0IGl0IHdpdGggXCJucHgganNvbi1zZXJ2ZXIgLS13YXRjaCBkYi5qc29uXCJcbiIsImltcG9ydCB7IFRhc2tEYXRhT2JqIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgQXBpSW50ZXJmYWNlIGZyb20gXCIuL2FwaUludGVyZmFjZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhbEFwaSBpbXBsZW1lbnRzIEFwaUludGVyZmFjZSB7XG4gIHRhc2tzQXJyOiBUYXNrRGF0YU9ialtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGpzb25UYXNrcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGFza3NcIik7XG4gICAgdGhpcy50YXNrc0FyciA9IEpTT04ucGFyc2UoanNvblRhc2tzKTtcbiAgICBpZiAodGhpcy50YXNrc0Fycikge1xuICAgICAgdGhpcy50YXNrc0Fyci5tYXAoKG9iajogVGFza0RhdGFPYmopID0+ICh7XG4gICAgICAgIC4uLm9iaixcbiAgICAgICAgZGF0ZTogbmV3IERhdGUob2JqLmRhdGUpLFxuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuXG4gIGdldEFsbCgpIHtcbiAgICB0aGlzLnVwZGF0ZVN0b3JlZERhdGEoKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VGFza0RhdGFPYmpbXT4oKHJlcykgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHJlcyh0aGlzLnRhc2tzQXJyKTtcbiAgICAgIH0sIDUwMCk7XG4gICAgfSk7XG4gIH1cblxuICBhZGQobmV3VGFzazogVGFza0RhdGFPYmopIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VGFza0RhdGFPYmo+KChyZXMpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy50YXNrc0Fycikge1xuICAgICAgICAgIHRoaXMudGFza3NBcnIucHVzaChuZXdUYXNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnRhc2tzQXJyID0gW25ld1Rhc2tdO1xuICAgICAgICB9XG4gICAgICAgIHJlcyhuZXdUYXNrKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdG9yZWREYXRhKCk7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZShpZDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPG51bWJlcj4oKHJlcykgPT4ge1xuICAgICAgdGhpcy50YXNrc0FyciA9IHRoaXMudGFza3NBcnIuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmlkICE9PSBpZCk7XG4gICAgICB0aGlzLnVwZGF0ZVN0b3JlZERhdGEoKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICByZXMoaWQpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGUodXBkYXRlZFRhc2s6IFRhc2tEYXRhT2JqKSB7XG4gICAgdGhpcy5maW5kVGFzayh1cGRhdGVkVGFzay5pZCkuc3RhdHVzID0gdXBkYXRlZFRhc2suc3RhdHVzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUYXNrRGF0YU9iaj4oKHJlcykgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHJlcyh1cGRhdGVkVGFzayk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVTdG9yZWREYXRhKCk7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3RvcmVkRGF0YSgpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRhc2tzXCIsIEpTT04uc3RyaW5naWZ5KHRoaXMudGFza3NBcnIpKTtcbiAgfVxuXG4gIHByaXZhdGUgZmluZFRhc2soaWQ6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLnRhc2tzQXJyLmZpbmQoKHRhc2spID0+IHRhc2suaWQgPT09IGlkKTtcbiAgfVxufVxuIiwiaW1wb3J0IFN0b3JhZ2UgZnJvbSBcIi4uL3N0b3JhZ2VcIjtcbmltcG9ydCB7IEFjdGlvbiwgRGlzcGF0Y2gsIFN0YXRlT2JqIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5cbmZ1bmN0aW9uIHJlZHVjZXIoY3VycmVudFN0YXRlOiBTdGF0ZU9iaiwgYWN0aW9uOiBBY3Rpb24pOiBTdGF0ZU9iaiB7XG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIFwiTE9BRF9JTklUSUFMX1RBU0tTXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgIGxvYWRpbmdTdGF0ZTogZmFsc2UsXG4gICAgICAgIHRhc2tzOiBhY3Rpb24ucGF5bG9hZCxcbiAgICAgIH07XG4gICAgY2FzZSBcIkFERF9OT1RFXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgIGxvYWRpbmdTdGF0ZTogZmFsc2UsXG4gICAgICAgIHRhc2tzOiBbLi4uY3VycmVudFN0YXRlLnRhc2tzLCBhY3Rpb24ucGF5bG9hZF0sXG4gICAgICB9O1xuXG4gICAgY2FzZSBcIkRFTEVURV9OT1RFXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jdXJyZW50U3RhdGUsXG4gICAgICAgIGxvYWRpbmdTdGF0ZTogZmFsc2UsXG4gICAgICAgIHRhc2tzOiBjdXJyZW50U3RhdGUudGFza3MuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmlkICE9PSBhY3Rpb24ucGF5bG9hZCksXG4gICAgICB9O1xuXG4gICAgY2FzZSBcIkNIQU5HRV9OT1RFX1NUQVRVU1wiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY3VycmVudFN0YXRlLFxuICAgICAgICBsb2FkaW5nVGFza3M6IGN1cnJlbnRTdGF0ZS5sb2FkaW5nVGFza3MuZmlsdGVyKChpZCk9PiBpZCE9PWFjdGlvbi5wYXlsb2FkLmlkKSxcbiAgICAgICAgdGFza3M6IGN1cnJlbnRTdGF0ZS50YXNrcy5tYXAoKHRhc2spID0+XG4gICAgICAgICAgdGFzay5pZCA9PT0gYWN0aW9uLnBheWxvYWQuaWRcbiAgICAgICAgICAgID8geyAuLi50YXNrLCBzdGF0dXM6IGFjdGlvbi5wYXlsb2FkLnN0YXR1cyB9XG4gICAgICAgICAgICA6IHRhc2tcbiAgICAgICAgKSxcbiAgICAgIH07XG5cbiAgICBjYXNlIFwiQ0hBTkdFX0ZJTFRFUlwiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY3VycmVudFN0YXRlLFxuICAgICAgICBmaWx0ZXI6IGFjdGlvbi5wYXlsb2FkLFxuICAgICAgfTtcblxuICAgIGNhc2UgXCJDSEFOR0VfSVNfUkVWRVJTRURcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgaXNSZXZlcnNlZDogYWN0aW9uLnBheWxvYWQsXG4gICAgICB9O1xuXG4gICAgY2FzZSBcIkxPQURJTkdfU1RBVEVcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmN1cnJlbnRTdGF0ZSxcbiAgICAgICAgbG9hZGluZ1N0YXRlOiBhY3Rpb24ucGF5bG9hZCxcbiAgICAgIH07XG5cbiAgICBjYXNlIFwiTk9URV9MT0FESU5HX1NUQVRFXCI6XG4gICAgICBsZXQgbG9hZGluZ0FyciA9IGN1cnJlbnRTdGF0ZS5sb2FkaW5nVGFza3Muc2xpY2UoMCk7XG4gICAgICBpZiAoYWN0aW9uLnBheWxvYWQuc3RhdGUpIHtcbiAgICAgICAgbG9hZGluZ0Fyci5wdXNoKGFjdGlvbi5wYXlsb2FkLmlkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvYWRpbmdBcnIgPSBsb2FkaW5nQXJyLmZpbHRlcigodGFzaykgPT4gdGFzayAhPT0gYWN0aW9uLnBheWxvYWQuaWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHsgLi4uY3VycmVudFN0YXRlLCBsb2FkaW5nVGFza3M6IGxvYWRpbmdBcnIgfTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gY3VycmVudFN0YXRlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRpc3BhdGNoZXJGdW5jdGlvbihzdG9yYWdlSW5zdGFuY2U6IFN0b3JhZ2UpOiBEaXNwYXRjaCB7XG4gIHJldHVybiBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb246IEFjdGlvbikge1xuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHN0b3JhZ2VJbnN0YW5jZS5nZXRTdGF0ZSgpO1xuICAgIHN0b3JhZ2VJbnN0YW5jZS51cGRhdGVTdGF0ZShyZWR1Y2VyKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY3VycmVudFN0YXRlKSksIGFjdGlvbikpO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgU3RhdGVPYmogfSBmcm9tIFwidHlwZXNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcmFnZSB7XG4gIHN0YXRlOiBTdGF0ZU9iajtcbiAgc3Vic2NyaWJlcnM6IEZ1bmN0aW9uW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihzdGF0ZTogU3RhdGVPYmopIHtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gIH1cblxuICBmb3JjZWRDb25zdHJ1Y3RvcihzdGF0ZTogU3RhdGVPYmopIHtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gIH1cblxuICBnZXRTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfVxuXG4gIHVwZGF0ZVN0YXRlKHN0YXRlOiBTdGF0ZU9iaikge1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2goKGZuKSA9PiB7XG4gICAgICBmbih0aGlzLnN0YXRlKTtcbiAgICB9KTtcbiAgfVxuXG4gIHN1YnNjcmliZShmbjogRnVuY3Rpb24pIHtcbiAgICB0aGlzLnN1YnNjcmliZXJzLnB1c2goZm4pO1xuICB9XG5cbiAgZm9yY2VVcGRhdGUoKSB7XG4gICAgdGhpcy5zdWJzY3JpYmVycy5mb3JFYWNoKChmbikgPT4ge1xuICAgICAgZm4odGhpcy5zdGF0ZSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vc3R5bGVzLnNjc3NcIjtcbmltcG9ydCB7IERpc3BhdGNoLCBTdGF0ZU9iaiwgVGFza0RhdGFPYmogfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGNyZWF0ZUh0bWxFbGVtZW50IH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzXCI7XG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vLi4vLi4vYXBpXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm0ge1xuICBlbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcbiAgd3JhcDogSFRNTERpdkVsZW1lbnQ7XG4gIGRpc3BhdGNoOiBEaXNwYXRjaDtcbiAgYnV0dG9uQWRkOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgY291bnRlclZhbHVlOiBudW1iZXI7XG4gIHRhc2tUZXh0OiBzdHJpbmc7XG4gIGlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuICBjb3VudGVyOiBIVE1MUGFyYWdyYXBoRWxlbWVudDtcbiAgbGVuZ3RoV2FybmluZzogSFRNTFBhcmFncmFwaEVsZW1lbnQ7XG4gIHRhc2tzQXJyYXk6IFRhc2tEYXRhT2JqW107XG4gIGJpbmRlZEhhbmRsZUlucHV0VmFsaWRhdGlvbjogKCkgPT4gdm9pZCB8IHVuZGVmaW5lZDtcbiAgYmluZGVkSGFuZGxlQ3JlYXRlTm90ZTogKCkgPT4gdm9pZCB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihkaXNwYXRjaDogRGlzcGF0Y2gpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1wiZm9ybVwiXSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGRpc3BhdGNoO1xuICB9XG5cbiAgY3JlYXRlRE9NRWxlbWVudCgpIHtcbiAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcbiAgICB0aGlzLndyYXAgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1wiZm9ybV9fd3JhcFwiXSk7XG4gICAgdGhpcy5pbnB1dCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxJbnB1dEVsZW1lbnQ+KFwiaW5wdXRcIiwgW1wiZm9ybV9faW5wdXRcIl0pO1xuICAgIHRoaXMuaW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRhcmVhXCIpO1xuICAgIHRoaXMuaW5wdXQuc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgXCJ0cnVlXCIpO1xuICAgIHRoaXMuYnV0dG9uQWRkID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KFxuICAgICAgXCJidXR0b25cIixcbiAgICAgIFtcImZvcm1fX2J1dHRvblwiXSxcbiAgICAgIFwiQWRkXCJcbiAgICApO1xuICAgIHRoaXMuYnV0dG9uQWRkLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJzdWJtaXRcIik7XG4gICAgdGhpcy5idXR0b25BZGQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgIHRoaXMuY291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIHRoaXMuY291bnRlci5jbGFzc0xpc3QuYWRkKFwiYm9hcmRfX2NvdW50ZXJcIik7XG4gICAgdGhpcy5jb3VudGVyVmFsdWUgPSAwO1xuICAgIHRoaXMuY291bnRlci50ZXh0Q29udGVudCA9IGAke3RoaXMuY291bnRlclZhbHVlfS81NWA7XG4gICAgdGhpcy5sZW5ndGhXYXJuaW5nID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTFBhcmFncmFwaEVsZW1lbnQ+KFxuICAgICAgXCJwXCIsXG4gICAgICBbXCJmb3JtX19jb3VudGVyX2Vycm9yXCIsIFwiZm9ybV9fd2FybmluZ1wiXSxcbiAgICAgIFwiTm90ZSBzaG91bGQgY29udGFpbiBmcm9tIDUgdG8gNTUgc3ltYm9sc1wiXG4gICAgKTtcblxuICAgIHRoaXMuYmluZGVkSGFuZGxlSW5wdXRWYWxpZGF0aW9uID0gdGhpcy5oYW5kbGVJbnB1dFZhbGlkYXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmJpbmRlZEhhbmRsZUNyZWF0ZU5vdGUgPSB0aGlzLmhhbmRsZUNyZWF0ZU5vdGUuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMuYmluZGVkSGFuZGxlSW5wdXRWYWxpZGF0aW9uKTtcbiAgICB0aGlzLmJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5iaW5kZWRIYW5kbGVDcmVhdGVOb3RlKTtcblxuICAgIHRoaXMud3JhcC5hcHBlbmQoXG4gICAgICB0aGlzLmlucHV0LFxuICAgICAgdGhpcy5jb3VudGVyLFxuICAgICAgdGhpcy5sZW5ndGhXYXJuaW5nLFxuICAgICAgdGhpcy5idXR0b25BZGRcbiAgICApO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLndyYXApO1xuICB9XG5cbiAgb25TdGF0ZVVwZGF0ZShzdGF0ZTogU3RhdGVPYmopIHtcbiAgICB0aGlzLmNsZWFySGFuZGxlcnMoKTtcbiAgICBpZiAoc3RhdGUudGFza3MpIHtcbiAgICAgIHRoaXMudGFza3NBcnJheSA9IHN0YXRlLnRhc2tzLnNsaWNlKDApO1xuICAgICAgdGhpcy5jcmVhdGVET01FbGVtZW50KCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBpbnB1dFZhbGlkYXRpb24oXG4gICAgaW5wdXRFbGVtOiBIVE1MSW5wdXRFbGVtZW50LFxuICAgIHdhcm5FbGVtMTogSFRNTFBhcmFncmFwaEVsZW1lbnQsXG4gICAgd2FybUVsZW0yOiBIVE1MUGFyYWdyYXBoRWxlbWVudFxuICApOiB2b2lkIHtcbiAgICBpZiAoaW5wdXRFbGVtLnZhbHVlID09PSBcIlwiKSB7XG4gICAgICB0aGlzLmNvdW50ZXJWYWx1ZSA9IDA7XG4gICAgICB0aGlzLnRhc2tUZXh0ID0gXCJcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb3VudGVyVmFsdWUgPSBpbnB1dEVsZW0udmFsdWUubGVuZ3RoO1xuICAgICAgaWYgKHRoaXMuY291bnRlclZhbHVlID49IDU1KSBpbnB1dEVsZW0udmFsdWUgPSB0aGlzLnRhc2tUZXh0O1xuICAgICAgdGhpcy50YXNrVGV4dCA9XG4gICAgICAgIGlucHV0RWxlbS52YWx1ZVswXS50b1VwcGVyQ2FzZSgpICsgaW5wdXRFbGVtLnZhbHVlLnNsaWNlKDEpO1xuICAgICAgaW5wdXRFbGVtLnZhbHVlID0gdGhpcy50YXNrVGV4dDtcbiAgICAgIGlmICh0aGlzLmNvdW50ZXJWYWx1ZSA8IDUpIHtcbiAgICAgICAgd2FybkVsZW0xLmNsYXNzTGlzdC5hZGQoXCJmb3JtX19jb3VudGVyX2Vycm9yXCIpO1xuICAgICAgICB3YXJtRWxlbTIuY2xhc3NMaXN0LmFkZChcImZvcm1fX3dhcm5pbmdfdmlzaWJsZVwiKTtcbiAgICAgICAgdGhpcy5idXR0b25BZGQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybkVsZW0xLmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19jb3VudGVyX2Vycm9yXCIpO1xuICAgICAgICB3YXJtRWxlbTIuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX3dhcm5pbmdfdmlzaWJsZVwiKTtcbiAgICAgICAgdGhpcy5idXR0b25BZGQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgICB9XG4gICAgfVxuICAgIHdhcm5FbGVtMS50ZXh0Q29udGVudCA9IGAke3RoaXMuY291bnRlclZhbHVlfS81NWA7XG4gIH1cblxuICBoYW5kbGVJbnB1dFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5pbnB1dFZhbGlkYXRpb24odGhpcy5pbnB1dCwgdGhpcy5jb3VudGVyLCB0aGlzLmxlbmd0aFdhcm5pbmcpO1xuICB9XG5cbiAgaGFuZGxlQ3JlYXRlTm90ZSgpIHtcbiAgICB0aGlzLmNyZWF0ZU5ld05vdGUodGhpcy50YXNrc0FycmF5KTtcbiAgfVxuXG4gIGNsZWFySGFuZGxlcnMoKSB7XG4gICAgaWYgKHRoaXMuaW5wdXQpXG4gICAgICB0aGlzLmlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLmJpbmRlZEhhbmRsZUlucHV0VmFsaWRhdGlvbik7XG4gICAgaWYgKHRoaXMuYnV0dG9uQWRkKVxuICAgICAgdGhpcy5idXR0b25BZGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYmluZGVkSGFuZGxlQ3JlYXRlTm90ZSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU5ld05vdGUodGFza3NBcnJheTogVGFza0RhdGFPYmpbXSkge1xuICAgIHRhc2tzQXJyYXkuc29ydChcbiAgICAgIChhLCBiKSA9PiBuZXcgRGF0ZShhLmRhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGIuZGF0ZSkuZ2V0VGltZSgpXG4gICAgKTtcbiAgICBjb25zdCB0YXNrT2JqOiBUYXNrRGF0YU9iaiA9IHtcbiAgICAgIGlkOiB0YXNrc0FycmF5Lmxlbmd0aCA/IHRhc2tzQXJyYXlbdGFza3NBcnJheS5sZW5ndGggLSAxXS5pZCArIDEgOiAxLFxuICAgICAgbm90ZTogdGhpcy50YXNrVGV4dCxcbiAgICAgIHN0YXR1czogXCJhY3RpdmVcIixcbiAgICAgIGRhdGU6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwiTE9BRElOR19TVEFURVwiLFxuICAgICAgcGF5bG9hZDogdHJ1ZSxcbiAgICB9KTtcbiAgICBhcGkuYWRkKHRhc2tPYmopLnRoZW4oKHRhc2tPYmopID0+IHtcbiAgICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcIkFERF9OT1RFXCIsXG4gICAgICAgIHBheWxvYWQ6IHRhc2tPYmosXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9zdHlsZXMuc2Nzc1wiO1xuaW1wb3J0IHsgRGlzcGF0Y2gsIFN0YXRlT2JqLCBUYXNrRGF0YU9iaiwgRmlsdGVyIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBjcmVhdGVIdG1sRWxlbWVudCB9IGZyb20gXCIuLi8uLi8uLi91dGlsc1wiO1xuaW1wb3J0IFRhc2sgZnJvbSBcIi4uL3Rhc2tcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlzdCB7XG4gIGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xuICBwcml2YXRlIHdyYXA6IEhUTUxEaXZFbGVtZW50O1xuICBkaXNwYXRjaDogRGlzcGF0Y2g7XG4gIHByaXZhdGUgY3VycmVudExlbmd0aDogbnVtYmVyO1xuICBwcml2YXRlIGlzUmV2ZXJzZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgZmlsdGVyOiBGaWx0ZXI7XG4gIHRhc2tJbnN0YW5jZXM6IFRhc2tbXTtcbiAgc3Bpbm5lcjogSFRNTERpdkVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihkaXNwYXRjaDogRGlzcGF0Y2gpIHtcbiAgICB0aGlzLmRpc3BhdGNoID0gZGlzcGF0Y2g7XG4gICAgdGhpcy5lbGVtZW50ID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcImxpc3RcIl0pO1xuICB9XG5cbiAgb25TdGF0ZVVwZGF0ZShzdGF0ZTogU3RhdGVPYmopIHtcbiAgICBpZiAoc3RhdGUudGFza3MpIHtcbiAgICAgIGNvbnN0IGxvYWRpbmdTdGF0ZSA9IHN0YXRlLmxvYWRpbmdTdGF0ZTtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5jdXJyZW50TGVuZ3RoICE9PSBzdGF0ZS50YXNrcy5sZW5ndGggfHxcbiAgICAgICAgdGhpcy5maWx0ZXIgIT09IHN0YXRlLmZpbHRlciB8fFxuICAgICAgICB0aGlzLmlzUmV2ZXJzZWQgIT09IHN0YXRlLmlzUmV2ZXJzZWRcbiAgICAgICkge1xuICAgICAgICB0aGlzLnVwZGF0ZUxpc3Qoc3RhdGUpO1xuICAgICAgICB0aGlzLnNwaW5uZXIgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50YXNrSW5zdGFuY2VzLmZvckVhY2goKHRhc2spID0+IHRhc2sub25TdGF0ZVVwZGF0ZShzdGF0ZSkpO1xuICAgICAgfVxuICAgICAgaWYgKGxvYWRpbmdTdGF0ZSAmJiAhdGhpcy5zcGlubmVyKSB7XG4gICAgICAgIHRoaXMuYWRkU3Bpbm5lcigpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3Bpbm5lciAmJiAhc3RhdGUubG9hZGluZ1N0YXRlKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlU3Bpbm5lcigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgfVxuXG4gIHVwZGF0ZUxpc3Qoc3RhdGU6IFN0YXRlT2JqKSB7XG4gICAgdGhpcy5maWx0ZXIgPSBzdGF0ZS5maWx0ZXI7XG4gICAgdGhpcy5pc1JldmVyc2VkID0gc3RhdGUuaXNSZXZlcnNlZDtcbiAgICBpZiAodGhpcy50YXNrSW5zdGFuY2VzKVxuICAgICAgdGhpcy50YXNrSW5zdGFuY2VzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgdGFzay5jbGVhckhhbmRsZXJzKCk7XG4gICAgICB9KTtcbiAgICB0aGlzLmNyZWF0ZVRhc2tzTGlzdChzdGF0ZS50YXNrcyk7XG4gIH1cblxuICBhZGRTcGlubmVyKCkge1xuICAgIHRoaXMuc3Bpbm5lciA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxEaXZFbGVtZW50PihcImRpdlwiLCBbXCJ0YXNrX19zcGlubmVyXCJdKTtcbiAgICBjb25zdCB0ZXh0ID0gY3JlYXRlSHRtbEVsZW1lbnQoXCJoM1wiLCBbXCJ0YXNrX19zcGlubmVyX190ZXh0XCJdLCBcIkxvYWRpbmcuLi5cIik7XG4gICAgY29uc3QgdHlwZWQgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1xuICAgICAgXCJ0YXNrX19zcGlubmVyX3dyYXBcIixcbiAgICBdKTtcbiAgICB0aGlzLnNwaW5uZXIuYXBwZW5kKHR5cGVkKTtcbiAgICB0eXBlZC5hcHBlbmQodGV4dCk7XG4gICAgdGhpcy53cmFwLmFwcGVuZCh0aGlzLnNwaW5uZXIpO1xuICB9XG5cbiAgcmVtb3ZlU3Bpbm5lcigpIHtcbiAgICB0aGlzLnNwaW5uZXIucmVtb3ZlKCk7XG4gICAgdGhpcy5zcGlubmVyID0gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVGFza3NMaXN0KHRhc2tzOiBUYXNrRGF0YU9ialtdKSB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XG4gICAgdGhpcy5jdXJyZW50TGVuZ3RoID0gMDtcbiAgICB0aGlzLndyYXAgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1wibGlzdF9fd3JhcFwiXSk7XG4gICAgaWYgKHRhc2tzKSB7XG4gICAgICBsZXQgdGFza0VsZW1lbnRzID0gW107XG4gICAgICBpZiAodGhpcy5maWx0ZXIgPT09IFwiYWN0aXZlXCIpIHtcbiAgICAgICAgdGFza0VsZW1lbnRzID0gdGhpcy5jcmVhdGVUYXNrRWxlbWVudHModGFza3MsIFwiYWN0aXZlXCIpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmZpbHRlciA9PT0gXCJkb25lXCIpIHtcbiAgICAgICAgdGFza0VsZW1lbnRzID0gdGhpcy5jcmVhdGVUYXNrRWxlbWVudHModGFza3MsIFwiZG9uZVwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tFbGVtZW50cyA9IHRoaXMuY3JlYXRlVGFza0VsZW1lbnRzKHRhc2tzLCBcImFsbFwiKTtcbiAgICAgIH1cbiAgICAgIHRhc2tFbGVtZW50cy5mb3JFYWNoKChlbCkgPT4gdGhpcy53cmFwLmFwcGVuZChlbCkpO1xuICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMud3JhcCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVUYXNrRWxlbWVudHModGFza3M6IFRhc2tEYXRhT2JqW10sIGZpbHRlcjogRmlsdGVyKSB7XG4gICAgY29uc3QgdGFza0VsZW1lbnRzQXJyYXk6IEhUTUxFbGVtZW50W10gPSBbXTtcbiAgICB0aGlzLnNvcnRFbGVtZW50c0J5RGF0ZSh0YXNrcyk7XG4gICAgdGhpcy50YXNrSW5zdGFuY2VzID0gW107XG4gICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgaWYgKGZpbHRlciA9PT0gXCJhbGxcIiB8fCB0YXNrLnN0YXR1cyA9PT0gZmlsdGVyKSB7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2sgPSBuZXcgVGFzayh0YXNrLCB0aGlzLmRpc3BhdGNoKTtcbiAgICAgICAgdGFza0VsZW1lbnRzQXJyYXkucHVzaChuZXdUYXNrLmdldFZpZXcoKSk7XG4gICAgICAgIHRoaXMuY3VycmVudExlbmd0aCsrO1xuICAgICAgICB0aGlzLnRhc2tJbnN0YW5jZXMucHVzaChuZXdUYXNrKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGFza0VsZW1lbnRzQXJyYXk7XG4gIH1cblxuICBzb3J0RWxlbWVudHNCeURhdGUodGFza3NBcnI6IFRhc2tEYXRhT2JqW10pIHtcbiAgICBpZiAodGhpcy5pc1JldmVyc2VkKSB7XG4gICAgICB0YXNrc0Fyci5zb3J0KFxuICAgICAgICAoYSwgYikgPT4gbmV3IERhdGUoYS5kYXRlKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShiLmRhdGUpLmdldFRpbWUoKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFza3NBcnIuc29ydChcbiAgICAgICAgKGEsIGIpID0+IG5ldyBEYXRlKGIuZGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS5kYXRlKS5nZXRUaW1lKClcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgXCIuL3N0eWxlcy5zY3NzXCI7XG5pbXBvcnQgeyBTdGF0ZU9iaiwgRGlzcGF0Y2gsIEZpbHRlciB9IGZyb20gXCJ0eXBlc1wiO1xuaW1wb3J0IHsgY3JlYXRlSHRtbEVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmF2IHtcbiAgZWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XG4gIHByaXZhdGUgZmlsdGVyV3JhcDogSFRNTERpdkVsZW1lbnQ7XG4gIHByaXZhdGUgYnV0dG9uQWxsOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBidXR0b25BY3RpdmU6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIGJ1dHRvbkRvbmU6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIGJ1dHRvblJlc2Vyc2U6IEhUTUxCdXR0b25FbGVtZW50O1xuICBkaXNwYXRjaDogRGlzcGF0Y2g7XG4gIHByaXZhdGUgaXNSZXZlcnNlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKGRpc3BhdGNoOiBEaXNwYXRjaCkge1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBkaXNwYXRjaDtcbiAgICB0aGlzLmVsZW1lbnQgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1wibmF2XCJdKTtcbiAgICB0aGlzLmNyZWF0ZURPTUVsZW1lbnQoKTtcbiAgICB0aGlzLmJ1dHRvbkFsbC5jbGFzc0xpc3QuYWRkKFwibmF2X19idXR0b25fc2VsZWN0ZWRcIik7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gIH1cblxuICBvblN0YXRlVXBkYXRlKHN0YXRlOiBTdGF0ZU9iaikge1xuICAgIFt0aGlzLmJ1dHRvbkFsbCwgdGhpcy5idXR0b25BY3RpdmUsIHRoaXMuYnV0dG9uRG9uZV0uZm9yRWFjaCgoYnV0dG9uKSA9PlxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXZfX2J1dHRvbl9zZWxlY3RlZFwiKVxuICAgICk7XG4gICAgc3dpdGNoIChzdGF0ZS5maWx0ZXIpIHtcbiAgICAgIGNhc2UgXCJhY3RpdmVcIjpcbiAgICAgICAgdGhpcy5idXR0b25BY3RpdmUuY2xhc3NMaXN0LmFkZChcIm5hdl9fYnV0dG9uX3NlbGVjdGVkXCIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJkb25lXCI6XG4gICAgICAgIHRoaXMuYnV0dG9uRG9uZS5jbGFzc0xpc3QuYWRkKFwibmF2X19idXR0b25fc2VsZWN0ZWRcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhpcy5idXR0b25BbGwuY2xhc3NMaXN0LmFkZChcIm5hdl9fYnV0dG9uX3NlbGVjdGVkXCIpO1xuICAgIH1cbiAgICBzd2l0Y2ggKHN0YXRlLmlzUmV2ZXJzZWQpIHtcbiAgICAgIGNhc2UgdHJ1ZTpcbiAgICAgICAgdGhpcy5idXR0b25SZXNlcnNlLmNsYXNzTGlzdC5hZGQoXCJuYXZfX2J1dHRvbl9zZWxlY3RlZFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGZhbHNlOlxuICAgICAgICB0aGlzLmJ1dHRvblJlc2Vyc2UuY2xhc3NMaXN0LnJlbW92ZShcIm5hdl9fYnV0dG9uX3NlbGVjdGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRE9NRWxlbWVudCgpIHtcbiAgICB0aGlzLmVsZW1lbnQuY2hpbGROb2Rlcy5mb3JFYWNoKChlbCkgPT4gZWwucmVtb3ZlKTtcbiAgICB0aGlzLmZpbHRlcldyYXAgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1xuICAgICAgXCJuYXZfX2NvbnRhaW5lclwiLFxuICAgIF0pO1xuICAgIHRoaXMuYnV0dG9uQWxsID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTEJ1dHRvbkVsZW1lbnQsIEZpbHRlcj4oXG4gICAgICBcImJ1dHRvblwiLFxuICAgICAgW1wibmF2X19idXR0b25cIl0sXG4gICAgICBcIkFsbFwiLFxuICAgICAgXCJhbGxcIlxuICAgICk7XG4gICAgdGhpcy5idXR0b25BY3RpdmUgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MQnV0dG9uRWxlbWVudCwgRmlsdGVyPihcbiAgICAgIFwiYnV0dG9uXCIsXG4gICAgICBbXCJuYXZfX2J1dHRvblwiXSxcbiAgICAgIFwiQWN0aXZlXCIsXG4gICAgICBcImFjdGl2ZVwiXG4gICAgKTtcbiAgICB0aGlzLmJ1dHRvbkRvbmUgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MQnV0dG9uRWxlbWVudCwgRmlsdGVyPihcbiAgICAgIFwiYnV0dG9uXCIsXG4gICAgICBbXCJuYXZfX2J1dHRvblwiXSxcbiAgICAgIFwiRG9uZVwiLFxuICAgICAgXCJkb25lXCJcbiAgICApO1xuICAgIHRoaXMuYnV0dG9uUmVzZXJzZSA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxCdXR0b25FbGVtZW50PihcImJ1dHRvblwiLCBbXG4gICAgICBcIm5hdl9fYnV0dG9uXCIsXG4gICAgICBcIm5hdl9fcmV2ZXJzZVwiLFxuICAgIF0pO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmQodGhpcy5maWx0ZXJXcmFwLCB0aGlzLmJ1dHRvblJlc2Vyc2UpO1xuICAgIHRoaXMuZmlsdGVyV3JhcC5hcHBlbmQodGhpcy5idXR0b25BbGwsIHRoaXMuYnV0dG9uQWN0aXZlLCB0aGlzLmJ1dHRvbkRvbmUpO1xuXG4gICAgW3RoaXMuYnV0dG9uQWxsLCB0aGlzLmJ1dHRvbkFjdGl2ZSwgdGhpcy5idXR0b25Eb25lXS5mb3JFYWNoKChidXR0b24pID0+XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJDSEFOR0VfRklMVEVSXCIsXG4gICAgICAgICAgcGF5bG9hZDogYnV0dG9uLmRhdGFzZXQubmFtZSBhcyBGaWx0ZXIsXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXMuYnV0dG9uUmVzZXJzZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgc3dpdGNoICh0aGlzLmlzUmV2ZXJzZWQpIHtcbiAgICAgICAgY2FzZSB0cnVlOlxuICAgICAgICAgIHRoaXMuaXNSZXZlcnNlZCA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuYnV0dG9uUmVzZXJzZS5jbGFzc0xpc3QucmVtb3ZlKFwibmF2X19idXR0b25fc2VsZWN0ZWRcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgZmFsc2U6XG4gICAgICAgICAgdGhpcy5pc1JldmVyc2VkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmJ1dHRvblJlc2Vyc2UuY2xhc3NMaXN0LmFkZChcIm5hdl9fYnV0dG9uX3NlbGVjdGVkXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwiTE9BRElOR19TVEFURVwiLFxuICAgICAgICBwYXlsb2FkOiB0cnVlXG4gICAgICB9KVxuICAgICAgdGhpcy5kaXNwYXRjaCh7IHR5cGU6IFwiQ0hBTkdFX0lTX1JFVkVSU0VEXCIsIHBheWxvYWQ6IHRoaXMuaXNSZXZlcnNlZCB9KTtcbiAgICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcIkxPQURJTkdfU1RBVEVcIixcbiAgICAgICAgcGF5bG9hZDogZmFsc2VcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vc3R5bGVzLnNjc3NcIjtcbmltcG9ydCB7IERpc3BhdGNoLCBUYXNrRGF0YU9iaiwgU3RhdHVzLCBTdGF0ZU9iaiB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgY3JlYXRlSHRtbEVsZW1lbnQsIGdldFByZXR0eURhdGUgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHNcIjtcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi8uLi8uLi9hcGlcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFzayB7XG4gIGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xuICBwcml2YXRlIHdyYXA6IEhUTUxEaXZFbGVtZW50O1xuICBkaXNwYXRjaDogRGlzcGF0Y2g7XG4gIHByaXZhdGUgc3RhdHVzOiBTdGF0dXM7XG4gIHByaXZhdGUgaWQ6IG51bWJlcjtcbiAgcHJpdmF0ZSBidXR0b25Eb25lOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBidXR0b25EZWxldGU6IEhUTUxCdXR0b25FbGVtZW50O1xuICBiaW5kZWRIYW5kbGVEb25lOiAoKSA9PiB2b2lkO1xuICBiaW5kZWRIYW5kbGVEZWxldGU6ICgpID0+IHZvaWQ7XG4gIHRhc2tEYXRhOiBUYXNrRGF0YU9iajtcbiAgc3Bpbm5lcjogSFRNTERpdkVsZW1lbnQgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHRhc2tEYXRhOiBUYXNrRGF0YU9iaiwgZGlzcGF0Y2g6IERpc3BhdGNoKSB7XG4gICAgdGhpcy5zdGF0dXMgPSB0YXNrRGF0YS5zdGF0dXM7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGRpc3BhdGNoO1xuICAgIHRoaXMuaWQgPSB0YXNrRGF0YS5pZDtcbiAgICB0aGlzLmVsZW1lbnQgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MRGl2RWxlbWVudD4oXCJkaXZcIiwgW1widGFza1wiXSk7XG4gICAgdGhpcy5jcmVhdGVET01FbGVtZW50KHRhc2tEYXRhKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgfVxuXG4gIG9uU3RhdGVVcGRhdGUoc3RhdGU6IFN0YXRlT2JqKSB7XG4gICAgY29uc3QgaXNMb2FkaW5nID0gc3RhdGUubG9hZGluZ1Rhc2tzLmluY2x1ZGVzKHRoaXMuaWQpO1xuICAgIGNvbnN0IG5ld1N0YXR1cyA9IHN0YXRlLnRhc2tzLmZpbmQoKHRhc2spID0+IHRhc2suaWQgPT09IHRoaXMuaWQpLnN0YXR1cztcblxuICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gbmV3U3RhdHVzKSB7XG4gICAgICB0aGlzLnVwZGF0ZVRhc2tFbGVtZW50KHN0YXRlKTtcbiAgICB9XG4gICAgaWYgKGlzTG9hZGluZyAmJiAhdGhpcy5zcGlubmVyKSB7XG4gICAgICB0aGlzLmFkZFNwaW5uZXIoKTtcbiAgICB9IGVsc2UgaWYgKCFpc0xvYWRpbmcgJiYgdGhpcy5zcGlubmVyKSB7XG4gICAgICB0aGlzLnJlbW92ZVNwaW5uZXIoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZURPTUVsZW1lbnQodGFza0RhdGE6IFRhc2tEYXRhT2JqKSB7XG4gICAgdGhpcy50YXNrRGF0YSA9IHRhc2tEYXRhO1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHRoaXMud3JhcCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxEaXZFbGVtZW50PihcImRpdlwiLCBbXCJ0YXNrX193cmFwXCJdKTtcbiAgICBjb25zdCBsZWZ0Q29udGFpbmVyID0gY3JlYXRlSHRtbEVsZW1lbnQoXCJkaXZcIiwgW1widGFza19fY29udGFpbmVyX2lubmVyXCJdKTtcbiAgICBjb25zdCByaWdodENvbnRhaW5lciA9IGNyZWF0ZUh0bWxFbGVtZW50KFwiZGl2XCIsIFtcInRhc2tfX2NvbnRhaW5lcl9pbm5lclwiXSk7XG4gICAgY29uc3QgdGFza1RleHQgPSBjcmVhdGVIdG1sRWxlbWVudChcImgyXCIsIFtcInRhc2tfX3RleHRcIl0sIHRhc2tEYXRhLm5vdGUpO1xuICAgIGNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBjcmVhdGVIdG1sRWxlbWVudChcImRpdlwiLCBbXG4gICAgICBcInRhc2tfX2NvbnRhaW5lcl9idXR0b25zXCIsXG4gICAgXSk7XG4gICAgdGhpcy5idXR0b25Eb25lID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KFxuICAgICAgXCJidXR0b25cIixcbiAgICAgIFtcInRhc2tfX2J1dHRvblwiXSxcbiAgICAgIFwiRG9uZVwiXG4gICAgKTtcbiAgICB0aGlzLmJ1dHRvbkRlbGV0ZSA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxCdXR0b25FbGVtZW50PihcbiAgICAgIFwiYnV0dG9uXCIsXG4gICAgICBbXCJ0YXNrX19idXR0b25cIl0sXG4gICAgICBcIkRlbGV0ZVwiXG4gICAgKTtcbiAgICBsZXQgc3RhdHVzRWxlbTtcbiAgICBzd2l0Y2ggKHRhc2tEYXRhLnN0YXR1cykge1xuICAgICAgY2FzZSBcImFjdGl2ZVwiOlxuICAgICAgICB0aGlzLmJ1dHRvbkRvbmUgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MQnV0dG9uRWxlbWVudCwgU3RhdHVzPihcbiAgICAgICAgICBcImJ1dHRvblwiLFxuICAgICAgICAgIFtcInRhc2tfX2J1dHRvblwiXSxcbiAgICAgICAgICBcIkRvbmVcIixcbiAgICAgICAgICBcImRvbmVcIlxuICAgICAgICApO1xuICAgICAgICB0aGlzLmJ1dHRvbkRlbGV0ZSA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxCdXR0b25FbGVtZW50PihcbiAgICAgICAgICBcImJ1dHRvblwiLFxuICAgICAgICAgIFtcInRhc2tfX2J1dHRvblwiXSxcbiAgICAgICAgICBcIkRlbGV0ZVwiXG4gICAgICAgICk7XG4gICAgICAgIHN0YXR1c0VsZW0gPSBjcmVhdGVIdG1sRWxlbWVudChcbiAgICAgICAgICBcInBcIixcbiAgICAgICAgICBbXCJ0YXNrX19zdGF0dXNcIiwgXCJ0YXNrX19zdGF0dXNfYWN0aXZlXCJdLFxuICAgICAgICAgIFwiQWN0aXZlXCJcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZG9uZVwiOlxuICAgICAgICB0aGlzLmJ1dHRvbkRvbmUgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MQnV0dG9uRWxlbWVudCwgU3RhdHVzPihcbiAgICAgICAgICBcImJ1dHRvblwiLFxuICAgICAgICAgIFtcInRhc2tfX2J1dHRvblwiLCBcInRhc2tfX2J1dHRvbl9kb25lXCJdLFxuICAgICAgICAgIFwiVW5kb1wiLFxuICAgICAgICAgIFwiYWN0aXZlXCJcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5idXR0b25EZWxldGUgPSBjcmVhdGVIdG1sRWxlbWVudDxIVE1MQnV0dG9uRWxlbWVudD4oXG4gICAgICAgICAgXCJidXR0b25cIixcbiAgICAgICAgICBbXCJ0YXNrX19idXR0b25cIiwgXCJ0YXNrX19idXR0b25fZG9uZVwiXSxcbiAgICAgICAgICBcIkRlbGV0ZVwiXG4gICAgICAgICk7XG4gICAgICAgIHN0YXR1c0VsZW0gPSBjcmVhdGVIdG1sRWxlbWVudChcbiAgICAgICAgICBcInBcIixcbiAgICAgICAgICBbXCJ0YXNrX19zdGF0dXNcIiwgXCJ0YXNrX19zdGF0dXNfZG9uZVwiXSxcbiAgICAgICAgICBcIkRvbmVcIlxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgY29uc3QgZGF0ZUVsZW0gPSBjcmVhdGVIdG1sRWxlbWVudChcbiAgICAgIFwicFwiLFxuICAgICAgW1widGFza19fZGF0ZVwiXSxcbiAgICAgIGdldFByZXR0eURhdGUodGFza0RhdGEuZGF0ZSlcbiAgICApO1xuXG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMud3JhcCk7XG4gICAgdGhpcy53cmFwLmFwcGVuZChsZWZ0Q29udGFpbmVyLCByaWdodENvbnRhaW5lcik7XG4gICAgbGVmdENvbnRhaW5lci5hcHBlbmQodGFza1RleHQsIGJ1dHRvbnNDb250YWluZXIpO1xuICAgIGJ1dHRvbnNDb250YWluZXIuYXBwZW5kKHRoaXMuYnV0dG9uRG9uZSwgdGhpcy5idXR0b25EZWxldGUpO1xuICAgIHJpZ2h0Q29udGFpbmVyLmFwcGVuZChzdGF0dXNFbGVtLCBkYXRlRWxlbSk7XG5cbiAgICB0aGlzLmJpbmRlZEhhbmRsZURlbGV0ZSA9IHRoaXMuaGFuZGxlRGVsZXRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5iaW5kZWRIYW5kbGVEb25lID0gdGhpcy5oYW5kbGVEb25lLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmJ1dHRvbkRvbmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYmluZGVkSGFuZGxlRG9uZSk7XG4gICAgdGhpcy5idXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYmluZGVkSGFuZGxlRGVsZXRlKTtcbiAgfVxuXG4gIGhhbmRsZURlbGV0ZSgpIHtcbiAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFwiTE9BRElOR19TVEFURVwiLFxuICAgICAgcGF5bG9hZDogdHJ1ZSxcbiAgICB9KTtcbiAgICBhcGlcbiAgICAgIC5yZW1vdmUodGhpcy5pZClcbiAgICAgIC50aGVuKChpZCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcyk9PntcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwiREVMRVRFX05PVEVcIixcbiAgICAgICAgICAgIHBheWxvYWQ6IGlkLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICB9XG5cbiAgaGFuZGxlRG9uZSgpIHtcbiAgICB0aGlzLnRhc2tEYXRhLnN0YXR1cyA9IHRoaXMuYnV0dG9uRG9uZS5kYXRhc2V0Lm5hbWUgYXMgU3RhdHVzO1xuICAgIHRoaXMuZGlzcGF0Y2goe1xuICAgICAgdHlwZTogXCJOT1RFX0xPQURJTkdfU1RBVEVcIixcbiAgICAgIHBheWxvYWQ6IHsgaWQ6IHRoaXMuaWQsIHN0YXRlOiB0cnVlIH0sXG4gICAgfSk7XG4gICAgYXBpXG4gICAgICAudXBkYXRlKHRoaXMudGFza0RhdGEpXG4gICAgICAudGhlbigodGFza0RhdGEpID0+IHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogXCJDSEFOR0VfTk9URV9TVEFUVVNcIixcbiAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICBpZDogdGFza0RhdGEuaWQsXG4gICAgICAgICAgICBzdGF0dXM6IHRhc2tEYXRhLnN0YXR1cyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gIH1cblxuICBjbGVhckhhbmRsZXJzKCkge1xuICAgIGlmICh0aGlzLmJ1dHRvbkRlbGV0ZSlcbiAgICAgIHRoaXMuYnV0dG9uRGVsZXRlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmJpbmRlZEhhbmRsZURlbGV0ZSk7XG4gICAgaWYgKHRoaXMuYnV0dG9uRG9uZSlcbiAgICAgIHRoaXMuYnV0dG9uRG9uZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5iaW5kZWRIYW5kbGVEb25lKTtcbiAgfVxuXG4gIGFkZFNwaW5uZXIoKSB7XG4gICAgdGhpcy5zcGlubmVyID0gY3JlYXRlSHRtbEVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+KFwiZGl2XCIsIFtcInRhc2tfX3NwaW5uZXJcIl0pO1xuICAgIGNvbnN0IHRleHQgPSBjcmVhdGVIdG1sRWxlbWVudChcImgzXCIsIFtcInRhc2tfX3NwaW5uZXJfX3RleHRcIl0sIFwiTG9hZGluZy4uLlwiKTtcbiAgICBjb25zdCB0eXBlZCA9IGNyZWF0ZUh0bWxFbGVtZW50PEhUTUxEaXZFbGVtZW50PihcImRpdlwiLCBbXG4gICAgICBcInRhc2tfX3NwaW5uZXJfd3JhcFwiLFxuICAgIF0pO1xuICAgIHRoaXMuc3Bpbm5lci5hcHBlbmQodHlwZWQpO1xuICAgIHR5cGVkLmFwcGVuZCh0ZXh0KTtcbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kKHRoaXMuc3Bpbm5lcik7XG4gIH1cblxuICByZW1vdmVTcGlubmVyKCkge1xuICAgIHRoaXMuc3Bpbm5lci5yZW1vdmUoKTtcbiAgICB0aGlzLnNwaW5uZXIgPSBudWxsO1xuICB9XG5cbiAgdXBkYXRlVGFza0VsZW1lbnQoc3RhdGU6IFN0YXRlT2JqKSB7XG4gICAgdGhpcy5jbGVhckhhbmRsZXJzKCk7XG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0ZS50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmlkID09PSB0aGlzLmlkKS5zdGF0dXM7XG4gICAgdGhpcy5jcmVhdGVET01FbGVtZW50KHN0YXRlLnRhc2tzLmZpbmQoKHRhc2spID0+IHRhc2suaWQgPT09IHRoaXMuaWQpKTtcbiAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUh0bWxFbGVtZW50PFQgPSBIVE1MRWxlbWVudCwgRCBleHRlbmRzIHN0cmluZyA9IHN0cmluZz4oXG4gIHR5cGU6IHN0cmluZyxcbiAgY3NzQ2xhc3NBcnJheTogc3RyaW5nW10sXG4gIHRleHQ/OiBzdHJpbmcsXG4gIGRhdGE/OiBEXG4pIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG4gIGNzc0NsYXNzQXJyYXkuZm9yRWFjaCgoc3R5bGUpID0+IGVsZW1lbnQuY2xhc3NMaXN0LmFkZChzdHlsZSkpO1xuICBpZiAodGV4dCkgZWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7XG4gIGlmIChkYXRhKSBlbGVtZW50LmRhdGFzZXQubmFtZSA9IGRhdGE7XG4gIHJldHVybiBlbGVtZW50IGFzIFQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmV0dHlEYXRlKGRhdGU6IERhdGUpIHtcbiAgY29uc3QgZGF5c0FyciA9IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlblwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXTtcbiAgY29uc3QgbW9udGhzQXJyID0gW1xuICAgIFwiSmFuXCIsXG4gICAgXCJGZWJcIixcbiAgICBcIk1hclwiLFxuICAgIFwiQXByXCIsXG4gICAgXCJNYXlcIixcbiAgICBcIkp1blwiLFxuICAgIFwiSnVsXCIsXG4gICAgXCJBdWdcIixcbiAgICBcIlNlcFwiLFxuICAgIFwiT2N0XCIsXG4gICAgXCJOb3ZcIixcbiAgICBcIkRlY1wiLFxuICBdO1xuICBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICBkYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gIH1cbiAgY29uc3QgZGF5OiBzdHJpbmcgPSBkYXlzQXJyW2RhdGUuZ2V0RGF5KCldO1xuICBjb25zdCBkYXRlTnVtOiBudW1iZXIgPSBkYXRlLmdldERhdGUoKTtcbiAgY29uc3QgbW9udGg6IHN0cmluZyA9IG1vbnRoc0FycltkYXRlLmdldE1vbnRoKCldO1xuICBjb25zdCB5ZWFyOiBudW1iZXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gIGNvbnN0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpO1xuICBsZXQgbWlucyA9IGRhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCk7XG4gIGlmIChtaW5zLmxlbmd0aCA8IDIpIG1pbnMgPSBcIjBcIiArIG1pbnM7XG4gIHJldHVybiBgJHtkYXl9ICAgJHtkYXRlTnVtfSAke21vbnRofSAke3llYXJ9ICAgJHtob3Vyc306JHttaW5zfWA7XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IFwiLi9zdHlsZXMuc2Nzc1wiO1xuaW1wb3J0IFwiLi9ub3JtYWxpemUuc2Nzc1wiO1xuaW1wb3J0IHsgY3JlYXRlSHRtbEVsZW1lbnQgfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IGRpc3BhdGNoZXJGdW5jdGlvbiBmcm9tIFwiLi9jb21wb25lbnRzL2Rpc3BhdGNoZXJcIjtcbmltcG9ydCBGb3JtIGZyb20gXCIuL2NvbXBvbmVudHMvdmlldy9mb3JtXCI7XG5pbXBvcnQgTGlzdCBmcm9tIFwiLi9jb21wb25lbnRzL3ZpZXcvbGlzdFwiO1xuaW1wb3J0IE5hdiBmcm9tIFwiLi9jb21wb25lbnRzL3ZpZXcvbmF2XCI7XG5pbXBvcnQgU3RvcmFnZSBmcm9tIFwiLi9jb21wb25lbnRzL3N0b3JhZ2VcIjtcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuL2FwaVwiO1xuaW1wb3J0IHsgU3RhdGVPYmogfSBmcm9tIFwidHlwZXNcIjtcblxuY29uc3QgaW5pdGlhbFN0YXRlOiBTdGF0ZU9iaiA9IHtcbiAgZmlsdGVyOiBcImFsbFwiLFxuICB0YXNrczogW10sXG4gIGxvYWRpbmdTdGF0ZTogZmFsc2UsXG4gIGxvYWRpbmdUYXNrczogW10sXG4gIGlzUmV2ZXJzZWQ6IGZhbHNlLFxufTtcblxuY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xuY29uc3QgYXBwUm9vdCA9IGNyZWF0ZUh0bWxFbGVtZW50KFwiZGl2XCIsIFtcImFwcFwiXSk7XG5ib2R5LmFwcGVuZChhcHBSb290KTtcblxuY29uc3QgYXBwVGl0bGUgPSBjcmVhdGVIdG1sRWxlbWVudChcImgxXCIsIFtcImFwcF9fdGl0bGVcIl0sIFwiVG8tZG8gTGlzdFwiKTtcbmNvbnN0IGNvbnRhaW5lciA9IGNyZWF0ZUh0bWxFbGVtZW50KFwiZGl2XCIsIFtcImFwcF9fY29udGFpbmVyXCJdKTtcblxuYXBwUm9vdC5hcHBlbmQoYXBwVGl0bGUsIGNvbnRhaW5lcik7XG5cbmNvbnN0IHN0b3JhZ2UgPSBuZXcgU3RvcmFnZShpbml0aWFsU3RhdGUpO1xuY29uc3QgZGlzcGF0Y2ggPSBkaXNwYXRjaGVyRnVuY3Rpb24oc3RvcmFnZSk7XG5jb25zdCBuYXYgPSBuZXcgTmF2KGRpc3BhdGNoKTtcbmNvbnN0IGxpc3QgPSBuZXcgTGlzdChkaXNwYXRjaCk7XG5jb25zdCBmb3JtID0gbmV3IEZvcm0oZGlzcGF0Y2gpO1xuXG5jb25zdCB2aWV3cyA9IFtuYXYsIGxpc3QsIGZvcm1dO1xudmlld3MuZm9yRWFjaCgodmlldykgPT4ge1xuICBzdG9yYWdlLnN1YnNjcmliZSh2aWV3Lm9uU3RhdGVVcGRhdGUuYmluZCh2aWV3KSk7XG4gIGNvbnRhaW5lci5hcHBlbmQodmlldy5nZXRWaWV3KCkpO1xufSk7XG5cbmRpc3BhdGNoKHtcbiAgdHlwZTogXCJMT0FESU5HX1NUQVRFXCIsXG4gIHBheWxvYWQ6IHRydWUsXG59KTtcblxuYXBpLmdldEFsbCgpLnRoZW4oKHRhc2tzKSA9PiB7XG4gIGRpc3BhdGNoKHsgdHlwZTogXCJMT0FEX0lOSVRJQUxfVEFTS1NcIiwgcGF5bG9hZDogdGFza3MgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJhcGkiLCJjb25zdHJ1Y3RvciIsImpzb25UYXNrcyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJ0aGlzIiwidGFza3NBcnIiLCJKU09OIiwicGFyc2UiLCJtYXAiLCJvYmoiLCJkYXRlIiwiRGF0ZSIsImdldEFsbCIsInVwZGF0ZVN0b3JlZERhdGEiLCJQcm9taXNlIiwicmVzIiwic2V0VGltZW91dCIsImFkZCIsIm5ld1Rhc2siLCJwdXNoIiwicmVtb3ZlIiwiaWQiLCJmaWx0ZXIiLCJ0YXNrIiwidXBkYXRlIiwidXBkYXRlZFRhc2siLCJmaW5kVGFzayIsInN0YXR1cyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJmaW5kIiwic3RvcmFnZUluc3RhbmNlIiwiYWN0aW9uIiwiY3VycmVudFN0YXRlIiwiZ2V0U3RhdGUiLCJ1cGRhdGVTdGF0ZSIsInR5cGUiLCJsb2FkaW5nU3RhdGUiLCJ0YXNrcyIsInBheWxvYWQiLCJsb2FkaW5nVGFza3MiLCJpc1JldmVyc2VkIiwibG9hZGluZ0FyciIsInNsaWNlIiwic3RhdGUiLCJyZWR1Y2VyIiwic3Vic2NyaWJlcnMiLCJmb3JjZWRDb25zdHJ1Y3RvciIsImZvckVhY2giLCJmbiIsInN1YnNjcmliZSIsImZvcmNlVXBkYXRlIiwiZGlzcGF0Y2giLCJlbGVtZW50IiwiY3JlYXRlSHRtbEVsZW1lbnQiLCJjcmVhdGVET01FbGVtZW50IiwiaW5uZXJIVE1MIiwid3JhcCIsImlucHV0Iiwic2V0QXR0cmlidXRlIiwiYnV0dG9uQWRkIiwiY291bnRlciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImNvdW50ZXJWYWx1ZSIsInRleHRDb250ZW50IiwibGVuZ3RoV2FybmluZyIsImJpbmRlZEhhbmRsZUlucHV0VmFsaWRhdGlvbiIsImhhbmRsZUlucHV0VmFsaWRhdGlvbiIsImJpbmQiLCJiaW5kZWRIYW5kbGVDcmVhdGVOb3RlIiwiaGFuZGxlQ3JlYXRlTm90ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJhcHBlbmQiLCJhcHBlbmRDaGlsZCIsIm9uU3RhdGVVcGRhdGUiLCJjbGVhckhhbmRsZXJzIiwidGFza3NBcnJheSIsImdldFZpZXciLCJpbnB1dFZhbGlkYXRpb24iLCJpbnB1dEVsZW0iLCJ3YXJuRWxlbTEiLCJ3YXJtRWxlbTIiLCJ2YWx1ZSIsInRhc2tUZXh0IiwibGVuZ3RoIiwidG9VcHBlckNhc2UiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjcmVhdGVOZXdOb3RlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNvcnQiLCJhIiwiYiIsImdldFRpbWUiLCJ0YXNrT2JqIiwibm90ZSIsInRoZW4iLCJzcGlubmVyIiwiY3VycmVudExlbmd0aCIsInVwZGF0ZUxpc3QiLCJ0YXNrSW5zdGFuY2VzIiwiYWRkU3Bpbm5lciIsInJlbW92ZVNwaW5uZXIiLCJjcmVhdGVUYXNrc0xpc3QiLCJ0ZXh0IiwidHlwZWQiLCJ0YXNrRWxlbWVudHMiLCJjcmVhdGVUYXNrRWxlbWVudHMiLCJlbCIsInRhc2tFbGVtZW50c0FycmF5Iiwic29ydEVsZW1lbnRzQnlEYXRlIiwiYnV0dG9uQWxsIiwiYnV0dG9uQWN0aXZlIiwiYnV0dG9uRG9uZSIsImJ1dHRvbiIsImJ1dHRvblJlc2Vyc2UiLCJjaGlsZE5vZGVzIiwiZmlsdGVyV3JhcCIsImRhdGFzZXQiLCJuYW1lIiwidGFza0RhdGEiLCJpc0xvYWRpbmciLCJpbmNsdWRlcyIsIm5ld1N0YXR1cyIsInVwZGF0ZVRhc2tFbGVtZW50IiwibGVmdENvbnRhaW5lciIsInJpZ2h0Q29udGFpbmVyIiwiYnV0dG9uc0NvbnRhaW5lciIsInN0YXR1c0VsZW0iLCJidXR0b25EZWxldGUiLCJkYXRlRWxlbSIsImdldFByZXR0eURhdGUiLCJiaW5kZWRIYW5kbGVEZWxldGUiLCJoYW5kbGVEZWxldGUiLCJiaW5kZWRIYW5kbGVEb25lIiwiaGFuZGxlRG9uZSIsImNzc0NsYXNzQXJyYXkiLCJkYXRhIiwic3R5bGUiLCJkYXkiLCJnZXREYXkiLCJkYXRlTnVtIiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJob3VycyIsImdldEhvdXJzIiwibWlucyIsImdldE1pbnV0ZXMiLCJ0b1N0cmluZyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJib2R5IiwicXVlcnlTZWxlY3RvciIsImFwcFJvb3QiLCJhcHBUaXRsZSIsImNvbnRhaW5lciIsInN0b3JhZ2UiLCJ2aWV3Il0sInNvdXJjZVJvb3QiOiIifQ==